#[test]
fn test_rkv_new_handles_corrupted_database() {
    let temp_dir = TempDir::new("rkv-test").unwrap();
    let safebin = temp_dir.path().join("data.safe.bin");

    // Create a corrupted database file
    let mut file = File::create(&safebin).unwrap();
    file.write_all(b"corrupted").unwrap();

    // Attempt to open the corrupted database
    let result = rkv_new(&temp_dir.path());

    // After the patch, it should succeed
    assert!(result.is_ok());
}