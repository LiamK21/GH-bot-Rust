#[test]
fn test_snapshot_values_does_not_include_zero_buckets() {
    let bucketing = PrecomputedLinear::new(0, 100, 5);
    let mut histogram = Histogram::new(bucketing);

    // Add a sample to the first bucket
    histogram.add(0);

    // Get the snapshot
    let snapshot = histogram.snapshot_values();

    // The snapshot should only contain the bucket that was used
    let expected: HashMap<u64, u64> = HashMap::from([(0, 1)]);
    assert_eq!(snapshot, expected);
}