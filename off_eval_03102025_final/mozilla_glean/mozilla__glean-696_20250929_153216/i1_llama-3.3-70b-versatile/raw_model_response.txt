<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use std::thread;
use std::time::Duration;
use super::PingUploadManager;
use super::PingUploadTask;
</imports>
<Rust>
#[test]
fn test_get_upload_task_returns_wait_when_not_done_processing_pending_pings() {
  let dir = tempfile::tempdir().unwrap();
  let tmpname = dir.path().display().to_string();
  let upload_manager = PingUploadManager::new(&tmpname);

  let actual = upload_manager.get_upload_task();
  assert_eq!(actual, PingUploadTask::Wait);

  thread::sleep(Duration::from_millis(10));
  let actual = upload_manager.get_upload_task();
  assert_ne!(actual, PingUploadTask::Wait);
}
</Rust>