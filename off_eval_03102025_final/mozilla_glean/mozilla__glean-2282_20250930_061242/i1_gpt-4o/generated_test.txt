#[test]
fn test_glean_set_metrics_disabled_config() {
    let (glean, _t) = new_glean(None);
    let json_config = r#"{"category.metric_name": true}"#.to_string();
    let config = MetricsDisabledConfig::try_from(json_config.clone()).unwrap();

    glean_set_metrics_disabled_config(json_config);

    let lock = glean.remote_settings_metrics_config.lock().unwrap();
    assert_eq!(lock.metrics_disabled, config.metrics_disabled);
}