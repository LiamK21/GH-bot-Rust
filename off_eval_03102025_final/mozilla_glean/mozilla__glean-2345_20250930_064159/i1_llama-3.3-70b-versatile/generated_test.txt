#[test]
fn test_config_support() {
  let temp_dir = TempDir::new().unwrap();
  let udl_file = temp_dir.path().join("test.udl");
  let mut file = fs::File::create(&udl_file).unwrap();
  file.write_all(b"test").unwrap();

  let config_file = temp_dir.path().join("config");
  let mut config = fs::File::create(&config_file).unwrap();
  config.write_all(b"test_config").unwrap();

  let status = Command::new("cargo")
    .arg("run")
    .arg("--")
    .arg("--config")
    .arg(config_file.to_str().unwrap())
    .arg(udl_file.to_str().unwrap())
    .status()
    .unwrap();

  assert!(status.success());
}