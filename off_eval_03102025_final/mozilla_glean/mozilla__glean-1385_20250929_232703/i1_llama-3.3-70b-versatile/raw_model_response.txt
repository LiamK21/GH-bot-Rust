<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use super::PingUploadManager;
use super::PingUploadTask;
use std::thread;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_wait_task_contains_expected_wait_time_when_rate_limiter_is_throttled() {
  let mut upload_manager = PingUploadManager::new("/tmp/test", "test");
  let wait_time = 1000; // in milliseconds
  upload_manager.set_rate_limiter(1, 1);
  upload_manager.enqueue_ping(&(), "/tmp/test/ping", "", None);
  upload_manager.enqueue_ping(&(), "/tmp/test/ping2", "", None);
  match upload_manager.get_upload_task(&(), false) {
    PingUploadTask::Wait(time) => {
      assert_eq!(time, wait_time);
    }
    _ => panic!("Expected upload manager to return a wait task!"),
  };
}
</Rust>