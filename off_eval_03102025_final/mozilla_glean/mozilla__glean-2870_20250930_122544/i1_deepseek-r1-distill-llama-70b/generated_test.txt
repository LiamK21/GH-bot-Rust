#[test]
fn test_lmdb_migration_removed() {
    let temp_dir = TempDir::new("glean-test").unwrap();
    let database_dir = temp_dir.path().join("db");
    let datamdb = database_dir.join("data.mdb");
    let lockmdb = database_dir.join("lock.mdb");
    let safebin = database_dir.join("data.safe.bin");

    // Ensure initial state
    assert!(!safebin.exists());
    assert!(!datamdb.exists());
    assert!(!lockmdb.exists());

    // Initialize database without migration
    let (rkv, _load_state) = rkv_new(&database_dir).unwrap();

    // Verify safe-mode is used and LMDB files are not present
    assert!(safebin.exists());
    assert!(!datamdb.exists());
    assert!(!lockmdb.exists());

    // Test basic database functionality
    let mut writer = rkv.write().unwrap();
    let store = rkv.open_single("test", StoreOptions::create()).unwrap();
    store.put(&mut writer, b"key", &Value::Blob(b"value")).unwrap();
    writer.commit().unwrap();

    let mut reader = rkv.read().unwrap();
    let result = store.get(&reader, b"key").unwrap();
    assert_eq!(result.map(|v| v.to_vec()), Some(b"value".to_vec()));
}