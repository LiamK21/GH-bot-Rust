<Filename> glean-core/src/metrics/experiment.rs </Filename>
<imports> 
use crate::error_recording::{record_error, ErrorType};
use crate::metrics::Metric;
use crate::metrics::MetricType;
use crate::storage::StorageManager;
use crate::util::{truncate_string_at_boundary, truncate_string_at_boundary_with_error};
use crate::CommonMetricData;
use crate::Glean;
use crate::Lifetime;
use std::collections::HashMap;
use super::ExperimentMetric;
</imports>
<Rust>
#[test]
fn test_experiments_api_limits_violations() {
  let glean = Glean::new();
  let experiment_id = "a".repeat(31);
  let branch = "b".repeat(31);
  let extra = HashMap::from([("c".repeat(31), "d".repeat(100))]);
  let metric = ExperimentMetric::new(&glean, experiment_id);
  metric.set_active(&glean, branch, Some(extra));
  // Assert that error is recorded
  // Since the actual assertion logic may vary based on the error recording mechanism,
  // the following line is just an example and may need to be adjusted.
  assert!(record_error.called_with(glean, metric.meta, ErrorType::InvalidValue));
}</Rust>