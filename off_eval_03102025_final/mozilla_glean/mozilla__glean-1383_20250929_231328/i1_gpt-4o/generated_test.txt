#[test]
fn test_snapshot_metric_with_specific_lifetime() {
    let storage = Database::new();
    let store_name = "test_store";
    let metric_id = "test_metric";
    let metric_lifetime = Lifetime::Application;

    // Simulate storing a metric with a specific lifetime
    storage.store_metric(metric_lifetime, store_name, metric_id, Metric::Boolean(true));

    // Call snapshot_metric with the specific lifetime
    let result = StorageManager::snapshot_metric(&storage, store_name, metric_id, metric_lifetime);

    // Verify that the correct metric is retrieved
    assert_eq!(result, Some(Metric::Boolean(true)));
}