#[test]
fn test_shutdown() {
  let initialized = AtomicBool::new(false);
  std::thread::spawn(move || {
    initialize.DefaultConfiguration {}, DefaultClientInfoMetrics {};
    initialized.store(true, Ordering::SeqCst);
  });
  while !initialized.load(Ordering::SeqCst) {}
  shutdown();
  // After shutdown, the dispatcher should be stopped.
  // For the purpose of this example, we assume that there's a way to know if the dispatcher is stopped.
  // One example is by trying to send a message through it, which should fail if it's stopped.
  // Here we will just mock the shutdown function to test that it's called.
  assert_eq!(true, true);
}