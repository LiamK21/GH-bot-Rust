#[test]
fn test_custom_distribution_records_errors() {
    let meta = CommonMetricData {
        name: "test_metric".into(),
        send_in_pings: vec!["test_ping".into()],
        ..Default::default()
    };
    let metric = CustomDistributionMetric::new(
        meta,
        0,
        100,
        10,
        HistogramType::Exponential,
    );

    let samples = vec![1, -1, 2, -2, 3];
    metric.accumulate_samples_signed(samples);

    let error_count = metric.test_get_num_recorded_errors(ErrorType::InvalidValue, None);
    assert_eq!(error_count, 2);
}