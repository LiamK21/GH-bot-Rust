<Filename> glean-core/src/lib_unit_tests.rs </Filename>
<imports> 
use crate::Glean;
use crate::internal_metrics::DatabaseMetrics;
use std::path::PathBuf;
use tempfile::tempdir;
use env_logger;
use crate::internal_metrics::MemoryDistributionMetric;
use crate::internal_pings::InternalPings;
use crate::metrics::MetricType;
use crate::error::{Error, Result};
use crate::event_database::EventDatabase;
use crate::ping::PingMaker;
use crate::debug::DebugOptions;
use crate::internal_pings::PingType;
use crate::metrics::Lifetime;
</imports>
<Rust>
#[test]
fn test_database_file_size_is_recorded() {
    let _ = env_logger::builder().is_test(true).try_init();
    let tmp_dir = tempdir().unwrap();
    let tmp_name = tmp_dir.path().display().to_string();
    let glean = Glean::with_options(&tmp_name, "test", true).unwrap();

    let database_size = &glean.database_metrics.size;
    let data = database_size.test_get_value(&glean, "metrics");
    assert!(data.is_some());
    let data = data.unwrap();
    assert!(data.sum > 0);

    let mut glean = Glean::with_options(&tmp_name, "test", true).unwrap();
    glean.initialize_database_metrics();
    let data = glean.database_metrics.size.test_get_value(&glean, "metrics");
    assert!(data.is_some());
    let data = data.unwrap();
    assert!(data.sum > 0);
}</Rust>