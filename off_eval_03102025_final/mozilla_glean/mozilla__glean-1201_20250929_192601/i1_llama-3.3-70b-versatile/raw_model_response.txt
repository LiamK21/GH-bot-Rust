<Filename> glean-core/src/lib.rs </Filename>
<imports> 
use log::Level;
use super::Glean;
use std::io::Cursor;
use log::Log;
</imports>
<Rust>
#[test]
fn test_glean_disabled_logging() {
  let glean = Glean { upload_enabled: false };
  let ping = ();
  let reason = None;
  let log_level = Level::Info;
  let expected_log = "Glean disabled: not submitting any pings";
  let mut captain = Cursor::new(Vec::new());
  log::set_logger(&mut captain).unwrap();
  log::set_max_level(log_level.to_level_filter());
  glean.submit_ping(&ping, reason);
  let actual_log = std::string::String::from_utf8(captain.into_inner()).unwrap();
  assert!(actual_log.contains(&expected_log));
}</Rust>