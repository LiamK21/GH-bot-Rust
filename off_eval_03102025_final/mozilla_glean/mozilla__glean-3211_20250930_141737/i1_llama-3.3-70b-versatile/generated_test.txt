#[test]
fn test_histogram_merge_saturating_add() {
  let mut histogram = Histogram::new(1, 10, 2);
  let mut other_histogram = Histogram::new(1, 10, 2);
  histogram.accumulate(1000000000);
  histogram.accumulate(1000000000);
  other_histogram.accumulate(1000000000);
  other_histogram.accumulate(1000000000);
  histogram.merge(&other_histogram);
  assert!(histogram.sum == i64::MAX);
  assert!(histogram.count == u64::MAX);
  let mut values = HashMap::new();
  values.insert(1000000000, u64::MAX);
  assert_eq!(histogram.values, values);
}