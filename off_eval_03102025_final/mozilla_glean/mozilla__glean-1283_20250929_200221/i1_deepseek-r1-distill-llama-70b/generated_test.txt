#[test]
fn test_recoverable_upload_failure_logs_info() {
    let _capture = capture();
    let document_id = "test-document-id";
    let mut manager = PingUploadManager::new();

    // Simulate a recoverable failure
    let result = manager.upload(document_id, vec![]);

    let captured = _capture.stop();
    let log_entry = captured.iter().find(|entry| {
        entry.message == "Recoverable upload failure while attempting to send ping {}, will retry. Error was {:?}"
            .replace("{", "")
            .replace("}", "")
    }).unwrap();

    assert_eq!(log_entry.level, Level::Info);
    assert!(log_entry.message.contains("Recoverable upload failure"));
    assert!(log_entry.message.contains(document_id));
}