#[test]
fn test_pings_following_disabled_ping_schedule_get_submitted() {
  let ping_name = "test_ping";
  let scheduled_ping_name = "scheduled_ping";
  let mut glean = Glean::new(
    ConfigurationBuilder::new(false, "/tmp/test", "test_app")
      .with_ping_schedule(HashMap::from([(ping_name.to_string(), vec![scheduled_ping_name.to_string()])]))
      .build()
  ).unwrap();

  let ping = PingType::new(
    ping_name,
    true,
    true,
    true,
    true,
    true,
    vec![],
    vec![],
    false,
    vec![],
  );
  ping.set_enabled(false);

  glean.submit_ping_by_name(ping_name, None);

  let scheduled_ping = PingType::new(
    scheduled_ping_name,
    true,
    true,
    true,
    true,
    true,
    vec![],
    vec![],
    false,
    vec![],
  );
  scheduled_ping.set_enabled(true);

  assert!(glean.submit_ping_by_name(scheduled_ping_name, None));
}