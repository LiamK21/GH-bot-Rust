<Filename>glean-core/src/lib.rs</Filename>
<imports>
use super::shutdown;
use std::sync::{Arc, Mutex};
use std::thread;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_shutdown_before_init_completes() {
    let init_called = Arc::new(Mutex::new(false));
    let init_called_clone = Arc::clone(&init_called);

    // Simulate the init process
    thread::spawn(move || {
        thread::sleep(Duration::from_secs(5));
        let mut init = init_called_clone.lock().unwrap();
        *init = true;
    });

    // Call shutdown before init completes
    shutdown();

    // Check if init was completed
    let init_completed = *init_called.lock().unwrap();
    assert!(!init_completed, "Init should not have completed before shutdown");
}
</Rust>