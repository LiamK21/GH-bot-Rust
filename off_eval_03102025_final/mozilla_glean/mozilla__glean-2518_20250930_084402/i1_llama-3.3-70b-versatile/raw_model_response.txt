<Filename> glean-core/src/lib.rs </Filename>
<imports> 
use std::thread;
use std::time::Duration;
use super::shutdown;
use super::initialize_inner;
use super::dispatcher;
use super::core;
use super::ClientInfoMetrics;
use super::InternalConfiguration;
use super::OnGleanEvents;
</imports>
<Rust>
#[test]
fn test_shutdown_before_init_completion() {
  // Test shutdown before init completion.
  let handle = thread::spawn(move || {
    initialize_inner(InternalConfiguration::default(), ClientInfoMetrics::default(), Box::newNOP());
  });
  thread::sleep(Duration::from_millis(10));
  shutdown();
  handle.join().unwrap();
}</Rust>