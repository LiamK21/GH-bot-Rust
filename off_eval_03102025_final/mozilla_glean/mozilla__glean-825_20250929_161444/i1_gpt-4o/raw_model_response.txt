<Filename>glean-core/src/upload/mod.rs</Filename>
<imports>
use super::PingUploadManager;
use serde_json::json;
use std::sync::{Arc, RwLock};
use std::collections::VecDeque;
</imports>
<Rust>
#[test]
fn test_clear_ping_queue_retains_deletion_requests() {
    let manager = PingUploadManager {
        queue: Arc::new(RwLock::new(VecDeque::new())),
    };

    let deletion_request_ping = PingRequest {
        uuid: "deletion-uuid".to_string(),
        path: "/deletion-request".to_string(),
        body: json!({}),
    };

    let normal_ping = PingRequest {
        uuid: "normal-uuid".to_string(),
        path: "/normal-ping".to_string(),
        body: json!({}),
    };

    {
        let mut queue = manager.queue.write().unwrap();
        queue.push_back(deletion_request_ping.clone());
        queue.push_back(normal_ping);
    }

    manager.clear_ping_queue();

    let queue = manager.queue.read().unwrap();
    assert_eq!(queue.len(), 1);
    assert_eq!(queue.front().unwrap().uuid, "deletion-uuid");
}
</Rust>