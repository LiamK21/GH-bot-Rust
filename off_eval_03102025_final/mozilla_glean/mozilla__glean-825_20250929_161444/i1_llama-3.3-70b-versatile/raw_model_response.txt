<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use super::PingUploadManager;
use std::sync::RwLock;
use std::sync::RwLockWriteGuard;
use std::collections::VecDeque;
use std::str::FromStr;
</imports>
<Rust>
#[test]
fn test_deletion_request_ping_clear_queue() {
  let ping_manager = PingUploadManager { queue: RwLock::new(VecDeque::new()) };
  let ping1 = super::PingRequest { uuid: "uuid1".to_string(), path: "path1".to_string(), body: json!("{}"), is_deletion_request: true };
  let ping2 = super::PingRequest { uuid: "uuid2".to_string(), path: "path2".to_string(), body: json!("{}"), is_deletion_request: false };
  let ping3 = super::PingRequest { uuid: "uuid3".to_string(), path: "path3".to_string(), body: json!("{}"), is_deletion_request: true };

  ping_manager.enqueue_ping(&ping1.uuid, &ping1.path, ping1.body.clone());
  ping_manager.enqueue_ping(&ping2.uuid, &ping2.path, ping2.body.clone());
  ping_manager.enqueue_ping(&ping3.uuid, &ping3.path, ping3.body.clone());

  let queue = ping_manager.clear_ping_queue();
  assert_eq!(queue.len(), 2);
  assert_eq!(queue.iter().all(|x| x.is_deletion_request), true);
}</Rust>