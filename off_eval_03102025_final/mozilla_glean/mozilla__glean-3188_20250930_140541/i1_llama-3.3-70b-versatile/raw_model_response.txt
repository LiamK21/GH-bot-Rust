<Filename> glean-core/src/ping/mod.rs </Filename>
<imports> 
use glean_core::ping::PingMaker;
use serde_json::json;
</imports>
<Rust>
#[test]
fn test_uploader_capabilities_inclusion() {
  let ping_name = "test_ping";
  let uploader_capabilities = vec!["capability1".to_string(), "capability2".to_string()];
  let ping = PingMaker::new(ping_name, true, true);
  let metrics_data = ping.create_ping_data(uploader_capabilities);
  assert!(metrics_data["metrics"].as_object().unwrap().contains_key("string_list"));
  assert!(metrics_data["metrics"]["string_list"].as_object().unwrap().contains_key("glean.ping.uploader_capabilities"));
  let capabilities = metrics_data["metrics"]["string_list"]["glean.ping.uploader_capabilities"].as_array().unwrap();
  assert_eq!(capabilities.len(), 2);
  assert_eq!(capabilities[0].as_str().unwrap(), "capability1");
  assert_eq!(capabilities[1].as_str().unwrap(), "capability2");
}</Rust>