<Filename> glean-core/src/dispatcher/mod.rs </Filename>
<imports> 
use glean_core::dispatcher::Dispatcher;
use glean_core::dispatcher::DispatchError;
use std::thread;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_preinit_queue_size() {
  let dispatcher = Dispatcher::new(10);
  let mut handle = thread::spawn(move || {
    for _ in 0..15 {
      match dispatcher.send(glean_core::dispatcher::Command::Default) {
        Ok(_) => (),
        Err(DispatchError::QueueFull) => return,
        Err(_) => panic!("Unexpected error"),
      }
    }
    panic!("Queue should be full by now");
  });
  handle.join().unwrap();
}</Rust>