<Filename>src/output.rs</Filename>
<imports>
use super::output_html;
use std::path::Path;
use std::sync::{Arc, Mutex};
use crate::html::{HtmlGlobalStats, HtmlStats};
use crate::html::HtmlJobReceiver;
use std::collections::BTreeMap;
use std::thread;
use std::sync::mpsc::channel;
</imports>
<Rust>
#[test]
fn test_output_html_with_abs_link_prefix() {
    let results = &[];
    let output_dir = Some(Path::new("output"));
    let num_threads = 1;
    let branch_enabled = false;
    let output_config_file = None;
    let precision = 2;
    let abs_link_prefix = Some(String::from("http://example.com/"));
    let no_date = false;

    let (sender, receiver) = channel();
    let stats = Arc::new(Mutex::new(HtmlGlobalStats::default()));
    let tera = Tera::default();
    let config = Config::default();

    let t = thread::spawn(move || {
        output_html(
            results,
            output_dir,
            num_threads,
            branch_enabled,
            output_config_file,
            precision,
            &abs_link_prefix,
            no_date,
        );
    });

    sender.send(Some(HtmlJobReceiver::default())).unwrap();
    sender.send(None).unwrap();
    t.join().unwrap();

    let global = stats.lock().unwrap();
    assert_eq!(global.abs_prefix, Some(PathBuf::from("http://example.com/")));
}
</Rust>