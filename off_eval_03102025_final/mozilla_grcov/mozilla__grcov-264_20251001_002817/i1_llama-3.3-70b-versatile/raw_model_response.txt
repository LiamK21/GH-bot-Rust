<Filename> path_rewriting.rs </Filename>
<imports> 
use std::path::PathBuf;
use super::rewrite_paths;
use super::get_abs_path;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_rewrite_paths_resolves_file_name_clashes() {
  let mut file_to_paths: HashMap<String, Vec<PathBuf>> = HashMap::new();
  file_to_paths.insert("lib.rs".to_string(), vec![PathBuf::from("src/lib.rs"), PathBuf::from("/rustc/0ea22717a1e01fa535534b85a5347a7e49fc79de/src/libtest/lib.rs")]);
  let result_map: HashMap<String, ()> = HashMap::new();
  result_map.insert("lib.rs".to_string(), ());
  let source_dir = Some(PathBuf::from("src"));
  let prefix_dir = None;
  let ignore_not_existing = true;
  let to_ignore_dirs = Vec::new();
  let filter_option = None;
  let results = rewrite_paths(result_map, None, source_dir, prefix_dir, ignore_not_existing, to_ignore_dirs, filter_option);
  let mut count = 0;
  for (abs_path, _, _) in results {
    count += 1;
    assert!(abs_path.is_absolute());
    assert!(abs_path.ends_with("lib.rs"));
  }
  assert_eq!(count, 1);
}</Rust>