#[test]
fn test_partial_path_map_only_for_java_files() {
    let temp_dir = Path::new("tests/temp").to_path_buf();
    fs::create_dir_all(&temp_dir).unwrap();

    // Create a Java file and a non-Java file
    let java_file = temp_dir.join("test.java");
    let non_java_file = temp_dir.join("test.txt");

    fs::File::create(&java_file).unwrap();
    fs::File::create(&non_java_file).unwrap();

    let result_map = CovResultMap::new();
    let path_mapping = None;
    let source_dir = Some(&temp_dir);
    let prefix_dir = None;
    let ignore_not_existing = false;
    let to_ignore_dirs = &[];
    let to_keep_dirs = &[];
    let filter_option = None;
    let file_filter = crate::FileFilter::default();

    let results = rewrite_paths(
        result_map,
        path_mapping,
        source_dir,
        prefix_dir,
        ignore_not_existing,
        to_ignore_dirs,
        to_keep_dirs,
        filter_option,
        file_filter,
    );

    // Clean up
    fs::remove_dir_all(&temp_dir).unwrap();

    // Assert that only Java files were processed
    assert_eq!(results.len(), 1);
    assert!(results.iter().any(|r| r.file_path.ends_with("test.java")));
    assert!(!results.iter().any(|r| r.file_path.ends_with("test.txt")));
}