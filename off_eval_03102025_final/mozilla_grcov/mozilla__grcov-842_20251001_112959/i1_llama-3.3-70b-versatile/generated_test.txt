#[test]
fn test_consumer_error_handling() {
  let working_dir = Path::new("/path/to/working/directory");
  let source_dir = None;
  let result_map: Arc<Mutex<HashMap<String, String>>> = Arc::new(Mutex::new(HashMap::new()));
  let receiver = std::sync::mpsc::channel().0;
  let branch_enabled = true;
  let guess_directory = true;
  let binary_path = None;

  // Define expected behavior
  let expected_error = "Error when running gcov";

  // Define actual behavior
  let result = std::panic::catch_unwind(|| consumer(working_dir, source_dir, &result_map, receiver, branch_enabled, guess_directory, binary_path));

  // Compare expected with actual
  assert!(result.is_err());
}