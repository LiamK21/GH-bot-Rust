<Filename>src/path_rewriting.rs</Filename>
<imports>
use super::rewrite_paths;
use rustc_hash::FxHashMap;
use std::path::PathBuf;
</imports>
<Rust>
#[test]
fn test_rewrite_paths_keep_only_specific_files() {
    let mut result_map: FxHashMap<String, ()> = FxHashMap::default();
    result_map.insert("main.rs".to_string(), ());
    result_map.insert("src/lib.rs".to_string(), ());
    result_map.insert("src/utils.rs".to_string(), ());
    let results = rewrite_paths(
        result_map,
        None,
        None,
        None,
        false,
        &mut Vec::new(),
        &vec!["src/lib.rs"],
        None,
        Default::default(),
    );
    let mut count = 0;
    for (abs_path, rel_path, result) in results {
        count += 1;
        assert_eq!(abs_path, PathBuf::from("src/lib.rs"));
        assert_eq!(rel_path, PathBuf::from("src/lib.rs"));
        assert_eq!(result, ());
    }
    assert_eq!(count, 1);
}
</Rust>