#[test]
fn test_deserialize_counter() {
    use serde_json::Value;

    let test_cases = vec![
        (
            Value::Number(Number::from(123)),
            Ok(123),
        ),
        (
            Value::Number(Number::from(123.0)),
            Ok(123),
        ),
        (
            Value::Number(Number::from(-123.0)),
            Err(serde::de::Error::custom("Unable to parse u64 from -123.0")),
        ),
        (
            Value::Number(Number::from(18446744073709551616.0)),
            Err(serde::de::Error::custom("Unable to parse u64 from 18446744073709551616.0")),
        ),
    ];

    for (input, expected) in test_cases {
        let result = deserialize_counter(serde_json::Deserializer::from(input));
        match (result, expected) {
            (Ok(res), Ok(exp)) => assert_eq!(res, exp),
            (Err(_), Err(_)) => (),
            _ => panic!("Test case failed"),
        }
    }
}