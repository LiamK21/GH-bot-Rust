#[test]
fn test_comment_removal_using_file_name() {
    let mut server = TestServer::new().run().unwrap();
    let mut client = Client::new(&server.handle());

    let test_cases = vec![
        ("test.cpp", "cpp"),
        ("script.js", "javascript"),
        ("document.py", "python"),
    ];

    for (file_name, expected_language) in test_cases {
        let payload = json!({
            "id": "1234",
            "file_name": file_name,
            "code": "int x = 1;",
            "comment": true,
            "span": true
        });

        let request = client
            .post("/ast")
            .header("Content-Type", "application/json")
            .send_json(&payload);

        let response = request.unwrap();
        assert_eq!(response.status(), 200);
    }
}