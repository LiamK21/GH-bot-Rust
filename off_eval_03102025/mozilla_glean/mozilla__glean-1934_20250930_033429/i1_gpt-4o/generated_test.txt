#[test]
fn test_destroy_glean_before_init_complete() {
    let cfg = Configuration {
        data_path: "test_path".into(),
        application_id: "test_app".into(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
        delay_ping_lifetime_io_timeout: None,
        delay_ping_lifetime_io_max_retries: None,
        delay_ping_lifetime_io_retry_interval: None,
        delay_ping_lifetime_io_retry_backoff: None,
        delay_ping_lifetime_io_retry_jitter: None,
        delay_ping_lifetime_io_retry_max_jitter: None,
        delay_ping_lifetime_io_retry_max_delay: None,
        delay_ping_lifetime_io_retry_max_duration: None,
        delay_ping_lifetime_io_retry_max_attempts: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond_per_gkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond_per_gkonosecond_per_fkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond_per_gkonosecond_per_fkonosecond_per_ekonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond_per_gkonosecond_per_fkonosecond_per_ekonosecond_per_dkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond_per_gkonosecond_per_fkonosecond_per_ekonosecond_per_dkonosecond_per_ckonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond_per_gkonosecond_per_fkonosecond_per_ekonosecond_per_dkonosecond_per_ckonosecond_per_bkonosecond: None,
        delay_ping_lifetime_io_retry_max_attempts_per_ping_per_session_per_user_per_day_per_hour_per_minute_per_second_per_millisecond_per_microsecond_per_nanosecond_per_picosecond_per_femtosecond_per_attosecond_per_zeptosecond_per_yoctosecond_per_xonosecond_per_wekonosecond_per_vikonosecond_per_ukonosecond_per_tkonosecond_per_skonosecond_per_rkonosecond_per_qkonosecond_per_pkonosecond_per_okonosecond_per_nkonosecond_per_mkonosecond_per_lkonosecond_per_konosecond_per_jkonosecond_per_ikonosecond_per_hkonosecond_per_gkonosecond_per_fkonosecond_per_ekonosecond_per_dkonosecond_per_ckonosecond_per_bkonosecond_per_akonosecond: None,
    };
    let client_info = ClientInfoMetrics {
        app_build: "test_build".into(),
        app_display_version: "test_version".into(),
        app_channel: "test_channel".into(),
        os: "test_os".into(),
        os_version: "test_os_version".into(),
        architecture: "test_arch".into(),
    };

    initialize(cfg.clone(), client_info.clone());
    destroy_glean(false);
    test_reset_glean(cfg, client_info, false);
    join_init();
}