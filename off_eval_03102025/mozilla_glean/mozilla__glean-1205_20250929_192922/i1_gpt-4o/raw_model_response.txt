<Filename>glean-core/src/lib.rs</Filename>

<imports>
use super::glean_initialize_for_subprocess;
use std::ptr;
use std::ffi::CString;
</imports>

<Rust>
#[test]
fn test_glean_initialize_for_subprocess_upload_disabled() {
    let config = FfiConfiguration {
        data_path: CString::new("/tmp").unwrap().into_raw(),
        application_id: CString::new("test_app").unwrap().into_raw(),
        upload_enabled: false,
    };

    let result = unsafe { glean_initialize_for_subprocess(&config) };
    assert_eq!(result, 1);
}
</Rust>