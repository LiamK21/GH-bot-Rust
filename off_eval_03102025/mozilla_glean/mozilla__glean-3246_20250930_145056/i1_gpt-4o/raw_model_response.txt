<Filename>glean-core/src/histogram/mod.rs</Filename>
<imports>
use super::Histogram;
use super::Bucketing;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_snapshot_values_no_infill_zero_buckets() {
    struct MockBucketing;
    impl Bucketing for MockBucketing {
        fn ranges(&self) -> Vec<u64> {
            vec![0, 1, 2, 3, 4, 5]
        }
        fn bucket(&self, _value: u64) -> usize {
            0
        }
    }

    let bucketing = MockBucketing;
    let mut histogram = Histogram {
        values: HashMap::new(),
        bucketing,
    };

    histogram.values.insert(1, 10);
    histogram.values.insert(3, 5);

    let expected: HashMap<u64, u64> = [(1, 10), (3, 5)].iter().cloned().collect();
    let actual = histogram.snapshot_values();

    assert_eq!(expected, actual);
}
</Rust>