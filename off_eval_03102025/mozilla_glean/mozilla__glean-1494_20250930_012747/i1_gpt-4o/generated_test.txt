#[test]
fn test_set_upload_enabled() {
    let initial_state = global_state().lock().unwrap().upload_enabled;
    set_upload_enabled(!initial_state);
    let new_state = global_state().lock().unwrap().upload_enabled;
    assert_ne!(initial_state, new_state);
}