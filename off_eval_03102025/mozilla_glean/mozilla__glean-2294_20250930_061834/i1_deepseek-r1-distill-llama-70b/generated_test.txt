#[test]
fn test_reset_glean_clears_stores() {
    let _lock = lock_test();
    let dir = tempdir().unwrap();
    let tmpname = dir.path().to_path_buf();

    test_reset_glean(
        Configuration {
            data_path: tmpname,
            application_id: GLOBAL_APPLICATION_ID.into(),
            upload_enabled: true,
            max_events: None,
            delay_ping_lifetime_io: false,
            server_endpoint: Some("invalid-test-host".into()),
            uploader: None,
            use_core_mps: false,
        },
        ClientInfoMetrics::new("test-client"),
        true,
    );

    assert!(!tmpname.exists(), "Data directory still exists after reset");
}