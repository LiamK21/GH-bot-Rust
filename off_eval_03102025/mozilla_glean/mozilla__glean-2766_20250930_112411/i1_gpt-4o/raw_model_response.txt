<Filename>glean-core/src/metrics/mod.rs</Filename>

<imports>
use super::MetricType;
use crate::error_recording;
use crate::ErrorType;
use crate::metrics::CounterMetric;
use crate::Glean;
</imports>

<Rust>
#[test]
fn test_record_error() {
    let glean = Glean::new("test_app_id", "test_app_version", "test_channel", None, None).unwrap();
    let counter_metric = CounterMetric::new("test_category", "test_name", "test_send_in_pings", None, None);
    let error_type = ErrorType::InvalidValue;
    let count = -1;

    counter_metric.record_error(error_type, count);

    let recorded_errors = error_recording::get_recorded_errors(&glean);
    assert!(recorded_errors.contains(&(counter_metric.meta().clone(), error_type, "external error".to_string(), count)));
}
</Rust>