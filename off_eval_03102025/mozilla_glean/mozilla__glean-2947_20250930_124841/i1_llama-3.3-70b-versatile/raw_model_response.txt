<Filename> glean_core/build/src/lib.rs </Filename>
<imports> 
use glean_parser::rust;
use glean_parser::parser;
</imports>
<Rust>
#[test]
fn test_glean_parser_composes_valid_event() {
  let yaml = "
autotrack.fafo:

  # Name 
  event:
    # Metric Parameters
    type: \"event\"
    description: >
      Look, they did a thing!
    metadata:
      tags:
        - \"test\"
    expires: \"never\"
    # supposedly optional values:
    bugs:
      - \"https://example.com/bugs/\"
    data_reviews:
      - \"https://example.com/reviews/\"
    notification_emails:
      - \"alert+ignore@example.com\"
";
  let definition = parser::parse_metric_definitions(yaml).unwrap();
  let generated_code = rust::generate_code(&definition).unwrap();
  assert!(generated_code.contains("NoExtraKeys"));
}</Rust>