#[test]
fn test_metrics_disabled_config() {
    let (glean, _t) = new_glean(None);

    // Test setting an empty config
    let empty_config = json!({}).to_string();
    glean.set_metrics_disabled_config(
        MetricsDisabledConfig::try_from(empty_config).unwrap(),
    );

    // Test setting a config with disabled metrics
    let metrics_disabled_config = json!({
        "category.string_metric": true,
        "category.labeled_string_metric": true,
    })
    .to_string();
    glean.set_metrics_disabled_config(
        MetricsDisabledConfig::try_from(metrics_disabled_config).unwrap(),
    );

    // Test setting a config with some metrics enabled
    let metrics_disabled_config = json!({
        "category.string_metric": false,
        "category.labeled_string_metric": false,
    })
    .to_string();
    glean.set_metrics_disabled_config(
        MetricsDisabledConfig::try_from(metrics_disabled_config).unwrap(),
    );
}