#[test]
fn test_glean_flush_rlb_dispatcher() {
    static INIT: Once = Once::new();
    static WAS_CALLED: AtomicBool = AtomicBool::new(false);

    // Mock the rlb_flush_dispatcher function
    #[no_mangle]
    pub extern "C" fn rlb_flush_dispatcher() {
        WAS_CALLED.store(true, Ordering::SeqCst);
    }

    // Ensure the mock is only set up once
    INIT.call_once(|| {
        unsafe {
            rlb_flush_dispatcher();
        }
    });

    // Call the function under test
    glean_flush_rlb_dispatcher();

    // Check if the mock function was called
    assert!(WAS_CALLED.load(Ordering::SeqCst));
}