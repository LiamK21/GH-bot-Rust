#[test]
fn test_global_state_initialized() {
    let client_info = ClientInfoMetrics {
        app_build: "test-build".to_string(),
        app_display_version: "1.0.0".to_string(),
        architecture: "x86_64".to_string(),
        os_version: "Linux".to_string(),
        channel: Some("test-channel".to_string()),
        android_sdk_version: None,
        device_manufacturer: None,
        device_model: None,
        locale: None,
    };

    let callbacks = Box::new(());
    glean_initialize(
        InternalConfiguration::default(),
        client_info,
        callbacks,
    );

    let state = global_state().lock().unwrap();

    assert_eq!(state.client_info.app_build, "test-build");
    assert_eq!(state.client_info.app_display_version, "1.0.0");
    assert_eq!(state.client_info.architecture, "x86_64");
    assert_eq!(state.client_info.os_version, "Linux");
}