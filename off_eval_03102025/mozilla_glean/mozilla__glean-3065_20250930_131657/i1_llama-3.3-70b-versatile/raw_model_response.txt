<Filename> glean-core/build/src/lib.rs </Filename>
<imports> 
use glean_core::build::Builder;
use glean_core::error::Error;
use std::env;
</imports>
<Rust>
#[test]
fn test_ohttp_ping_submission() {
  // Setup environment to simulate non-Desktop
  env::set_var("GLEAN_UPLOAD_VIA", "ohttp");
  env::set_var("GLEAN_UPLOADER_TYPE", "non-desktop");
  
  let builder = Builder {};
  
  // Define expected error
  let expected_error = Error::UnsupportedUploader;
  
  // Attempt to submit ping
  let actual_error = builder.submit_ping();
  
  // Compare expected with actual
  assert_eq!(actual_error, expected_error);
}</Rust>