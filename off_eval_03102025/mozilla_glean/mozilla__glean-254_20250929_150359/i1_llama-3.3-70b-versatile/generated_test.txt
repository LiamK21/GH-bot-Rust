#[test]
fn test_experiments_api_limits_violations() {
  let glean = Glean::new();
  let experiment_id = "a".repeat(31);
  let branch = "b".repeat(31);
  let extra = HashMap::from([("c".repeat(31), "d".repeat(100))]);
  let metric = ExperimentMetric::new(&glean, experiment_id);
  metric.set_active(&glean, branch, Some(extra));
  // Assert that error is recorded
  // Since the actual assertion logic may vary based on the error recording mechanism,
  // the following line is just an example and may need to be adjusted.
  assert!(record_error.called_with(glean, metric.meta, ErrorType::InvalidValue));
}