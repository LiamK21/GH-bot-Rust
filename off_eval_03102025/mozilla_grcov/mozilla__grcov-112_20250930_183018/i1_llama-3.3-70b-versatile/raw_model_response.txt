<Filename> src/output.rs </Filename>
<imports> 
use super::output_activedata_etl;
use std::io::Write;
use serde_json::json;
use serde_json::Value;
</imports>
<Rust>
#[test]
fn test_output_activedata_etl_format() {
  let mut results = Vec::new();
  let covered: Vec<u32> = vec![1, 2, 3];
  results.push((covered.clone(), covered.clone()));
  let output: Vec<u8> = Vec::new();
  let mut writer = std::io::BufWriter::new(output);
  output_activedata_etl(results.into_iter());
  let expected = json!({
    "is_file": true,
    "file": {
      "name": "",
      "covered": [1, 2, 3],
      "uncovered": [],
      "total_covered": 3,
      "total_uncovered": 0,
      "percentage_covered": 1.0
    },
    "method": {
      "covered": [1, 2, 3],
      "uncovered": [],
      "total_covered": 3,
      "total_uncovered": 0
    }
  });
  let actual = writer.into_inner().unwrap();
  let actual_str = std::str::from_utf8(&actual).unwrap();
  let actual: Value = serde_json::from_str(actual_str).unwrap();
  assert!(actual["file"]["covered"] == expected["file"]["covered"]);
}</Rust>