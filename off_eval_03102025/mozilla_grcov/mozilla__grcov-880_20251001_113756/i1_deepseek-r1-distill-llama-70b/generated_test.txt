#[test]
fn test_cobertura_output_version() {
    let mut buffer = Vec::new();
    let mut writer = Writer::new_with_indent(Cursor::new(buffer), b' ', 4);

    let test_results = CovResult::default();
    output_cobertura(None, std::iter::once(("", test_results)).into_iter(), None, false).unwrap();

    let xml = writer.into_inner().into_inner();

    let mut parser = quick_xml::Reader::from_slice(&xml);
    let mut buf = Vec::new();

    loop {
        match parser.read_event_into(&mut buf) {
            Ok(Event::Start(ref e)) => {
                if e.local_name().into_inner() == b"coverage" {
                    let version_attr = e.attribute(b"version").unwrap();
                    let version = String::from_utf8(version_attr.escaped().to_vec()).unwrap();
                    assert_eq!(&version, "1.0");
                }
            },
            Ok(Event::End(_)) => break,
            Err(_) => break,
        }
    }
}