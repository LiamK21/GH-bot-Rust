<Filename>src/cobertura.rs</Filename>
<imports>
use super::get_coverage;
use std::collections::BTreeMap;
use crate::demangle::DemangleOptions;
use crate::covresultiter::CovResultIter;
use crate::coverage::Coverage;
</imports>
<Rust>
#[test]
fn test_class_level_line_coverage() {
    let results = CovResultIter::new(vec![
        (
            "file1.rs".to_string(),
            "file1.rs".into(),
            BTreeMap::from([
                (1, (1, 0)),
                (2, (1, 0)),
                (3, (1, 0)),
                (4, (1, 0)),
            ]),
        ),
    ]);
    let sources = vec!["src".to_string()];
    let demangle = false;
    let demangle_options = DemangleOptions::default();

    let expected_coverage = Coverage {
        files: vec![(
            "file1.rs".to_string(),
            vec![
                (1, 1),
                (2, 1),
                (3, 1),
                (4, 1),
            ],
        )],
    };

    let actual_coverage = get_coverage(results, sources, demangle, demangle_options);

    assert_eq!(expected_coverage, actual_coverage);
}
</Rust>