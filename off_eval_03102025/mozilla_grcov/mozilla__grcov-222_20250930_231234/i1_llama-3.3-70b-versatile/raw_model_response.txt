<Filename> src/main.rs </Filename>
<imports>
use std::process;
use std::thread;
</imports>
<Rust>
#[test]
fn test_non_zero_exit_on_thread_failure() {
  let handler = thread::spawn(move || {
    panic!("Test panic");
  });
  let result = handler.join();
  assert!(result.is_err());
  process::exit(1);
}</Rust>