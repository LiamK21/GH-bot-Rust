#[test]
fn test_output_path_is_directory() {
    let opt = Opt {
        output_path: Some(Path::new("/path/to/directory").to_path_buf()),
        // other fields as necessary
    };
    let output_types = vec!["type1", "type2"];

    let expected = Some(Path::new("/path/to/directory"));
    let actual = match output_types.len() {
        0 => None,
        1 => opt.output_path.as_deref(),
        _ => match opt.output_path.as_deref() {
            Some(output_path) => {
                if output_path.is_dir() {
                    Some(output_path)
                } else {
                    panic!("output_path must be a directory when using multiple outputs");
                }
            }
            _ => None,
        },
    };

    assert_eq!(expected, actual);
}