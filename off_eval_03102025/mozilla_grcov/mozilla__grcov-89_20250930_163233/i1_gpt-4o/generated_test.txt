#[test]
fn test_exclude_directories_with_wildcards() {
    let mut result_map: HashMap<String, serde_json::Value> = HashMap::new();
    result_map.insert("vs2017_15.6.6/prova.h".to_string(), json!({}));
    result_map.insert("vs2017_15.7.1/prova.h".to_string(), json!({}));
    result_map.insert("main.cpp".to_string(), json!({}));

    let results: Vec<_> = rewrite_paths(result_map, None, "", "", false, false, vec!["vs2017_*".to_string()]).collect();

    let expected: Vec<String> = vec!["main.cpp".to_string()];
    let actual: Vec<String> = results.into_iter().map(|(_, rel_path, _)| rel_path).collect();

    assert_eq!(expected, actual);
}