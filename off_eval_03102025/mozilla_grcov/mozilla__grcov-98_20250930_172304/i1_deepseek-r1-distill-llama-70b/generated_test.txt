#[test]
fn test_zip_producer_ignores_orphan_gcno() {
    let queue: Arc<WorkQueue> = Arc::new(MsQueue::new());

    let tmp_dir = TempDir::new("grcov").expect("Failed to create temporary directory");
    let tmp_path = tmp_dir.path().to_owned();

    // Create a test zip file containing a gcno without a gcda
    let mut zip_file = zip::write::ZipWriter::new(std::fs::File::create(&tmp_path.join("test.zip")).unwrap());
    zip_file.write("test(gcno)", "content".as_bytes()).unwrap();

    let mapping = zip_producer(&tmp_path, &vec![&"test.zip".to_string()], &queue, true);

    // Since ignore_orphan_gcno is true, no items should be produced
    let expected = vec![];

    // Verify that the queue is empty
    assert_eq!(queue.size(), 0);

    // Check that the mapping is None as no valid files were processed
    assert!(mapping.is_none());
}