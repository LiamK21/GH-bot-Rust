#[test]
fn test_socket_send_with_reference() {
    let local_addr = SocketAddr::new(Ipv4Addr::LOCALHOST.into(), 0);
    let remote_addr = SocketAddr::new(Ipv4Addr::LOCALHOST.into(), 12345);
    let socket = Socket::bind(local_addr).expect("Failed to bind socket");

    let data = vec![1, 2, 3, 4];
    let dgram = Datagram::new(local_addr, remote_addr, data.clone());

    let result = socket.send(&dgram);
    assert!(result.is_ok());
}