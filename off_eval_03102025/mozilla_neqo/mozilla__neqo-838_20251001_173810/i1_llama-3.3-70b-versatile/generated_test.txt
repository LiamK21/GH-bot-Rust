#[test]
fn test_pto_timer_after_confirmed() {
  let mut lr = LossRecovery::new();
  let now = Instant::now();
  lr.on_packet_sent(SentPacket::new(
    PacketType::Handshake,
    0,
    now,
    true,
    std::rc::Rc::default(),
    100,
  ));
  lr.on_packet_sent(SentPacket::new(
    PacketType::Short,
    0,
    now,
    true,
    std::rc::Rc::default(),
    100,
  ));
  let expected_pto = now + Duration::from_millis(100) + Duration::from_millis(25);
  lr.discard(PNSpace::Handshake, expected_pto);
  let profile = lr.send_profile(expected_pto, 10000);
  assert!(profile.probe[PNSpace::ApplicationData]);
}