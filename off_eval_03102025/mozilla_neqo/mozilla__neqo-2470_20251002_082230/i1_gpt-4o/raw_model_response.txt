<Filename>neqo-bin/src/udp.rs</Filename>
<imports>
use super::Socket;
use std::net::ToSocketAddrs;
use std::net::UdpSocket;
</imports>
<Rust>
#[test]
fn test_socket_buffer_size_increase() {
    let addr = "127.0.0.1:0";
    let socket = Socket::bind(addr).expect("Failed to bind socket");

    let udp_socket = UdpSocket::bind(addr).expect("Failed to bind UDP socket");
    let state = quinn_udp::UdpSocketState::new((&udp_socket).into()).expect("Failed to create UdpSocketState");

    let send_buf_size = state.send_buffer_size((&udp_socket).into()).expect("Failed to get send buffer size");
    let recv_buf_size = state.recv_buffer_size((&udp_socket).into()).expect("Failed to get receive buffer size");

    const ONE_MB: usize = 1 << 20;
    assert!(recv_buf_size >= ONE_MB, "Receive buffer size did not increase as expected");
}
</Rust>