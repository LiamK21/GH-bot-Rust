#[test]
fn test_take_ranges_optimization() {
  let mut packets: BTreeMap<u32, ()> = BTreeMap::from_iter((1..101).map(|x| (x, ())));
  let mut sent_packets = SentPackets { packets };
  let acked_ranges = vec![(1, 2), (5, 6)];
  let result = sent_packets.take_ranges(acked_ranges);
  assert_eq!(result.len(), 4);
}