#[test]
fn test_pseudo_header_tracking() {
    // Test case 1: Valid request headers
    let headers = vec![
        Header(":method".into(), "GET".into()),
        Header(":scheme".into(), "http".into()),
        Header(":path".into(), "/".into()),
        Header("accept".into(), "*/*".into()),
    ];
    let result = headers_valid(&headers, MessageType::Request);
    assert!(result.is_ok());

    // Test case 2: Missing required pseudo headers for request
    let headers = vec![
        Header(":method".into(), "GET".into()),
        Header(":scheme".into(), "http".into()),
        Header("accept".into(), "*/*".into()),
    ];
    let result = headers_valid(&headers, MessageType::Request);
    assert!(result.is_err());

    // Test case 3: Invalid pseudo header for response
    let headers = vec![
        Header(":status".into(), "200".into()),
        Header("content-type".into(), "text/plain".into()),
    ];
    let result = headers_valid(&headers, MessageType::Response);
    assert!(result.is_ok());

    // Test case 4: Duplicate pseudo header
    let headers = vec![
        Header(":method".into(), "GET".into()),
        Header(":method".into(), "POST".into()),
        Header(":scheme".into(), "http".into()),
        Header(":path".into(), "/".into()),
    ];
    let result = headers_valid(&headers, MessageType::Request);
    assert!(result.is_err());

    // Test case 5: Regular header mixed with pseudo
    let headers = vec![
        Header(":method".into(), "GET".into()),
        Header(":scheme".into(), "http".into()),
        Header("user-agent".into(), "Test".into()),
        Header(":path".into(), "/".into()),
    ];
    let result = headers_valid(&headers, MessageType::Request);
    assert!(result.is_ok());

    // Test case 6: Invalid message type for pseudo header
    let headers = vec![Header(":status".into(), "200".into())];
    let result = headers_valid(&headers, MessageType::Request);
    assert!(result.is_err());
}