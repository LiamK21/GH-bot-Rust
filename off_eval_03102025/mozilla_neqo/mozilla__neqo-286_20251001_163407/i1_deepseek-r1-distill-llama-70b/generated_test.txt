#[test]
fn test_frame_truncate() {
    let data = vec![0xff; 100];
    let remaining = 64;
    let stream_id = 1;
    let offset = 0;
    let fin = false;

    let (mut frame, length) = Frame::new_stream(stream_id, offset, &data, fin, remaining);

    // Ensure that the frame uses all available space
    assert_eq!(length, remaining);
    // Verify that the fill flag is set correctly
    if let Frame::Stream { fill, .. } = frame {
        assert!(fill);
    } else {
        panic!("Expected Stream frame");
    }
}