#[test]
fn test_update_rtt_with_checked_duration_since() {
    let mut loss_recovery = LossRecovery {
        confirmed_time: Some(SystemTime::now() - Duration::from_secs(10)),
        qlog: Default::default(),
    };
    let send_time = SystemTime::now() + Duration::from_secs(5);
    let now = SystemTime::now();
    let ack_delay = Duration::from_millis(25);
    let mut rtt = Rtt::default();

    loss_recovery.update_rtt(now, send_time, &mut rtt, ack_delay);

    // Since send_time is in the future, the RTT should not be updated.
    assert_eq!(rtt.latest_rtt, None);
}