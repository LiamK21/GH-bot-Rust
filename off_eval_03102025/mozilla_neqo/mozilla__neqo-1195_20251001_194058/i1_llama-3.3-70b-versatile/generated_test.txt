#[test]
fn test_stream_removal_on_fin() {
  let mut handler = Handler { streams: HashMap::new(), url_queue: Vec::new() };
  let mut client = Http3Client::new();
  let stream_id = 1;
  handler.streams.insert(stream_id, None);
  let event = Http3ClientEvent::HeaderReady { stream_id, headers: Vec::new(), fin: true };
  let result = handler.on_stream_fin(&mut client, stream_id);
  assert!(result);
  assert!(handler.streams.is_empty());
}