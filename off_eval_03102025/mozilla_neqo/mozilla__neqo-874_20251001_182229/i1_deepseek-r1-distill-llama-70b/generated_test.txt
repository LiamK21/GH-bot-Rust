#[test]
fn test_send_streams_iteration_order() {
    let mut streams = SendStreams::default();

    // Create and add send streams in order 0, 1, 2, 3
    let s0 = SendStream::new(StreamId(0));
    let s1 = SendStream::new(StreamId(1));
    let s2 = SendStream::new(StreamId(2));
    let s3 = SendStream::new(StreamId(3));

    streams.0.insert(s0.id, s0);
    streams.0.insert(s1.id, s1);
    streams.0.insert(s2.id, s2);
    streams.0.insert(s3.id, s3);

    // Collect the order of stream IDs during iteration
    let mut expected_order = vec![StreamId(0), StreamId(1), StreamId(2), StreamId(3)];
    let mut actual_order = Vec::new();

    for (id, _stream) in streams.0.iter() {
        actual_order.push(*id);
    }

    assert_eq!(expected_order, actual_order);
}