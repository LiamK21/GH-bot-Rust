<Filename> neqo-server/src/main.rs </Filename>
<imports> 
use neqo_server::ServersRunner;
use std::time::Duration;
use std::time::Instant;
use std::net::UdpSocket;
use std::io;
</imports>
<Rust>
#[test]
fn test_server_connection_close() {
  let args = Args {
    use_old_http: true,
    key: "test_key".to_string(),
    alpn: "test_alpn".to_string(),
    hosts: vec!["127.0.0.1:4433".to_string()],
    ..Default::default()
  };
  let mut servers_runner = ServersRunner::new(args).unwrap();
  let socket = UdpSocket::bind("127.0.0.1:0").unwrap();
  let mut buf = [0; 1024];
  let result = socket.recv_from(&mut buf);
  assert!(result.is_err() || result.unwrap().0 == 0);
  servers_runner.init().unwrap();
  let result = servers_runner.process_datagrams_and_events(0, true);
  assert!(result.is_ok());
}
</Rust>