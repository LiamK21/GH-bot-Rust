#[test]
fn test_transport_parameters_initialized_correctly() {
    let mut conn_params = ConnectionParameters::default();
    let mut cid_manager = ConnectionIdManager::new(&mut rand::thread_rng(), vec![1; 8]);
    let tps = conn_params.create_transport_parameter(Role::Server, &mut cid_manager).unwrap();

    // Check default parameters
    let max_data = tps.local.get_integer(tparams::INITIAL_MAX_DATA).unwrap();
    let max_stream_data_bidi_remote = tps.local.get_integer(tparams::INITIAL_MAX_STREAM_DATA_BIDI_REMOTE).unwrap();
    let idle_timeout = tps.local.get_integer(tparams::IDLE_TIMEOUT).unwrap();
    let active_cid_limit = tps.local.get_integer(tparams::ACTIVE_CONNECTION_ID_LIMIT).unwrap();

    // Verify expected values
    let expected_max_data = 0x3FFF_FFFF_FFFF_FFFF;
    let expected_max_stream_data_bidi_remote = 65536; // RECV_BUFFER_SIZE
    let expected_idle_timeout = 30000; // LOCAL_IDLE_TIMEOUT.as_millis()
    let expected_active_cid_limit = 1000; // LOCAL_ACTIVE_CID_LIMIT

    assert_eq!(max_data, expected_max_data);
    assert_eq!(max_stream_data_bidi_remote, expected_max_stream_data_bidi_remote);
    assert_eq!(idle_timeout, expected_idle_timeout);
    assert_eq!(active_cid_limit, expected_active_cid_limit);
}