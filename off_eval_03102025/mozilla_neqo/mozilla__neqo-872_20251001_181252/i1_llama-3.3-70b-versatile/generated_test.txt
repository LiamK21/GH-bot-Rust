#[test]
fn test_send_blocked_if_space_needed() {
  let mut s = SendStream::new(1, 100);
  let mut flow_mgr = FlowManager::new();
  s.flow_mgr = Some(&mut flow_mgr);
  s.max_stream_data = 100;
  s.mark_as_sent(0, 100, false);
  let expected = Frame::StreamDataBlocked { stream_id: 1, data_limit: 100 };
  let actual = flow_mgr.next().unwrap();
  assert_eq!(expected, actual);
}