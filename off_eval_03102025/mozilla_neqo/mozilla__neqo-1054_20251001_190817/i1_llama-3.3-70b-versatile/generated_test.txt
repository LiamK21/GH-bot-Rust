#[test]
fn test_connection_close_with_long_reason_string() {
  let mut connection = Connection::new(RefCell::new(vec![]));
  let long_reason = vec![0x61; 2049];
  let error_code = Error::HttpGeneralProtocol.code();
  let now = Instant::now();
  let result = std::panic::catch_unwind(|| connection.close(now, error_code, long_reason));
  assert!(result.is_err());
}