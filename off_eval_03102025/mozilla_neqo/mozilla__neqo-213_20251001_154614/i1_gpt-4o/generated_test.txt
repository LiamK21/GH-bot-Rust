#[test]
fn test_connection_event_ordering() {
    let mut conn = Http3Connection::new();
    conn.state = Http3State::Connected;

    let stream_id = 1;
    conn.check_connection_events().unwrap();
    conn.handle_new_stream(stream_id, StreamType::BiDi).unwrap();
    conn.handle_send_stream_writable(stream_id).unwrap();
    conn.handle_stream_readable(stream_id).unwrap();
    conn.handle_stream_reset(stream_id, 0).unwrap();
    conn.handle_stream_stop_sending(stream_id, 0).unwrap();
    conn.handle_stream_complete(stream_id).unwrap();
    conn.handle_stream_creatable(StreamType::BiDi).unwrap();

    assert!(conn.streams_are_readable.contains(&stream_id));
}