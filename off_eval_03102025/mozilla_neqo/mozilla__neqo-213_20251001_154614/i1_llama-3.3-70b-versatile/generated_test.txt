#[test]
fn test_connection_events_state_active() {
  let mut conn = Http3Connection::new(Role::Server);
  conn.state = Http3State::Connected;
  let result1 = conn.handle_new_stream(1, StreamType::BiDi);
  assert!(result1.is_ok());

  conn.state = Http3State::GoingAway;
  let result2 = conn.handle_send_stream_writable(2);
  assert!(result2.is_ok());

  conn.state = Http3State::Closed;
  let result3 = conn.handle_new_stream(3, StreamType::BiDi);
  assert!(result3.is_ok());
}