<Filename>neqo-transport/src/connection.rs</Filename>
<imports>
use super::Connection;
use crate::path::PATH_MTU_V6;
use crate::recovery::PTO_PACKET_COUNT;
use crate::frame::Frame;
use crate::packet::PNSpace;
use crate::Output;
use test_fixture::now;
use test_fixture::loopback;
use test_fixture::default_client;
use test_fixture::default_server;
use test_fixture::connect;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_callback_time_after_pto() {
    let mut client = default_client();
    let mut server = default_server();
    connect(&mut client, &mut server);

    let mut now = now();

    // Simulate sending a packet and entering PTO
    let _ = client.process(None, now);

    // Advance time to trigger PTO
    now += Duration::from_secs(1);
    let out = client.process(None, now);
    assert!(matches!(out, Output::Callback(_)));

    // Simulate receiving a packet after PTO
    let dgram = loopback(&mut server, &mut client, now);
    let ack = client.process(Some(dgram), now).dgram();
    assert!(ack.is_some());

    // Ensure the client sends only an ACK frame
    let frames = server.test_process_input(ack.unwrap(), now);
    assert_eq!(frames.len(), 1);
    for (frame, space) in frames {
        assert_eq!(space, PNSpace::ApplicationData);
        assert!(matches!(frame, Frame::Ack { .. }));
    }
}
</Rust>