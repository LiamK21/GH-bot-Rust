#[test]
fn test_client_close_state_transition() {
    let args = Args::default();
    let local_addr: SocketAddr = "127.0.0.1:0".parse().unwrap();
    let remote_addr: SocketAddr = "127.0.0.1:4433".parse().unwrap();
    let hostname = "localhost";
    let resumption_token = None;

    let mut client = create_client(&args, local_addr, remote_addr, hostname, resumption_token).unwrap();

    // Simulate the client reaching a closed state
    client.close(Instant::now(), 0, "kthxbye!");

    let expected = CloseState::Closed;
    let actual = client.is_closed().unwrap();

    assert_eq!(expected, actual);
}