<Filename> neqo-transport/src/packet/mod.rs </Filename>
<imports> 
use neqo_transport::packet::PacketBuilder;
use neqo_transport::packet::Encoder;
use neqo_transport::crypto::CryptoDxState;
use neqo_transport::connection::PNSpace;
use neqo_transport::connection::ConnectionId;
use neqo_transport::version::QuicVersion;
use neqo_transport::version::QuicVersion::default;
</imports>
<Rust>
#[test]
fn test_packet_build_insufficient_space() {
    let mut builder = PacketBuilder::short(Encoder::with_capacity(100), true, &ConnectionId::from(&[0u8; 8]));
    builder.pn(0, 1);
    builder.set_limit(75);
    builder.pad();
    let encoder = builder.build(&mut CryptoDxState::test_default()).unwrap();
    let mut builder = PacketBuilder::long(encoder, PNSpace::Initial, QuicVersion::default(), &ConnectionId::from(&[0u8; 8]), &ConnectionId::from(&[0u8; 8]));
    assert_eq!(builder.remaining(), 0);
    let encoder_copy = builder.abort();
    assert_eq!(encoder_copy.len(), 100);
}</Rust>