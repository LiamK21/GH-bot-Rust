#[test]
fn test_exclude_wildcard_directories() {
    let mut result_map = HashMap::new();
    result_map.insert("vs2017_1/file1.cpp".to_string(), empty_result!());
    result_map.insert("vs2017_2/file2.cpp".to_string(), empty_result!());
    result_map.insert("otherdir/file3.cpp".to_string(), empty_result!());

    let to_ignore_dirs = vec!["vs2017_*".to_string()];
    let results = rewrite_paths(
        result_map,
        None,
        "",
        "",
        false,
        false,
        to_ignore_dirs,
    );

    let mut count = 0;
    for (_abs_path, _rel_path, _result) in results {
        count += 1;
    }

    assert_eq!(count, 1); // Only "otherdir/file3.cpp" should remain
}