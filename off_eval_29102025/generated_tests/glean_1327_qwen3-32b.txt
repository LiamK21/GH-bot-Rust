#[test]
fn test_invalid_labels_recorded_under_other() {
    let _lock = crate::common_test::lock_test();
    let _t = crate::common_test::new_glean(None, true);

    let metric: LabeledMetric<CounterMetric> = LabeledMetric::new(
        CommonMetricData {
            name: "label_test".into(),
            category: "test".into(),
            send_in_pings: vec!["default".into()],
            ..Default::default()
        },
        Some(vec!["valid".into()]),
    );

    metric.get("invalid-label!").add(1);
    assert_eq!(1, metric.get("__other__").test_get_value(None).unwrap());
}