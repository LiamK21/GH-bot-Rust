#[test]
fn test_rewrite_paths_filter_option() {
    let mut result_map: CovResultMap = HashMap::new();
    result_map.insert("covered.cpp".to_string(), CovResult {
        lines: [(42, 1)].iter().cloned().collect(),
        branches: BTreeMap::new(),
        functions: HashMap::new(),
    });
    result_map.insert("uncovered.cpp".to_string(), CovResult {
        lines: [(42, 0)].iter().cloned().collect(),
        branches: BTreeMap::new(),
        functions: HashMap::new(),
    });
    let results = rewrite_paths(result_map, None, "", "", false, false, Vec::new(), Some(true));
    let mut count = 0;
    for (abs_path, rel_path, result) in results {
        count += 1;
        assert_eq!(abs_path, PathBuf::from("covered.cpp"));
        assert_eq!(rel_path, PathBuf::from("covered.cpp"));
        assert_eq!(result.lines.get(&42), Some(&1));
    }
    assert_eq!(count, 1);
}