#[test]
fn test_parser_jacoco_kotlin_duplicate() {
    let xml_data = r#"
<report>
  <package name="/">
    <class name="com/example/BreakpointValue" sourcefilename="BreakpointValue.kt">
      <methods>
        <method name="BreakpointValue#<init>" start="5"/>
        <method name="BreakpointValue#setValue" start="26"/>
        <method name="BreakpointValue#getBreakpointValueMap" start="14"/>
      </methods>
      <lines>
        <line nr="5" hit="0"/>
        <line nr="14" hit="0"/>
        <line nr="26" hit="0"/>
      </lines>
    </class>
    <class name="com/example/BreakpointDirection" sourcefilename="BreakpointValue.kt">
      <methods>
        <method name="BreakpointDirection#getEntries" start="120"/>
      </methods>
      <lines>
        <line nr="118" hit="0"/>
        <line nr="120" hit="0"/>
      </lines>
    </class>
  </package>
</report>
"#;

    let mut reader = Cursor::new(xml_data.as_bytes());
    let file = BufReader::new(&mut reader);

    let mut lines: BTreeMap<u32, u64> = BTreeMap::new();
    lines.insert(5, 0);
    lines.insert(14, 0);
    lines.insert(26, 0);
    lines.insert(118, 0);
    lines.insert(120, 0);

    let mut functions: FxHashMap<String, Function> = FxHashMap::default();
    functions.insert("BreakpointValue#<init>".to_string(), Function { start: 5, executed: false });
    functions.insert("BreakpointValue#setValue".to_string(), Function { start: 26, executed: false });
    functions.insert("BreakpointValue#getBreakpointValueMap".to_string(), Function { start: 14, executed: false });
    functions.insert("BreakpointDirection#getEntries".to_string(), Function { start: 120, executed: false });

    let branches: BTreeMap<u32, Vec<bool>> = BTreeMap::new();

    let expected = vec![(
        String::from("BreakpointValue.kt"),
        CovResult {
            lines,
            branches,
            functions,
        },
    )];

    let results = super::parse_jacoco_xml_report(file).unwrap();
    assert_eq!(results, expected);
}