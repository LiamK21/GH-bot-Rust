#[test]
fn test_wildcard_directory_exclusion() {
    let mut result_map: CovResultMap = HashMap::new();
    result_map.insert("vs2017_15.6.6/file.h".to_string(), empty_result!());
    result_map.insert("vs2017_123/another.cpp".to_string(), empty_result!());
    result_map.insert("mycode/main.rs".to_string(), empty_result!());

    let results = rewrite_paths(result_map, None, "", "", false, false, vec!["vs2017_*".to_string()]);

    let expected_included = "mycode/main.rs";
    let mut count = 0;
    let mut included_path = String::new();
    for (abs_path, rel_path, _) in results {
        count += 1;
        included_path = rel_path.display().to_string();
    }
    assert_eq!(count, 1);
    assert_eq!(included_path, expected_included);
}