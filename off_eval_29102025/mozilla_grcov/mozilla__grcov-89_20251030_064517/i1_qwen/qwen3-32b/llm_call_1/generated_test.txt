#[test]
fn test_wildcard_directory_exclusion() {
    let mut result_map: CovResultMap = HashMap::new();
    result_map.insert("vs2017_15.6.6/file.h".to_string(), empty_result!());
    result_map.insert("vs2017_123/another.cpp".to_string(), empty_result!());
    result_map.insert("mycode/main.rs".to_string(), empty_result!());

    let results = rewrite_paths(result_map, None, "", "", false, false, vec!["vs2017_*".to_string()]);

    let mut count = 0;
    let mut included = String::new();
    for (abs_path, rel_path, _) in results {
        count += 1;
        included = rel_path;
    }
    assert_eq!(count, 1);
    assert_eq!(included, "mycode/main.rs");
}