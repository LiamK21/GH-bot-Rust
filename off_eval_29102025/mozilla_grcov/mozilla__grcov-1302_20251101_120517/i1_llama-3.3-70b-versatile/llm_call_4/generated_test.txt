#[test]
fn test_absolute_html_links() {
  let (sender, receiver) = channel();
  let global = Arc::new(Mutex::new(HtmlGlobalStats { 
    dirs: BTreeMap::new(), 
    stats: HtmlStats::default(), 
    abs_prefix: Some(PathBuf::from("https://example.com")) 
  }));
  let output = Path::new("/tmp/output");
  let conf = Config { 
    date: Some(DateTime::utc(2022, 1, 1, 0, 0, 0)), 
    branch_enabled: false, 
    branch_hi_limit: 0, 
    branch_med_limit: 0, 
    fn_hi_limit: 0, 
    fn_med_limit: 0, 
    line_hi_limit: 0, 
    line_med_limit: 0 
  };
  let abs_link_prefix = Some("https://example.com".to_string());
  consumer_html(&Tera::default(), receiver, global.clone(), output, conf, &abs_link_prefix);
  let job = Some(HtmlItem { 
    abs_path: PathBuf::from("/tmp/output/index.html"), 
    rel_path: PathBuf::from("/tmp/output/index.html"), 
    result: CovResult::default() 
  });
  sender.send(job).unwrap();
  let global = global.lock().unwrap();
  assert!(global.abs_prefix.is_some());
}