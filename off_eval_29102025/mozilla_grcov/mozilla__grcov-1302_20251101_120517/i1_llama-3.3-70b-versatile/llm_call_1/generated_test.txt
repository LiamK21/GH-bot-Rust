#[test]
fn test_absolute_html_links() {
  let (sender, receiver) = mpsc::unbounded();
  let global = Arc::new(Mutex::new(HtmlGlobalStats { dirs: std::collections::BTreeMap::new(), stats: Default::default(), abs_prefix: Some("https://example.com".into()) }));
  let output = Path::new("/tmp/output");
  let conf = Config { branch: false, output_config_file: None, precision: 2, no_date: false };
  let abs_link_prefix = Some("https://example.com".to_string());
  consumer_html(&Default::default(), receiver, global.clone(), output, conf, &abs_link_prefix);
  let job = Some(super::HtmlItem { rel_path: Path::new("/tmp/output/index.html"), stats: Default::default() });
  sender.send(job).unwrap();
  let global = global.lock().unwrap();
  assert!(global.abs_prefix.is_some());
}