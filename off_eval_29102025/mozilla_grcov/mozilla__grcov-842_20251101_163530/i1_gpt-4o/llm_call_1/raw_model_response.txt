<Filename>src/lib.rs</Filename>
<imports>
use super::consumer;
use std::path::Path;
use std::sync::{Arc, Mutex};
use crate::SyncCovResultMap;
use crate::JobReceiver;
use std::collections::HashMap;
use std::sync::mpsc;
</imports>
<Rust>
#[test]
fn test_consumer_panics_on_gcov_error() {
    let working_dir = Path::new(".");
    let source_dir = None;
    let result_map: Arc<SyncCovResultMap> = Arc::new(Mutex::new(HashMap::new()));
    let (sender, receiver) = mpsc::channel();
    let branch_enabled = false;
    let guess_directory = false;
    let binary_path = None;

    sender.send((ItemFormat::Profraw, ItemType::Path(("stem".to_string(), "invalid_path".to_string())))).unwrap();

    let result = std::panic::catch_unwind(|| {
        consumer(
            working_dir,
            source_dir,
            &result_map,
            receiver,
            branch_enabled,
            guess_directory,
            binary_path,
        );
    });

    assert!(result.is_err());
}
</Rust>