<Filename>src/html.rs</Filename>
<imports>
use super::gen_index;
use super::HtmlGlobalStats;
use super::HtmlDirStats;
use super::HtmlFileStats;
use super::HtmlItemStats;
use super::Config;
use std::path::Path;
use tera::Tera;
use std::collections::BTreeMap;
use std::fs;
use super::HtmlResources;
use std::default::Default;
</imports>
<Rust>
#[test]
fn test_gen_index_with_subdirectories() {
  let tera = Tera::default();
  let mut global = HtmlGlobalStats {
    dirs: BTreeMap::new(),
    stats: super::HtmlStats {
      total_lines: 0,
      covered_lines: 0,
      total_funs: 0,
      covered_funs: 0,
      total_branches: 0,
      covered_branches: 0,
    },
    abs_prefix: None,
  };
  let mut dir_stats = HtmlDirStats {
    files: BTreeMap::new(),
    stats: super::HtmlStats {
      total_lines: 0,
      covered_lines: 0,
      total_funs: 0,
      covered_funs: 0,
      total_branches: 0,
      covered_branches: 0,
    },
    abs_prefix: None,
  };
  let file_stats = HtmlFileStats {
    stats: super::HtmlStats {
      total_lines: 10,
      covered_lines: 5,
      total_funs: 2,
      covered_funs: 1,
      total_branches: 3,
      covered_branches: 2,
    },
    abs_prefix: None,
  };
  dir_stats.files.insert("file.rs".to_string(), file_stats);
  global.dirs.insert("src".to_string(), dir_stats);
  let conf = Config {
    hi_limit: 100.0,
    med_limit: 50.0,
    fn_hi_limit: 100.0,
    fn_med_limit: 50.0,
    branch_hi_limit: 100.0,
    branch_med_limit: 50.0,
    branch_enabled: true,
    date: "2022-01-01".to_string(),
    precision: 2,
    html_resources: HtmlResources::default(),
  };
  let output = Path::new("output");
  fs::create_dir_all(output).unwrap();
  super::gen_index(&tera, &global, &conf, output);
  assert!(output.join("index.html").exists());
  assert!(output.join("src").exists());
  assert!(output.join("src/index.html").exists());
}
</Rust>