<Filename>src/html.rs</Filename>
<imports>
use super::gen_index;
use super::HtmlGlobalStats;
use super::HtmlDirStats;
use super::HtmlFileStats;
use super::HtmlItemStats;
use super::Config;
use std::path::Path;
use tera::Tera;
use std::collections::BTreeMap;
</imports>
<Rust>
#[test]
fn test_gen_index_with_subdirectories() {
  let tera = Tera::default();
  let mut global = HtmlGlobalStats {
    dirs: BTreeMap::new(),
    stats: super::HtmlStats {
      total_lines: 0,
      covered_lines: 0,
      total_funs: 0,
      covered_funs: 0,
      total_branches: 0,
      covered_branches: 0,
    },
    abs_prefix: None,
  };
  let mut dir_stats = HtmlDirStats {
    files: BTreeMap::new(),
    stats: super::HtmlStats {
      total_lines: 0,
      covered_lines: 0,
      total_funs: 0,
      covered_funs: 0,
      total_branches: 0,
      covered_branches: 0,
    },
    abs_prefix: None,
  };
  let file_stats = HtmlFileStats {
    stats: super::HtmlStats {
      total_lines: 10,
      covered_lines: 5,
      total_funs: 2,
      covered_funs: 1,
      total_branches: 3,
      covered_branches: 2,
    },
    abs_prefix: None,
  };
  dir_stats.files.insert("file.rs".to_string(), file_stats);
  global.dirs.insert("src".to_string(), dir_stats);
  let conf = Config {
    branch_enabled: false,
    precision: 0,
    no_date: false,
    html_resources: None,
  };
  let output = Path::new("output");
  gen_index(&tera, &global, &conf, output);
  assert!(output.join("index.html").exists());
}
</Rust>