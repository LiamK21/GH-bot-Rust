#[test]
fn test_profraws_to_lcov_handles_long_argument_list() {
    let temp_dir = tempfile::tempdir().unwrap();
    let working_dir = temp_dir.path();
    let binary_path = working_dir.join("binary");
    fs::write(&binary_path, "fake binary content").unwrap();

    let profraw_paths: Vec<PathBuf> = (0..10000)
        .map(|i| working_dir.join(format!("file{}.profraw", i)))
        .collect();

    for path in &profraw_paths {
        fs::write(path, "fake profraw content").unwrap();
    }

    let result = profraws_to_lcov(&profraw_paths, &binary_path, working_dir);
    assert!(result.is_ok());
}