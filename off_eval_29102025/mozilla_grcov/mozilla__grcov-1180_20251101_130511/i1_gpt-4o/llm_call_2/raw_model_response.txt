<Filename>src/summary.rs</Filename>
<imports>
use std::path::PathBuf;
use std::collections::BTreeMap;
use rustc_hash::FxHashMap;
use crate::CovResult;
use crate::Function;
use super::print_summary;
</imports>
<Rust>
#[test]
fn test_print_summary() {
    let results = vec![(
        PathBuf::from("src/main.rs"),
        PathBuf::from("src/main.rs"),
        CovResult {
            lines: [(1, 1), (2, 1), (3, 2), (4, 1), (5, 0), (6, 0), (8, 1), (9, 1)]
                .iter()
                .cloned()
                .collect(),
            branches: {
                let mut map = BTreeMap::new();
                map.insert(3, vec![true, false]);
                map.insert(5, vec![false, false]);
                map
            },
            functions: {
                let mut map = FxHashMap::default();
                map.insert(
                    "_ZN8cov_test4main17h7eb435a3fb3e6f20E".to_string(),
                    Function {
                        start: 1,
                        executed: true,
                    },
                );
                map
            },
        },
    )];

    let expected_output = "lines: 75.0% (6 out of 8)\nbranches: 25.0% (1 out of 4)\n";
    let mut output = Vec::new();
    {
        let _stdout = std::io::stdout();
        let mut handle = _stdout.lock();
        std::io::set_output_capture(Some(&mut output));
        print_summary(&results);
        std::io::set_output_capture(None);
    }
    let actual_output = String::from_utf8(output).unwrap();
    assert_eq!(expected_output, actual_output);
}
</Rust>