<Filename>src/lib.rs</Filename>
<imports>
use std::alloc::System;
use std::alloc::GlobalAlloc;
use std::alloc::Layout;
use std::alloc::alloc::Global;
</imports>
<Rust>
#[test]
fn test_global_allocator() {
  let sys = System {};
  let layout = Layout::from_size_align(10, 1).unwrap();
  let ptr = unsafe { sys.alloc(layout) };
  let is_null_before_patch = std::mem::size_of::<Global>() == 0;
  assert!(is_null_before_patch != ptr.is_null());
}
</Rust>