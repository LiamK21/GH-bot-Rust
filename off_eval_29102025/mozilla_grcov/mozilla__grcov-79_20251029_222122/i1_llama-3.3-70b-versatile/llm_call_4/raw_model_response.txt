<Filename>src/output.rs</Filename>
<imports>
use std::io::Cursor;
use std::str;
use super::output_lcov;
use std::path::PathBuf;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_output_lcov_branch_coverage() {
  let mut writer = Cursor::new(Vec::new());
  let results = Box::new(vec![(
    PathBuf::from("test_file"),
    vec![("test_function".to_string(), true)],
    HashMap::from([("test_line".to_string(), 1)]),
    HashMap::from([((1, 1), true), ((2, 2), false)])
  )].into_iter());
  let expected = "FNF:1\nFNH:1\nBRDA:1,0,1,1\nBRDA:2,0,2,-\nBRF:2\nBRH:1\nDA:1,1\n";
  output_lcov(results);
  let actual = str::from_utf8(writer.into_inner().as_slice()).unwrap();
  assert_eq!(expected, actual);
}
</Rust>