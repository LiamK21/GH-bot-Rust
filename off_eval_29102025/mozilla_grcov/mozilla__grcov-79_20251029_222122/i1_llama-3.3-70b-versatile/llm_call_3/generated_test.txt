#[test]
fn test_output_lcov_branch_coverage() {
  let mut writer = Cursor::new(Vec::new());
  let results: CovResultIter = vec![(
    "test_file".to_string(),
    vec![("test_function".to_string(), true)],
    vec![("test_line".to_string(), 1)],
    vec![((1, 1), true), ((2, 2), false)]
  )].into_iter();
  let expected = "FNF:1\nFNH:1\nBRDA:1,0,1,1\nBRDA:2,0,2,-\nBRF:2\nBRH:1\nDA:1,1\n";
  output_lcov(results);
  let actual = str::from_utf8(writer.into_inner().as_slice()).unwrap();
  assert_eq!(expected, actual);
}