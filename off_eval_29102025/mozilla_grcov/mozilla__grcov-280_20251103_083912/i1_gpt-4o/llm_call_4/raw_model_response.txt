<Filename>src/parser.rs</Filename>
<imports>
use std::path::Path;
use std::fs::File;
use std::io::Write;
use std::collections::{BTreeMap, HashMap};
use crate::defs::{CovResult, Function};
use super::parse_gcov;
</imports>
<Rust>
#[test]
fn test_parse_gcov_with_valid_input() {
    let gcov_content = "TN:\nSF:/path/to/source.c\nFN:1,function_name\nFNDA:0,function_name\nend_of_record\n";
    let gcov_path = "/tmp/test.gcov";
    let mut file = File::create(gcov_path).unwrap();
    file.write_all(gcov_content.as_bytes()).unwrap();

    let mut expected_functions = HashMap::new();
    expected_functions.insert("function_name".to_string(), Function {
        start: 1,
        executed: 0,
    });

    let expected = vec![("/path/to/source.c".to_string(), CovResult {
        branches: BTreeMap::new(),
        functions: expected_functions,
        lines: BTreeMap::new(),
    })];
    let actual = parse_gcov(Path::new(gcov_path)).unwrap();

    assert_eq!(expected, actual);
}
</Rust>