#[test]
fn test_rewrite_paths_skips_symlinks() {
  let source_dir = PathBuf::from("/tmp/test_source_dir");
  fs::create_dir_all(&source_dir).unwrap();
  let file_path = source_dir.join("test_file.txt");
  fs::File::create(&file_path).unwrap();
  let symlink_path = source_dir.join("symlink");
  std::os::unix::fs::symlink("test_file.txt", &symlink_path).unwrap();
  let result_map: CovResultMap = HashMap::new();
  let path_mapping = None;
  let prefix_dir = None;
  let ignore_not_existing = false;
  let to_ignore_dirs: Vec<String> = vec![];
  let filter_option = None;
  let expected_count = 1;
  let actual_count = rewrite_paths(result_map, path_mapping, Some(source_dir), prefix_dir, ignore_not_existing, to_ignore_dirs, filter_option).count();
  assert_eq!(expected_count, actual_count);
  fs::remove_dir_all(&source_dir).unwrap();
}