#[test]
fn test_producer_llvm_buffers() {
  let (sender, receiver): (std::sync::mpsc::Sender<String>, std::sync::mpsc::Receiver<String>) = channel();
  let queue: WorkQueue = WorkQueue::new();
  let tmp_dir = PathBuf::from("test");
  let paths = vec!["test/llvm/gcno.zip".to_string(), "test/llvm/gcda1.zip".to_string(), "test/llvm/gcda2.zip".to_string()];
  let ignore_orphan_gcno = true;
  let is_llvm = true;
  let result = producer(&tmp_dir, &paths, &queue, ignore_orphan_gcno, is_llvm);
  let mut count = 0;
  loop {
    let elem = queue.try_pop();
    if elem.is_none() {
      break;
    }
    let elem = elem.unwrap().unwrap();
    if let ItemType::Buffers(_) = elem.item {
      count += 1;
    }
  }
  assert_eq!(count, 2);
}