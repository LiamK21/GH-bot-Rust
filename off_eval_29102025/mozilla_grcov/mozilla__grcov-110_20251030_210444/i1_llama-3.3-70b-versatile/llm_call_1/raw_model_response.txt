<Filename> src/producer.rs </Filename>
<imports> 
use std::path::PathBuf;
use std::sync::Arc;
use std::sync::mpsc::channel;
use std::thread;
use crossbeam::sync::MsQueue;
use zip::ZipArchive;
use walkdir::WalkDir;
use std::fs;
use std::io;
use std::ffi::OsStr;
use super::producer;
use super::WorkQueue;
use super::WorkItem;
use super::ItemType;
use super::ItemFormat;
use super::GcnoBuffers;
</imports>
<Rust>
#[test]
fn test_producer_llvm_buffers() {
  let (sender, receiver) = channel();
  let queue: WorkQueue = MsQueue::new();
  let tmp_dir = PathBuf::from("test");
  let paths = vec!["test/llvm/gcno.zip".to_string(), "test/llvm/gcda1.zip".to_string(), "test/llvm/gcda2.zip".to_string()];
  let ignore_orphan_gcno = true;
  let is_llvm = true;
  let result = producer(&tmp_dir, &paths, &queue, ignore_orphan_gcno, is_llvm);
  let mut count = 0;
  loop {
    let elem = queue.try_pop();
    if elem.is_none() {
      break;
    }
    let elem = elem.unwrap().unwrap();
    if let ItemType::Buffers(_) = elem.item {
      count += 1;
    }
  }
  assert_eq!(count, 2);
}
</Rust>