#[test]
fn test_partial_path_extension_filtering() {
    let mut result_map = HashMap::new();
    result_map.insert("partial/path/java/file.java".to_string(), 0);
    result_map.insert("partial/path/nojava/file.txt".to_string(), 0);

    let path_mapping = Some(json!({ "partial": "full" }));
    let source_dir = None;
    let prefix_dir = None;
    let ignore_not_existing = false;
    let to_ignore_dirs = &[];
    let to_keep_dirs = &[];
    let filter_option = None;
    let file_filter = crate::file_filter::FileFilter::default();

    let results = rewrite_paths(
        result_map,
        path_mapping,
        source_dir,
        prefix_dir,
        ignore_not_existing,
        to_ignore_dirs,
        to_keep_dirs,
        filter_option,
        file_filter,
    );

    assert_eq!(results[0].0, "full/path/java/file.java");
    assert_eq!(results[1].0, "partial/path/nojava/file.txt");
}