<Filename>src/main.rs</Filename>
<imports>
use clap::{App, Arg};
use std::process;
use super::main;
use std::io::Write;
</imports>
<Rust>
#[test]
fn test_cli_options() {
  let result_before_patch = std::process::Command::new("grcov")
    .arg("path1")
    .arg("path2")
    .arg("-t")
    .arg("lcov")
    .output();
  let expected_stderr = "Usage: grcov DIRECTORY_OR_ZIP_FILE[...] [-o OUTPUT FILENAME] [-t OUTPUT_TYPE] [-s SOURCE_ROOT] [-p PREFIX_PATH] [--token COVERALLS_REPO_TOKEN] [--commit-sha COVERALLS_COMMIT_SHA] [--ignore-not-existing] [--ignore-dir DIRECTORY] [--llvm] [--path-mapping PATH_MAPPING_FILE] [--branch] [--filter]";
  assert!(result_before_patch.stderr.len() > 0);
  let stderr_string = String::from_utf8_lossy(&result_before_patch.stderr);
  assert!(stderr_string.contains(expected_stderr));

  let result_after_patch = App::new("grcov")
    .arg(Arg::with_name("paths")
         .help("Sets the input paths to use")
         .required(true)
         .multiple(true)
         .takes_value(true))
    .get_matches_from(vec!["grcov", "path1", "path2"]);
  assert!(result_after_patch.is_ok());
}
</Rust>