<Filename>src/parser.rs</Filename>
<imports>
use std::fs::File;
use std::io::BufReader;
use super::parse_lcov;
</imports>
<Rust>
#[test]
fn test_lcov_parser_duplicate_fn_error() {
    let f = File::open("./test/duplicate_fn_fnda.info").expect("Failed to open lcov file");
    let file = BufReader::new(&f);
    let result = parse_lcov(file, true);

    assert!(result.is_err());
    if let Err(e) = result {
        assert!(e.to_string().contains("FN 'top-level' duplicated"));
    }
}
</Rust>