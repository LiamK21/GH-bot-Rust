<Filename>src/parser.rs</Filename>
<imports>
use std::fs::File;
use std::io::BufReader;
use super::parse_lcov;
</imports>
<Rust>
#[test]
fn test_lcov_parser_duplicate_fn_error() {
    let f = File::open("./test/duplicate_fn_fnda.info").expect("Failed to open lcov file");
    let file = BufReader::new(&f);
    let result = parse_lcov(file, true);

    assert!(result.is_ok());
    let results = result.unwrap();
    assert_eq!(results.len(), 1);

    let (ref source_name, ref result) = results[0];
    assert_eq!(
        source_name,
        "devtools/client/webconsole/components/Output/ConsoleTable.js"
    );
    assert!(result.functions.contains_key("top-level"));
    let func = result.functions.get("top-level").unwrap();
    assert_eq!(func.start, 1);
    assert_eq!(func.executed, true);
    assert!(result.functions.contains_key("top-level1"));
    let func1 = result.functions.get("top-level1").unwrap();
    assert_eq!(func1.start, 17);
    assert_eq!(func1.executed, true);
    assert!(result.functions.contains_key("top-level2"));
    let func2 = result.functions.get("top-level2").unwrap();
    assert_eq!(func2.start, 176);
    assert_eq!(func2.executed, true);
}
</Rust>