#[test]
fn test_output_coveralls_with_function_info() {
  let results: CovResultIter = vec![(PathBuf::from("path"), PathBuf::from("rel_path"), CovResult { 
    functions: HashMap::new(), 
    branches: Vec::new(), 
    lines: Vec::new() 
  })].into_iter();
  let repo_token = "token";
  let service_name = "service_name";
  let service_number = "service_number";
  let service_job_number = "service_job_number";
  let commit_sha = "commit_sha";
  let with_function_info = true;
  let expected = json!({
    "name": "rel_path",
    "source_digest": get_digest(PathBuf::from("path")),
    "coverage": null,
    "branches": [],
    "functions": json!([]),
  });
  output_coveralls(results, repo_token, service_name, service_number, service_job_number, commit_sha, with_function_info);
}