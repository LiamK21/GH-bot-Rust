#[test]
fn test_lcov_parser_ignoring_invalid_FNDA_record() {
    let test_data = " \
        FN:1,functionA\n \
        FNDA:0,functionA\n \
        FNDA:,functionB\n \
        FN:2,functionC\n \
        FNDA:1,functionC\n \
        TN:InvalidFunctionTest
    ".as_bytes().to_vec();
    let results = parse_lcov(test_data, true, true).unwrap();

    assert_eq!(results.len(), 1);
    let (source_name, result) = &results[0];
    assert!(source_name.ends_with("/parser.rs"));

    assert_eq!(
        result.functions,
        vec![
            ("functionA".to_string(), defs::Function { executed: false }),
            ("functionC".to_string(), defs::Function { executed: true }),
        ]
        .into_iter()
        .collect()
    );
}