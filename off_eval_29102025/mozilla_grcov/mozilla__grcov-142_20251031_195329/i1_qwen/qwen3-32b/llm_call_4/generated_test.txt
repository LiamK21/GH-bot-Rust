#[test]
fn test_jacoco_xml_consumer() {
    let working_dir = PathBuf::from("/");
    let source_dir = Some(PathBuf::from(""));
    let result_map = Mutex::new(std::collections::HashMap::new());
    let queue = MsQueue::new();

    let xml_content = b"<?xml version='1.0' encoding='UTF-8'?><coverage><class name='Test'/></coverage>";
    let work_item = WorkItem {
        format: ItemFormat::JACOCO_XML,
        item: ItemType::Content(xml_content.to_vec()),
        name: "test.xml".to_string(),
    };

    queue.send(work_item).expect("Failed to send work item");

    consumer(
        &working_dir,
        &source_dir,
        &result_map,
        &queue,
        false,
        false,
    );

    let result_map = result_map.lock().unwrap();
    assert!(!result_map.is_empty(), "Result map should not be empty after processing Jacoco XML");
}