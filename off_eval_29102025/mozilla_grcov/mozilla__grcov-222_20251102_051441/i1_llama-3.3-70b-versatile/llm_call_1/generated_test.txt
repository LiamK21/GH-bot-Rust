#[test]
fn test_thread_failure_exit_code() {
  let handle = thread::spawn(|| {
    panic!("Test panic");
  });
  let result = handle.join();
  assert!(result.is_err());
  process::exit(1);
}