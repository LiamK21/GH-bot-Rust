<Filename> src/main.rs </Filename>
<imports> 
use std::process;
use std::thread;
</imports>
<Rust>
#[test]
fn test_thread_failure_exit_code() {
  let handle = thread::spawn(|| {
    panic!("Test panic");
  });
  let result = handle.join();
  assert!(result.is_err());
  process::exit(1);
}</Rust>