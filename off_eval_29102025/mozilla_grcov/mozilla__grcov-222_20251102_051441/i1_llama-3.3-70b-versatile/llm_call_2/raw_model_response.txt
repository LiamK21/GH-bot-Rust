<Filename>src/main.rs</Filename>
<imports>
use std::process;
use std::thread;
</imports>
<Rust>
#[test]
fn test_thread_failure_exit_code() {
  let handle = std::thread::spawn(|| {
    panic!("Test panic");
  });
  let result = handle.join();
  let exit_status = std::process::exit(1);
  std::process::Command::new("bash")
    .arg("-c")
    .arg("echo $?")
    .output()
    .expect("failed to execute process");
  assert!(result.is_err());
}
</Rust>