#[test]
fn test_keep_only_files() {
    let mut result_map: CovResultMap = FxHashMap::default();
    result_map.insert("main.rs".to_string(), empty_result!());
    result_map.insert("mydir/kept.rs".to_string(), empty_result!());
    let results = rewrite_paths(
        result_map,
        None,
        None,
        None,
        false,
        &mut Vec::new(),
        &vec!["mydir/*"],
        None,
        Default::default(),
    );
    let mut count = 0;
    let mut found = false;
    for (abs_path, _, _) in results {
        count += 1;
        assert_eq!(abs_path, PathBuf::from("mydir/kept.rs"));
        found = true;
    }
    assert!(found);
    assert_eq!(count, 1);
}