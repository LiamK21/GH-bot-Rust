#[test]
fn test_ignore_dirs_unsorted() {
    let mut map = FxHashMap::default();
    map.insert("dir/a/file".to_string(), CovResult {});
    map.insert("dir/b/file".to_string(), CovResult {});
    map.insert("other/file".to_string(), CovResult {});

    let to_ignore_dirs = vec!["dir/a".to_string(), "dir".to_string()];
    let result: Vec<String> = rewrite_paths(
        map,
        None,
        None,
        None,
        true,
        to_ignore_dirs,
        None,
    )
    .map(|entry| entry.0.display().to_string())
    .collect();

    assert!(result.iter().all(|path| !path.contains("dir/a")));
}