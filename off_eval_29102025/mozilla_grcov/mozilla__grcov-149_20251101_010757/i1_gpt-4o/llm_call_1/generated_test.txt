#[test]
fn test_rewrite_paths_with_add_prefix() {
    let mut result_map: CovResultMap = HashMap::new();
    result_map.insert("org/example/Hello.java".to_string(), empty_result!());

    let expected_abs_path = PathBuf::from("mobile/android/app/src/java/org/example/Hello.java");
    let expected_rel_path = PathBuf::from("mobile/android/app/src/java/org/example/Hello.java");

    let results: CovResultIter = rewrite_paths(
        result_map,
        None,
        None,
        None,
        Some(PathBuf::from("mobile/android/app/src/java")),
        false,
        false,
        Vec::new(),
        None,
    );

    let mut count = 0;
    for (abs_path, rel_path, result) in results {
        count += 1;
        assert_eq!(abs_path, expected_abs_path);
        assert_eq!(rel_path, expected_rel_path);
        assert_eq!(result, empty_result!());
    }
    assert_eq!(count, 1);
}