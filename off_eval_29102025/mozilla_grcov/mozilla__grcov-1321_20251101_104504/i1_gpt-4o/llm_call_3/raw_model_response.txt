<Filename>src/path_rewriting.rs</Filename>
<imports>
use std::path::Path;
use std::collections::HashMap;
use serde_json::Value;
use crate::defs::CovResult;
use crate::ResultTuple;
use crate::FileFilter;
use super::rewrite_paths;
use rustc_hash::FxHashMap;
</imports>
<Rust>
#[test]
fn test_generate_partial_path_mapping_only_when_required() {
    let mut result_map: FxHashMap<String, CovResult> = FxHashMap::default();
    result_map.insert("test.java".to_string(), CovResult::default());
    let path_mapping: Option<Value> = None;
    let source_dir = Some(Path::new("/source"));
    let prefix_dir = Some(Path::new("/prefix"));
    let ignore_not_existing = false;
    let to_ignore_dirs: Vec<&str> = vec![];
    let to_keep_dirs: Vec<&str> = vec![];
    let filter_option = None;
    let file_filter = FileFilter::default();

    let expected: Vec<ResultTuple> = vec![];

    let actual = rewrite_paths(
        result_map,
        path_mapping,
        source_dir,
        prefix_dir,
        ignore_not_existing,
        &to_ignore_dirs,
        &to_keep_dirs,
        filter_option,
        file_filter,
    );

    assert_eq!(expected, actual);
}
</Rust>