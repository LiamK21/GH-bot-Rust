<Filename>src/path_rewriting.rs</Filename>
<imports>
use std::collections::HashMap;
use std::path::PathBuf;
use crate::FileFilter;
use crate::CovResultMap;
use super::rewrite_paths;
</imports>
<Rust>
#[test]
fn test_rewrite_paths_with_partial_path_mapping() {
  let mut result_map: CovResultMap = HashMap::new();
  let path_mapping = None;
  let source_dir = Some(Path::new("/source"));
  let prefix_dir = None;
  let ignore_not_existing = false;
  let to_ignore_dirs: &[&str] = &[];
  let to_keep_dirs: &[&str] = &[];
  let filter_option = None;
  let file_filter = FileFilter::default();
  result_map.insert("Test.java".to_string(), ());
  let result_before_patch = rewrite_paths(result_map.clone(), path_mapping, source_dir, prefix_dir, ignore_not_existing, to_ignore_dirs, to_keep_dirs, filter_option, file_filter);
  result_map.insert("Test2.java".to_string(), ());
  let result_after_patch = rewrite_paths(result_map, path_mapping, source_dir, prefix_dir, ignore_not_existing, to_ignore_dirs, to_keep_dirs, filter_option, file_filter);
  assert_ne!(result_before_patch.len(), result_after_patch.len());
}
</Rust>