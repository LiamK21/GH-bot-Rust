#[test]
fn test_no_path_collision_for_rust_files() {
    let mut result_map: std::collections::HashMap<String, CovResult> = std::collections::HashMap::new();
    result_map.insert("src/lib.rs".to_string(), CovResult {
        lines: std::collections::BTreeMap::new(),
        branches: std::collections::BTreeMap::new(),
        functions: std::collections::HashMap::new(),
    });
    result_map.insert("src_other/lib.rs".to_string(), CovResult {
        lines: std::collections::BTreeMap::new(),
        branches: std::collections::BTreeMap::new(),
        functions: std::collections::HashMap::new(),
    });

    let results = super::rewrite_paths(
        result_map,
        None,
        Some(std::env::current_dir().unwrap()), 
        None,
        true,
        Vec::new(),
        None,
    );

    let collected: Vec<(PathBuf, PathBuf, CovResult)> = results.collect();
    assert_eq!(collected.len(), 2);

    assert_ne!(collected[0].0.to_string_lossy(), collected[1].0.to_string_lossy());
}