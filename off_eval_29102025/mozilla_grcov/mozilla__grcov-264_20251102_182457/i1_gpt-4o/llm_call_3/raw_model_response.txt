<Filename>src/path_rewriting.rs</Filename>
<imports>
use std::collections::HashMap;
use std::path::PathBuf;
use crate::CovResultMap;
use crate::CovResult;
use crate::canonicalize_path;
use super::rewrite_paths;
</imports>
<Rust>
#[test]
fn test_rewrite_paths_handles_multiple_lib_rs_files() {
    let mut result_map: CovResultMap = HashMap::new();
    result_map.insert("src/lib.rs".to_string(), CovResult::default());
    result_map.insert("/rustc/0ea22717a1e01fa535534b85a5347a7e49fc79de/src/libtest/lib.rs".to_string(), CovResult::default());

    let results = rewrite_paths(
        result_map,
        None,
        Some(canonicalize_path("src").unwrap()),
        None,
        true,
        Vec::new(),
        None,
    );

    let mut results: Vec<(PathBuf, PathBuf, CovResult)> = results.collect();
    assert_eq!(results.len(), 1);

    let (abs_path, rel_path, result) = results.remove(0);
    assert!(abs_path.is_absolute());
    assert!(abs_path.ends_with("src/lib.rs"));
    assert_eq!(rel_path, PathBuf::from("src/lib.rs"));
    assert_eq!(result, CovResult::default());
}
</Rust>