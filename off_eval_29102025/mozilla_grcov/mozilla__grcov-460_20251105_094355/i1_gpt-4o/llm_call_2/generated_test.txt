#[test]
fn test_output_html_with_branch_coverage() {
    let results = Box::new(std::iter::empty()) as CovResultIter;
    let output_dir = Some("test_output");
    let num_threads = 1;
    let branch_enabled = true;

    let _ = fs::remove_dir_all("test_output");

    output_html(results, output_dir, num_threads, branch_enabled);

    let output_path = PathBuf::from("test_output/index.html");
    assert!(output_path.exists());

    let content = fs::read_to_string(output_path).expect("Failed to read index.html");

    assert!(content.contains("Branches"));
}