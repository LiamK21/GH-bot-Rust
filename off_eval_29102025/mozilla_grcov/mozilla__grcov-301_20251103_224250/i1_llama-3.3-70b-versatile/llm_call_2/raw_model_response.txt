<Filename>src/output.rs</Filename>
<imports>
use std::collections::HashMap;
use super::output_coveralls;
</imports>
<Rust>
#[test]
fn test_output_coveralls_branch_name() {
  let results = Vec::new();
  let repo_token = "token";
  let service_name = "service_name";
  let service_number = "service_number";
  let service_job_number = "service_job_number";
  let commit_sha = "commit_sha";
  let with_function_info = false;
  let output_file = None;
  let vcs_branch = "test_branch";
  let expected = HashMap::from([
    ("head".to_string(), HashMap::from([("id".to_string(), commit_sha.to_string())])),
    ("branch".to_string(), vcs_branch.to_string()),
    ("source_files".to_string(), Vec::new()),
    ("service_name".to_string(), service_name.to_string()),
  ]);
  let actual = {
    let mut coveralls_json = HashMap::new();
    output_coveralls(
      results.into_iter(),
      repo_token,
      service_name,
      service_number,
      service_job_number,
      commit_sha,
      with_function_info,
      output_file,
      vcs_branch,
    );
    coveralls_json
  };
  assert_eq!(actual.get("head").unwrap().get("id").unwrap(), expected.get("head").unwrap().get("id").unwrap());
  assert_eq!(actual.get("branch").unwrap(), expected.get("branch").unwrap());
}
</Rust>