<Filename>src/html.rs</Filename>
<imports>
use super::gen_coverage_json;
use super::HtmlStats;
use super::Config;
use std::path::Path;
use std::fs::read_to_string;
use std::fs::remove_file;
use std::fs::File;
use std::io::Write;
use chrono::Utc;
use chrono::TimeZone;
</imports>
<Rust>
#[test]
fn test_gen_coverage_json_reports_correct_coverage() {
    let stats = HtmlStats {
        covered_lines: 24,
        total_lines: 100,
        covered_branches: 0,
        total_branches: 0,
        covered_funs: 0,
        total_funs: 0,
    };
    let conf = Config {
        hi_limit: 80.0,
        med_limit: 50.0,
        branch_hi_limit: 80.0,
        branch_med_limit: 50.0,
        fn_hi_limit: 80.0,
        fn_med_limit: 50.0,
        date: Utc.ymd(2023, 10, 1).and_hms(0, 0, 0),
    };
    let output_path = Path::new("test_coverage.json");
    gen_coverage_json(&stats, &conf, output_path);

    let expected = r#"{"schemaVersion":1,"label":"coverage","message":"24%","color":"red"}"#;
    let actual = read_to_string(output_path).unwrap();
    assert_eq!(expected, actual);

    remove_file(output_path).unwrap();
}
</Rust>