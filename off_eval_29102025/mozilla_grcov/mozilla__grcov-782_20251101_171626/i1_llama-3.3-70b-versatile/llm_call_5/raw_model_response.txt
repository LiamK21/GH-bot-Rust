<Filename>src/html.rs</Filename>
<imports>
use super::gen_coverage_json;
use super::HtmlStats;
use super::Config;
use std::path::Path;
use std::fs;
use std::io::Write;
use serde_json::json;
use serde_json::Value;
</imports>
<Rust>
#[test]
fn test_gen_coverage_json() {
  let stats = HtmlStats{ covered_lines: 5, total_lines: 10, covered_branches: 0, total_branches: 0, covered_funs: 0, total_funs: 0 };
  let conf = Config{ hi_limit: 100.0, med_limit: 50.0, branch_hi_limit: 100.0, branch_med_limit: 50.0, date: "2022-01-01".to_string(), file_prefix: "".to_string(), file_suffix: "".to_string() };
  let output = Path::new("coverage.json");
  let expected = json!({"schemaVersion":1,"label":"coverage","message":"50%","color":"red"});
  fs::File::create(output).unwrap().write_all(serde_json::to_string(&expected).unwrap().as_bytes()).unwrap();
  gen_coverage_json(&stats, &conf, output);
  let actual: Value = serde_json::from_str(&fs::read_to_string(output).unwrap()).unwrap();
  assert_eq!(actual, expected);
}
</Rust>