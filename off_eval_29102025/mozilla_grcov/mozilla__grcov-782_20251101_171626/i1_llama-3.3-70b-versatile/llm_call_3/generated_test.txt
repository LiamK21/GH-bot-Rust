#[test]
fn test_gen_coverage_json() {
  let stats = HtmlStats{ covered_lines: 5, total_lines: 10, covered_branches: 0, total_branches: 0, covered_funs: 0, total_funs: 0 };
  let conf = super::Config{ hi_limit: 100.0, med_limit: 50.0, branch_hi_limit: 100.0, branch_med_limit: 50.0, date: Utc::now(), prefix_dir: "".to_string(), binary_path: "".to_string(), gcov: false, lcov: false, cobertura: false, html: false, badge: false };
  let output = Path::new("coverage.json");
  let expected = "{\"schemaVersion\":1,\"label\":\"coverage\",\"message\":\"50%\",\"color\":\"red\"}";
  fs::File::create(output).unwrap().write_all(expected.as_bytes()).unwrap();
  gen_coverage_json(&stats, &conf, output);
  let actual = fs::read_to_string(output).unwrap();
  assert_eq!(actual, expected);
}