<Filename> src/html.rs </Filename>
<imports> 
use super::get_percentage_of_covered_lines;
use super::HtmlStats;
use std::path::Path;
use std::fs;
use std::io::Write;
</imports>
<Rust>
#[test]
fn test_gen_coverage_json() {
  let stats = HtmlStats{ covered_lines: 5, total_lines: 10 };
  let conf = super::Config{ hi_limit: 100, med_limit: 50 };
  let output = Path::new("coverage.json");
  let mut file = fs::File::create(output).unwrap();
  file.write_all(b"{\"schemaVersion\":1,\"label\":\"coverage\",\"message\":\"50%\",\"color\":\"red\"}").unwrap();
  let expected = "{\"schemaVersion\":1,\"label\":\"coverage\",\"message\":\"50%\",\"color\":\"red\"}";
  super::gen_coverage_json(&stats, &conf, output);
  let actual = fs::read_to_string(output).unwrap();
  assert_eq!(actual, expected);
}</Rust>