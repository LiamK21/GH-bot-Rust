#[test]
fn test_producer_ignore_orphan_gcno() {
  let queue: Arc<WorkQueue> = Arc::new(MsQueue::new());
  let tmp_dir = TempDir::new("grcov").expect("Failed to create temporary directory");
  let tmp_path = tmp_dir.path().to_owned();
  let paths = vec![String::from("test/only_one_gcda")];
  let ignore_orphan_gcno = true;
  producer(&tmp_path, &paths, &queue, ignore_orphan_gcno);
  let expected = vec![
            (super::ItemFormat::GCNO, true, "test/only_one_gcda/main.gcno", true),
        ];
  let actual: Vec<(super::ItemFormat, bool, &str, bool)> = queue.iter().map(|item| match item {
    super::WorkItem { format, item: super::ItemType::Path(path), .. } => (format, true, path.to_str().unwrap(), true),
    _ => unreachable!(),
  }).collect();
  assert_eq!(actual, expected);
}