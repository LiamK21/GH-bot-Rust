#[test]
fn test_zip_producer_ignore_orphan_gcno() {
    let tmp_dir = TempDir::new("grcov").unwrap();
    let tmp_path = tmp_dir.path().to_path_buf();
    let queue: Arc<WorkQueue> = Arc::new(MsQueue::new());

    let main_gcno_str = "test/no_gcda/main.gcno.zip".to_string();
    let zip_files = vec![&main_gcno_str];

    let ret = zip_producer(&tmp_path, &zip_files, &queue, true);

    assert!(ret.is_none(), "Should not add orphan GCNO files when ignoring");

    // Check that queue does not contain orphan GCNO file
    check_produced(tmp_path, &queue, vec![]);
}