<Filename>src/producer.rs</Filename>
<imports>
use tempfile::tempdir;
use std::sync::mpsc;
use fxhash::FxHashMap;
use std::path::Path;
use std::path::PathBuf;
use super::profraw_producer;
use crate::JobSender;
use crate::ItemType;
use crate::WorkItem;
use crate::ItemFormat;
use crate::Archive;
</imports>
<Rust>
#[test]
fn test_profraw_producer_sends_correct_item() {
    let tmp_dir = tempdir().unwrap();
    let mut profraws = FxHashMap::default();
    let archive = Archive::new("test_archive");
    profraws.insert("test/default.profraw".to_string(), vec![&archive]);

    let (sender, receiver) = mpsc::channel();
    let job_sender = JobSender::new(sender);

    profraw_producer(tmp_dir.path(), &profraws, &job_sender);

    let work_item = receiver.recv().unwrap().unwrap();
    assert_eq!(work_item.format, ItemFormat::PROFRAW);
    if let ItemType::Paths(profraw_paths) = work_item.item {
        assert_eq!(profraw_paths.len(), 1);
        assert!(profraw_paths[0].ends_with("test/default.profraw"));
    } else {
        panic!("Expected ItemType::Paths");
    }
}
</Rust>