#[test]
fn test_error_message_when_directory_does_not_exist() {
    let output_file = Some("./non_existent_dir/coverage.info");
    let expected_error_message = "Cannot create ./non_existent_dir/coverage.info to dump coverage data, as ./non_existent_dir doesn't exist";

    let result = std::panic::catch_unwind(|| {
        let _ = get_target_output_writable(output_file);
    });

    assert!(result.is_err());
    if let Err(err) = result {
        let err_message = err.downcast_ref::<String>().unwrap();
        assert!(err_message.contains(expected_error_message));
    }
}