#[test]
fn test_glean_enable_logging_trace() {
    let buffer = Arc::new(Mutex::new(Vec::new()));
    let buffer_for_logger = buffer.clone();
    let logger = move |record: &log::Record| {
        let _ = writeln!(
            buffer_for_logger.lock().unwrap(),
            "{}[{}]: {}",
            record.level(),
            record.target(),
            record.args()
        );
    };

    let _ = env_logger::Builder::new()
        .format(move |buf, record| {
            logger(record);
            Ok(())
        })
        .is_test(true)
        .filter_level(LevelFilter::Trace)
        .try_init();

    unsafe { glean_enable_logging() };

    let logs = String::from_utf8(buffer.lock().unwrap().clone()).unwrap();
    assert!(logs.contains("TRACE[libglean_ffi]: Android logging should be hooked up!"));
}