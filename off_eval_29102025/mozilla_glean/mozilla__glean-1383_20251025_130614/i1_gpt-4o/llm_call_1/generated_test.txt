#[test]
fn test_snapshot_metric_with_specific_lifetime() {
    let storage = Database::new();
    let store_name = "test_store";
    let metric_id = "test_metric";
    let metric_lifetime = Lifetime::Application;

    // Simulate storing a metric with a specific lifetime
    storage.store_metric(metric_lifetime, store_name, metric_id, Metric::Boolean(true));

    // Expected result
    let expected = Some(Metric::Boolean(true));

    // Actual result from snapshot_metric
    let actual = StorageManager::snapshot_metric(&storage, store_name, metric_id, metric_lifetime);

    assert_eq!(expected, actual);
}