<Filename>glean-core/src/storage/mod.rs</Filename>
<imports>
use super::snapshot_metric;
use crate::metrics::Metric;
use crate::storage::{Database, Lifetime, StorageManager};
</imports>
<Rust>
#[test]
fn test_snapshot_metric_with_specific_lifetime() {
    let storage = Database::new("test_path", false).unwrap();
    let store_name = "test_store";
    let metric_id = "test_metric";
    let metric_lifetime = Lifetime::Application;

    // Simulate storing a metric with a specific lifetime
    storage.write_metric(Lifetime::Application, store_name, metric_id, Metric::Boolean(true)).unwrap();

    // Expected result
    let expected = Some(Metric::Boolean(true));

    // Actual result from snapshot_metric
    let storage_manager = StorageManager::new();
    let actual = storage_manager.snapshot_metric(&storage, store_name, metric_id, metric_lifetime);

    assert_eq!(expected, actual);
}
</Rust>