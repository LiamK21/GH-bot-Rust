<Filename>glean-core/src/metrics/ping.rs</Filename>
<imports>
use super::PingType;
use super::Glean;
use std::collections::HashMap;
use std::error::Error;
use std::result::Result;
use crate::InternalConfiguration;
use crate::ConfigurationBuilder;
use crate::GLOBAL_APPLICATION_ID;
use tempfile::tempdir;
use uuid::Uuid;
use std::path::PathBuf;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_pings_get_submitted_on_disabled_ping_schedule() {
  let tmpname = tempdir().unwrap().path().to_path_buf();
  let cfg = ConfigurationBuilder::new(false, tmpname, GLOBAL_APPLICATION_ID)
    .with_server_endpoint("invalid-test-host")
    .build();
  let mut glean = Glean::new(cfg).unwrap();
  let ping_type = PingType::new(
        "test",
        true,
        true,
        true,
        true,
        true,
        vec![],
        vec![],
        false,
        vec![],
    );
  ping_type.set_enabled(false);
  let ping_schedule = HashMap::from([("test".to_string(), vec!["ride-along".to_string()])]);
  glean.ping_schedule = ping_schedule;
  let result = ping_type.submit_sync(&glean, None);
  assert_eq!(result, false);
  assert!(glean.ping_schedule.get("test").is_some());
  let ride_along_ping = PingType::new(
        "ride-along",
        true,
        true,
        true,
        true,
        true,
        vec![],
        vec![],
        false,
        vec![],
    );
  ride_along_ping.set_enabled(true);
  let result_ride_along_before_patch = ride_along_ping.submit_sync(&glean, None);
  assert_eq!(result_ride_along_before_patch, false);
  ping_type.set_enabled(true);
  let result_ride_along_after_patch = ride_along_ping.submit_sync(&glean, None);
  assert_eq!(result_ride_along_after_patch, true);
}
</Rust>