<Filename> glean-core/rlb/src/private/timing_distribution.rs </Filename>
<imports> 
use glean_core::traits::TimingDistribution;
use glean_core::rlb::src::private::TimingDistributionMetric;
use std::sync::Arc;
use std::sync::RwLock;
use std::thread;
</imports>
<Rust>
#[test]
fn test_lock_order_inversion() {
  let metric = Arc::new(RwLock::new(TimingDistributionMetric::new()));
  let metric_clone = Arc::clone(&metric);
  let handle = thread::spawn(move || {
    let _ = metric_clone.read().unwrap();
    crate::block_on_dispatcher();
  });
  let _ = metric.read().unwrap();
  crate::with_glean(|glean| {
    let _ = metric.read().unwrap();
  });
  handle.join().unwrap();
  assert!(true);
}
</Rust>