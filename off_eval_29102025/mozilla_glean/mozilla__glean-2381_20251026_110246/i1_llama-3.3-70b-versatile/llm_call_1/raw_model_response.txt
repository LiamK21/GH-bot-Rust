<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use glean_core::internal_metrics::UploadMetrics;
use glean_core::upload::PingUploadManager;
use glean_core::upload::UploadMetrics;
</imports>
<Rust>
#[test]
fn test_in_flight_pings_dropped_metric() {
  let mut upload_metrics = UploadMetrics::new();
  let ping_upload_manager = PingUploadManager::new(upload_metrics);
  let glean = "glean";
  let document_id = "document_id";
  let path = "path";
  ping_upload_manager.track_in_flight_ping(document_id.to_string(), path.to_string());
  ping_upload_manager.upload_ping(glean, document_id, path);
  assert_eq!(ping_upload_manager.upload_metrics.in_flight_pings_dropped.get(), 1);
}</Rust>