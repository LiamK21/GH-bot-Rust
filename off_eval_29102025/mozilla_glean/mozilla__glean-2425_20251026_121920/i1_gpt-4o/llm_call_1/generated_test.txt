#[test]
fn test_rkv_new_handles_database_corrupted() {
    let temp_dir = tempfile::tempdir().unwrap();
    let path = temp_dir.path();

    // Simulate a corrupted database by creating a "data.safe.bin" file
    let safebin = path.join("data.safe.bin");
    fs::write(&safebin, b"corrupted data").unwrap();

    // Call the function and expect it to handle the DatabaseCorrupted error
    let result = rkv_new(path);

    // The expected behavior is that the function should succeed after handling the error
    assert!(result.is_ok());
}