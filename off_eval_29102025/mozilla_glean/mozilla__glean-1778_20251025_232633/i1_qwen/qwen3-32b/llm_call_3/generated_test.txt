#[test]
fn test_url_custom_scheme_accepted() {
    let (glean, _tmpdir) = new_glean(None);
    let metric = UrlMetric::new(crate::CommonMetricData {
        name: "url".into(),
        category: "test".into(),
        send_in_pings: vec!["test1".into()],
        lifetime: crate::Lifetime::Application,
        disabled: false,
        dynamic_label: None,
    });

    metric.set(&glean, "custom-scheme://test");
    assert!(metric.test_get_value(&glean, "test1").is_some());
    assert_eq!(
        0,
        test_get_num_recorded_errors(&glean, metric.meta(), ErrorType::InvalidValue, None)
            .unwrap_or(0)
    );
}