<Filename>tools/embedded-uniffi-bindgen/src/main.rs</Filename>
<imports>
use super::main;
use std::env;
use std::fs;
use std::path::Path;
use uniffi::TargetLanguage;
use uniffi_bindgen::BindingGeneratorDefault;
</imports>
<Rust>
#[test]
fn test_generate_bindings_with_binding_generator_default() {
    env::set_var("OUT_DIR", "test_out_dir");
    let udl_file = "test.udl";
    let config: Option<&str> = None;
    let target_languages = vec![TargetLanguage::Kotlin];
    let generator = BindingGeneratorDefault {
        target_languages,
        try_format_code: false,
    };
    let out_dir = Some("test_out_dir");

    fs::write(udl_file, "interface TestInterface {}").unwrap();

    let result = main();

    assert!(result.is_ok());
    assert!(Path::new("test_out_dir").exists());

    fs::remove_file(udl_file).unwrap();
    fs::remove_dir_all("test_out_dir").unwrap();
}
</Rust>