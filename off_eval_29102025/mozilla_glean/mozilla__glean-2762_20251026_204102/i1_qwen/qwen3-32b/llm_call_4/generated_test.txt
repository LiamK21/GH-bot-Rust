#[test]
fn test_generator_initialization_success_with_valid_udl() {
    let temp_dir = env::temp_dir();
    let tmp_dir = temp_dir.join("embedded_uniffi_test");
    fs::create_dir_all(&tmp_dir).unwrap();

    let udl_file_path = tmp_dir.join("test.udl");
    fs::write(&udl_file_path, "namespace glean_core;\nerror MyError { Message };").unwrap();
    let out_dir_path = tmp_dir.join("out");
    fs::create_dir_all(&out_dir_path).unwrap();

    env::set_var("UDL_FILE", udl_file_path.to_str().unwrap());
    env::set_var("OUT_DIR", out_dir_path.to_str().unwrap());
    env::set_var("TARGET_LANGUAGE", "Rust");

    let result = main();
    assert!(result.is_ok());
}