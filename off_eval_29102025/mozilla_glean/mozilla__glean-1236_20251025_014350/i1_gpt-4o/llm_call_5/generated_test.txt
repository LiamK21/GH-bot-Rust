#[test]
fn test_pending_pings_directory_size_accumulation() {
    let glean = Glean::new(Configuration {
        data_path: "".into(),
        application_id: "test_app".into(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
        language_binding_name: "rust".into(),
    }).unwrap();
    let mut ping_upload_manager = PingUploadManager::new(PathBuf::new(), "test");

    let pending_pings_directory_size = 2048; // 2 KB
    let expected_size = pending_pings_directory_size as u64 / 1024; // Convert to KB

    ping_upload_manager.upload_metrics.pending_pings_directory_size.accumulate(&glean, pending_pings_directory_size as u64 / 1024);

    let actual_size = ping_upload_manager.upload_metrics.pending_pings_directory_size.test_get_value(&glean, "store1").unwrap();

    assert_eq!(expected_size, actual_size.sum);
}