<Filename>glean-core/src/upload/mod.rs</Filename>
<imports>
use super::PingUploadManager;
use crate::glean::Glean;
use crate::metrics::Metric;
use crate::metrics::U64Metric;
</imports>
<Rust>
#[test]
fn test_pending_pings_directory_size_accumulation() {
    let glean = Glean::new();
    let mut ping_upload_manager = PingUploadManager::new();
    let pending_pings_directory_size = 2048; // 2 KB

    let expected_size = pending_pings_directory_size as u64 / 1024; // Convert to KB

    ping_upload_manager.upload_metrics.pending_pings_directory_size.accumulate(&glean, pending_pings_directory_size as u64);

    let actual_size = ping_upload_manager.upload_metrics.pending_pings_directory_size.test_get_value(&glean).unwrap();

    assert_eq!(expected_size, actual_size);
}
</Rust>