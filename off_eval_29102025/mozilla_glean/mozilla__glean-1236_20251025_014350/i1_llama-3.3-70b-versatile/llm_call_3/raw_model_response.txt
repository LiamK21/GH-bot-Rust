<Filename>glean-core/src/upload/mod.rs</Filename>
<imports>
use glean_core::upload::PingUploadManager;
use glean_core::upload::UploadMetrics;
use std::collections::VecDeque;
use std::path::PathBuf;
use glean_core::Glean;
use glean_core::metrics::memory_distribution::MemoryDistributionMetric;
</imports>
<Rust>
#[test]
fn test_pending_pings_directory_size_metric() {
  let mut upload_manager = PingUploadManager::new(PathBuf::from("/tmp"), "test");
  let mut upload_metrics = UploadMetrics::new();
  let pending_pings_directory_size = 1024;
  let expected_pending_pings_directory_size = pending_pings_directory_size as u64 / 1024;
  upload_manager.upload_metrics = upload_metrics;
  upload_manager.upload_metrics.pending_pings_directory_size.accumulate(&Glean, pending_pings_directory_size as u64);
  let actual_pending_pings_directory_size = upload_manager.upload_metrics.pending_pings_directory_size.test_get_value(&Glean, "pending_pings_directory_size").unwrap().values[0];
  assert_eq!(actual_pending_pings_directory_size, expected_pending_pings_directory_size);
}
</Rust>