#[test]
fn test_uuid_set_and_get_string() {
    // Initialize Glean with a temporary directory
    let tmp_dir = tempfile::tempdir().unwrap();
    let glean = Glean::new(
        "test",
        "1.0",
        tmp_dir.path(),
        None,
        None,
        None,
    );

    let metric = UuidMetric::new(CommonMetricData {
        category: "test".into(),
        name: "uuid".into(),
        send_in_pings: vec!["default".into()],
        ..Default::default()
    });

    // Generate UUID and set
    let expected = metric.generate_and_set();

    // Force dispatcher to run
    metric.0.dispatcher().block_on_queue();

    // Retrieve as string and compare
    let actual = metric.test_get_value("default").unwrap().to_string();
    assert_eq!(actual, expected.to_string());
}