#[test]
fn test_uuid_set_and_get_string() {
    let tmp_dir = tempfile::tempdir().unwrap();
    let config = glean_core::Configuration {
        app_id: "test".into(),
        app_version: "1.0".into(),
        data_dir: tmp_dir.path().to_path_buf(),
        ..Default::default()
    };
    let glean = Glean::new(config).unwrap();

    let metric = UuidMetric::new(CommonMetricData {
        category: "test".into(),
        name: "uuid".into(),
        send_in_pings: vec!["default".into()],
        ..Default::default()
    });

    let expected = metric.generate_and_set();
    dispatcher::block_on_queue();

    let actual = metric.test_get_value("default").unwrap();
    assert_eq!(expected.to_string(), actual.to_string());
}