<Filename>glean-core/src/dispatcher/mod.rs</Filename>
<imports>
use super::Dispatcher;
use super::DispatchError;
use super::Command;
use std::sync::atomic::Ordering;
use std::sync::atomic::AtomicUsize;
</imports>
<Rust>
#[test]
fn test_preinit_queue_behavior() {
    let max_queue_size = 5;
    let dispatcher = Dispatcher::new(max_queue_size);
    let command = Command::new(); // Assuming Command has a new() method

    for _ in 0..max_queue_size {
        assert!(dispatcher.guard.send(command.clone()).is_ok());
    }

    let result = dispatcher.guard.send(command.clone());
    assert_eq!(result, Err(DispatchError::QueueFull));

    assert_eq!(dispatcher.guard.overflow_count.load(Ordering::SeqCst), 1);
}
</Rust>