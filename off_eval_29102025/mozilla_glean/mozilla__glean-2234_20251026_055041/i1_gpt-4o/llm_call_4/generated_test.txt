#[test]
fn test_preinit_queue_behavior() {
    let max_queue_size = 5;
    let dispatcher = Dispatcher::new(max_queue_size);
    let command = Command::default(); // Assuming Command implements Default trait

    for _ in 0..max_queue_size {
        assert!(dispatcher.guard.send(command.clone()).is_ok());
    }

    let result = dispatcher.guard.send(command.clone());
    assert_eq!(result, Err(DispatchError::QueueFull));

    assert_eq!(dispatcher.guard.overflow_count.load(Ordering::SeqCst), 1);
}