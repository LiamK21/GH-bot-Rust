<Filename> glean-core/src/dispatcher/mod.rs </Filename>
<imports> 
use glean_core::dispatcher::Dispatcher;
use glean_core::dispatcher::DispatchError;
use std::thread;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_preinit_queue_size() {
  let max_queue_size = 10;
  let dispatcher = Dispatcher::new(max_queue_size);
  let mut tasks = vec![];
  for _ in 0..max_queue_size + 1 {
    tasks.push(());
  }
  let mut errors = 0;
  for task in tasks {
    match dispatcher.send(task) {
      Err(DispatchError::QueueFull) => errors += 1,
      _ => (),
    }
  }
  assert_eq!(errors, 1);
}</Rust>