<Filename>glean-core/rlb/src/test.rs</Filename>
<imports>
use super::test_reset_glean;
use super::Configuration;
use super::ClientInfoMetrics;
use glean_core::glean_test_destroy_glean;
use tempfile::tempdir;
</imports>
<Rust>
#[test]
fn test_reset_glean_clears_stores() {
    let dir = tempdir().unwrap();
    let tmpname = dir.path().to_path_buf();

    let cfg = Configuration {
        data_path: tmpname.clone(),
        application_id: "test_app".into(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
        server_endpoint: Some("invalid-test-host".into()),
        uploader: None,
        use_core_mps: false,
    };

    let client_info = ClientInfoMetrics {
        app_build: "1.0".into(),
        app_display_version: "1.0".into(),
        app_channel: "test".into(),
        architecture: "x86".into(),
        os: "test_os".into(),
        os_version: "1.0".into(),
        device_manufacturer: "test_manufacturer".into(),
        device_model: "test_model".into(),
    };

    test_reset_glean(cfg.clone(), client_info.clone(), true);

    let data_path = Some(tmpname.to_str().unwrap().to_string());
    glean_test_destroy_glean(true, data_path.clone());

    // Verify that the directory is cleared
    assert!(!tmpname.exists(), "Data path should be cleared");
}
</Rust>