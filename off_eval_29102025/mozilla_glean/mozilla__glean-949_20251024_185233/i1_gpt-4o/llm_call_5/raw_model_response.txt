<Filename>glean-core/src/metrics/labeled.rs</Filename>
<imports>
use super::dynamic_label;
use crate::common_metric_data::CommonMetricData;
use crate::error_recording::record_error;
use crate::error_recording::ErrorType;
use crate::metrics::Metric;
use crate::metrics::MetricType;
use crate::Glean;
</imports>
<Rust>
#[test]
fn test_invalid_label_format() {
    let glean = Glean::new("test_app_id", "test_app_version", "test_channel");
    let meta = CommonMetricData::new("test_category", "test_name", "test_ping");
    let base_identifier = "test_base";
    let label = "1.invalid_label";

    let result = dynamic_label(&glean, &meta, base_identifier, label);

    assert!(result.contains("label must be snake_case"));
}
</Rust>