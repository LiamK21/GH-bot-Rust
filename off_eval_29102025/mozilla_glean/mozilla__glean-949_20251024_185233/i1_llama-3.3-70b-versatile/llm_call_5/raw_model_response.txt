<Filename>glean-core/src/metrics/labeled.rs</Filename>
<imports>
use super::dynamic_label;
use crate::common_metric_data::CommonMetricData;
use crate::error_recording::{ErrorType, record_error};
use crate::Glean;
use std::path::PathBuf;
use crate::event_database::EventDatabase;
use crate::internal_pings::InternalPings;
use crate::common_metric_data::Lifetime;
use chrono::FixedOffset;
use crate::upload::PingUploadManager;
use std::collections::HashMap;
use crate::ping_type::PingType;
use crate::error::Error;
use chrono::DateTime;
</imports>
<Rust>
#[test]
fn test_dynamic_label_regex() {
  let glean = &Glean {
    application_id: "test_app".to_string(),
    core_metrics: crate::core_metrics::CoreMetrics::new(),
    data_path: "/test/data".to_string().into(),
    data_store: None,
    event_data_store: EventDatabase::new("/test/data").expect("Failed to create EventDatabase"),
    internal_pings: InternalPings::new(),
    ping_registry: HashMap::new(),
    start_time: Some(DateTime::from_utc(2022, 1, 1, 0, 0, 0, 0, FixedOffset::east(0))),
    max_events: Some(100),
    is_first_run: false,
    upload_enabled: true,
    upload_manager: Some(PingUploadManager::new()),
  };
  let meta = &CommonMetricData {
    category: "test_category".to_string(),
    disabled: false,
    dynamic_label: None,
    lifetime: Lifetime::Application,
    name: "test_name".to_string(),
    send_in_pings: vec![],
  };
  let base_identifier = "test";
  let label = "test_label";
  let invalid_label = "1test_label";
  assert!(dynamic_label(glean, meta, base_identifier, label).len() > 0);
  assert!(dynamic_label(glean, meta, base_identifier, invalid_label).len() > 0);
}
</Rust>