#[test]
fn test_cow_labels_are_used_correctly() {
    struct DummyMetric;
    impl DummyMetric {
        fn new_labeled(_common: CommonMetricData) -> Self {
            DummyMetric
        }
    }

    let common = CommonMetricData {
        name: "test_name".to_string(),
        category: "test_category".to_string(),
        send_in_pings: vec!["default_ping".to_string()],
        ..Default::default()
    };
    let labels = Some(vec![Cow::from("static_label")]);

    let metric: LabeledMetric<DummyMetric> = LabeledMetric::new_inner(DummyMetric, labels.clone());

    assert_eq!(metric.labels, labels);
}