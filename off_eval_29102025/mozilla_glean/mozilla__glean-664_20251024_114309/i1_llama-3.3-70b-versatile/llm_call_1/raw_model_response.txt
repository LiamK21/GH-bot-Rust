<Filename> glean-core/ffi/src/lib.rs </Filename>
<imports> 
use glean_core::Glean;
use glean_core::Configuration;
use std::sync::Mutex;
use glean_core::global_glean;
use glean_core::setup_glean;
use glean_core::Error;
use glean_core::ffi::FfiConfiguration;
use std::ffi::CString;
use std::os::raw::c_char;
</imports>
<Rust>
#[test]
fn test_glean_initialize() {
  let cfg = FfiConfiguration {
    debug_logger: None,
    data_path: CString::new("/tmp/data").unwrap().into_raw(),
    max_pings: 10,
  };
  let result = unsafe { glean_initialize(&cfg as *const _ as *const FfiConfiguration) };
  assert_eq!(result, 0);
  let glean = global_glean().lock().unwrap();
  assert!(glean.is_some());
}
</Rust>