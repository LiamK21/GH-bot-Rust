<Filename>glean-core/src/metrics/memory_distribution.rs</Filename>
<imports>
use super::MemoryDistributionMetric;
use crate::core::Glean;
use crate::metrics::Metric;
use crate::metrics::memory_distribution::MemoryDistributionMetric;
use crate::database::Database;
use std::sync::Arc;
</imports>
<Rust>
#[test]
fn test_memory_distribution_no_database() {
    let glean = Glean::new(Arc::new(Database::new_in_memory()));
    let metric = MemoryDistributionMetric::new("category", "name", "description", "unit", 0, 100, 10);
    
    // Simulate the condition where the database is not available
    glean.data_store = None;
    
    // This should not panic and should log a warning instead
    metric.accumulate(&glean, 50);
    
    // Since there's no database, we expect no data to be recorded
    let recorded = glean.storage_opt().and_then(|storage| {
        storage.get_metric::<MemoryDistributionMetric>("category.name")
    });
    
    assert!(recorded.is_none());
}
</Rust>