#[test]
fn test_memory_distribution_metric_recording() {
  let glean = Glean::new(Default::default()).unwrap();
  let metric = MemoryDistributionMetric::new("test_metric");
  let sample = 10;
  let meta = metric.meta();

  // Simulate the storage being gone
  glean.data_store = None;

  // Record the metric
  metric.accumulate(sample);

  // Check if a warning was logged
  // Since we can't directly check the log, we'll verify that the metric wasn't recorded
  assert!(glean.storage().get(&meta.base_identifier()).is_none());
}