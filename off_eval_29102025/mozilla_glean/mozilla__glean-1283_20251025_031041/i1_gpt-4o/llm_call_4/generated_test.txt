struct TestLogger {
    log_messages: Mutex<Vec<String>>,
}

impl log::Log for TestLogger {
    fn enabled(&self, metadata: &Metadata) -> bool {
        metadata.level() <= Level::Info
    }

    fn log(&self, record: &Record) {
        if self.enabled(record.metadata()) {
            self.log_messages.lock().unwrap().push(record.args().to_string());
        }
    }

    fn flush(&self) {}
}

#[test]
fn test_recoverable_failure_logging_level() {
    let test_logger = TestLogger {
        log_messages: Mutex::new(Vec::new()),
    };

    log::set_boxed_logger(Box::new(test_logger)).unwrap();
    log::set_max_level(Level::Info.to_level_filter());

    let manager = PingUploadManager::new("test_path", "test_binding");
    manager.handle_upload_result("test_document_id", UploadResult::RecoverableFailure);

    let log_messages = test_logger.log_messages.lock().unwrap();
    assert!(log_messages.iter().any(|msg| msg.contains("Recoverable upload failure while attempting to send ping test_document_id, will retry.")));
}