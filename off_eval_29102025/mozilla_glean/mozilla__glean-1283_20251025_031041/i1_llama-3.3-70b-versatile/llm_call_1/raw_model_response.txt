<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use log::Level;
use log::Log;
use std::io::Cursor;
use super::PingUploadManager;
use super::RecoverableFailure;
use super::HttpStatus;
</imports>
<Rust>
#[test]
fn test_recoverable_upload_failure_logging() {
  let document_id = "957090b3-4e26-4cfc-bfd8-00cbbac42524";
  let status = RecoverableFailure;
  let original_log_level = log::max_level();
  log::set_max_level(Level::Info);
  let mut cursor = Cursor::new(Vec::new());
  simplelog::TermLogger::init(
    simplelog::LevelFilter::Info,
    simplelog::Config::default(),
    simplelog::TerminalMode::Stdout,
    Some(cursor.clone()),
  );
  PingUploadManager::upload(document_id, status);
  let actual_log = String::from_utf8(cursor.into_inner()).unwrap();
  let expected_log = format!("Recoverable upload failure while attempting to send ping {}, will retry. Error was {:?}", document_id, status);
  assert!(actual_log.contains(&expected_log));
  log::set_max_level(original_log_level);
}</Rust>