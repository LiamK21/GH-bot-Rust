#[test]
fn test_block_on_dispatcher_before_init() {
  let metric = BooleanMetric::new(CommonMetricData {
        name: "bool_metric".into(),
        category: "test".into(),
        send_in_pings: vec!["store1".into()],
        lifetime: Lifetime::Application,
        disabled: false,
        dynamic_label: None,
    });
  let result = panic::catch_unwind(|| {
    block_on_dispatcher();
  });
  assert!(result.is_err());
}