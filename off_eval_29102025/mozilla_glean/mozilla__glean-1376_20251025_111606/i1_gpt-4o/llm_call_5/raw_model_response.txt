<Filename>glean-core/rlb/src/private/memory_distribution.rs</Filename>
<imports>
use super::MemoryDistributionMetric;
use glean_core::metrics::MemoryUnit;
use glean_core::CommonMetricData;
use glean_core::traits::MemoryDistribution;
use glean_core::metrics::DistributionData;
use std::collections::HashMap;
use std::cmp::PartialEq;
</imports>
<Rust>
impl PartialEq for DistributionData {
    fn eq(&self, other: &Self) -> bool {
        self.sum == other.sum && self.values == other.values
    }
}

#[test]
fn test_memory_distribution_accumulate() {
    let meta = CommonMetricData {
        name: "test_memory_distribution".into(),
        category: "test".into(),
        send_in_pings: vec!["test_ping".into()],
        ..Default::default()
    };
    let memory_metric = MemoryDistributionMetric::new(meta, MemoryUnit::Byte);

    memory_metric.accumulate(1024);

    let mut expected_values = HashMap::new();
    expected_values.insert(10, 1); // Assuming a bucket for 1024 bytes
    let expected = Some(DistributionData {
        sum: 1024,
        values: expected_values,
    });
    let actual = memory_metric.test_get_value("test_ping");

    assert_eq!(expected, actual);
}
</Rust>