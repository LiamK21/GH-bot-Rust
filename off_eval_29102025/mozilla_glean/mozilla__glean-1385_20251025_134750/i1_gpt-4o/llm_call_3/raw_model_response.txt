<Filename>glean-core/src/upload/mod.rs</Filename>
<imports>
use super::PingUploadManager;
use crate::Glean;
use std::sync::Arc;
use tempfile::tempdir;
use std::path::Path;
</imports>
<Rust>
#[test]
fn test_wait_task_contains_expected_wait_time_when_pending_pings_dir_not_processed_yet() {
    let dir = tempdir().unwrap();
    let glean = Glean::new(Arc::new(crate::Configuration {
        data_path: dir.path().to_path_buf(),
        application_id: "org.mozilla.glean.test".into(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
    }))
    .unwrap();
    let upload_manager = PingUploadManager::new(dir.path(), "test");
    match upload_manager.get_upload_task(&glean, false) {
        PingUploadTask::Wait(time) => {
            assert_eq!(time, WAIT_TIME_FOR_PING_PROCESSING);
        }
        _ => panic!("Expected upload manager to return a wait task!"),
    };
}
</Rust>