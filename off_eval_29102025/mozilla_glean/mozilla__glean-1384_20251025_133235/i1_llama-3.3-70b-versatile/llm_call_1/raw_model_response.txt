<Filename> glean-core/rlb/src/private/datetime.rs </Filename>
<imports> 
use super::DatetimeMetric;
use chrono::prelude::*;
use glean_core::metrics::{Datetime, TimeUnit};
use glean_core::ErrorType;
</imports>
<Rust>
#[test]
fn test_datetime_metric_set_and_get() {
  let metric: DatetimeMetric = DatetimeMetric::new(
    glean_core::CommonMetricData {
      name: "datetime".into(),
      category: "test".into(),
      send_in_pings: vec!["test1".into()],
      ..Default::default()
    },
    TimeUnit::Day,
  );

  let sample_date = FixedOffset::east(0).ymd(2018, 2, 25).and_hms(11, 5, 0);
  metric.set(Some(sample_date));

  let date = metric.test_get_value(None).unwrap();
  let expected_date = FixedOffset::east(0).ymd(2018, 2, 25).and_hms(0, 0, 0);
  assert_eq!(date, expected_date);

  assert_eq!(
    metric.test_get_num_recorded_errors(ErrorType::InvalidValue, None),
    0
  )
}</Rust>