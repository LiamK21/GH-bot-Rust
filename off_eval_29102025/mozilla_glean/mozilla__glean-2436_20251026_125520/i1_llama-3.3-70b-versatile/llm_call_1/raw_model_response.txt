<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use chrono::Utc;
use crate::upload::request::create_date_header_value;
use crate::upload::PingUploadManager;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_date_header_set_at_upload_time() {
  let mut manager = PingUploadManager::new();
  let request = manager.get_upload_task().unwrap();
  let expected_date = create_date_header_value(Utc::now());
  let actual_date = request.request.headers.get("Date").unwrap().to_string();
  assert!(actual_date == expected_date);
}</Rust>