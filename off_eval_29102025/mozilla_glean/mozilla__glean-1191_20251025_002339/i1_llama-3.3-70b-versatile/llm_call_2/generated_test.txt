#[test]
fn test_upload_manager_policies() {
  let (glean, _) = new_glean(None);
  let upload_manager = glean.upload_manager;
  let max_recoverable_failures = upload_manager.policy.max_recoverable_failures();
  let max_wait_attempts = upload_manager.policy.max_wait_attempts();
  let max_ping_body_size = upload_manager.policy.max_ping_body_size();
  let max_pending_pings_directory_size = upload_manager.policy.max_pending_pings_directory_size();

  let expected_max_recoverable_failures = 3;
  let expected_max_wait_attempts = 3;
  let expected_max_ping_body_size = 1024 * 1024;
  let expected_max_pending_pings_directory_size = 10 * 1024 * 1024;

  assert_eq!(max_recoverable_failures, expected_max_recoverable_failures);
  assert_eq!(max_wait_attempts, expected_max_wait_attempts);
  assert_eq!(max_ping_body_size, expected_max_ping_body_size);
  assert_eq!(max_pending_pings_directory_size, expected_max_pending_pings_directory_size);
}