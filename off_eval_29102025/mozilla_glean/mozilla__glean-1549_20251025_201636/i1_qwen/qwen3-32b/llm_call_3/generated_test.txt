#[test]
fn test_record_with_time_trait_compliance() {
    #[derive(Copy, Clone, Eq, Hash, PartialEq)]
    struct TestExtraKeys;

    impl ExtraKeys for TestExtraKeys {
        const ALLOWED_KEYS: &'static [&'static str] = &[];
        fn index(self) -> i32 {
            0
        }
    }

    // Use constructor for CommonMetricData instead of manual struct init
    let common = CommonMetricData::new(
        "category",
        "name",
        vec![],
        Lifetime::App,
        Default::default(),
        false,
    );

    let metric = EventMetric::<TestExtraKeys>::new(common);

    let extra = HashMap::new();
    metric.record_with_time(1234567890, extra);
}