<Filename>glean-core/rlb/src/private/event.rs</Filename>
<imports>
use std::collections::HashMap;
use std::sync::Arc;
use crate::traits::ExtraKeys;
use crate::launch_with_glean;
use glean_core::Glean;
use glean_core::metrics::event::Event;
use super::EventMetric;
</imports>
<Rust>
#[test]
fn test_record_with_time() {
    #[derive(Hash, Eq, PartialEq, Copy, Clone)]
    struct TestKeys;
    impl ExtraKeys for TestKeys {
        const ALLOWED_KEYS: &'static [&'static str] = &[];
        fn index(self) -> i32 { 0 }
    }

    let event_metric = EventMetric::<TestKeys>::new(Arc::new(Event::new(
        "category",
        "name",
        vec![],
        false,
        false,
    )));

    let timestamp = 1234567890;
    let mut extra = HashMap::new();
    extra.insert(1, "value".to_string());

    let expected_timestamp = timestamp;
    let expected_extra = extra.clone();

    crate::launch_with_glean(|glean| {
        event_metric.record_with_time(timestamp, extra);
        let recorded_event = glean.test_get_last_recorded_event("category", "name").unwrap();
        assert_eq!(recorded_event.timestamp, expected_timestamp);
        assert_eq!(recorded_event.extra, Some(expected_extra));
    });
}
</Rust>