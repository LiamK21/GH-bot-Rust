<Filename> glean-core/rlb/src/lib.rs </Filename>
<imports> 
use crate::launch_with_glean;
use std::sync::Arc;
use glean_core::Glean;
use glean_core::metrics::MetricType;
</imports>
<Rust>
#[test]
fn test_launch_with_glean() {
  let glean = Arc::new(Glean::new());
  let metric = glean_core::metrics::BooleanMetric::new("test_metric", glean_core::metrics::MetricType::Boolean);
  let expected = true;
  launch_with_glean(move |glean| metric.set(glean, expected));
  let actual = metric.test_get_value(None);
  assert_eq!(actual, Some(expected));
}
</Rust>