#[test]
fn test_launch_with_glean_sets_flag() {
    let flag = Arc::new(Mutex::new(false));
    let flag_clone = Arc::clone(&flag);

    launch_with_glean(move |_| {
        *flag_clone.lock().unwrap() = true;
    });

    // If the dispatcher executes tasks synchronously, the flag is now true.
    assert!(*flag.lock().unwrap());
}