#[test]
fn test_pretty_body() {
    let original_json = r#"{"a":true,"b":0}"#;
    let original_bytes = original_json.as_bytes();

    // Gzip-compress the original JSON
    let mut encoder = GzEncoder::new(Vec::new(), Compression::default());
    encoder.write_all(original_bytes).unwrap();
    let compressed_data = encoder.finish().unwrap();

    // Build a PingRequest for this test
    let request = PingRequest {
        body: compressed_data,
        path: "test-path".to_string(),
        is_deletion_request: false,
        document_id: None,
    };

    // Get the pretty-printed string
    let pretty = request.pretty_body().unwrap();

    let expected = r#"
{
  "a": true,
  "b": 0
}"#;

    // Ensure pretty formatting worked
    assert_eq!(pretty, expected.trim());
}