#[test]
fn test_missing_send_ids_counter_incremented() {
    let glean = TestGlean::new();
    let document_id = "test_doc";
    let upload_metrics = UploadMetrics::new();

    let mut manager = PingUploadManager {
        upload_metrics,
        ..Default::default()
    };

    // Simulate processing an upload for a document ID that was never tracked
    let status = HttpStatus { code: 200 };
    manager.handle_upload_status(document_id, &status);

    assert_eq!(glean.get_metric("glean.upload.missing_send_ids", None).unwrap(), 1);
}