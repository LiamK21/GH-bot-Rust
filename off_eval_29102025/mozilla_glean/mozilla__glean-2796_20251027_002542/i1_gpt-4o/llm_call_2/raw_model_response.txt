<Filename>glean-core/src/metrics/object.rs</Filename>
<imports>use super::ObjectMetric;
use crate::Glean;
use crate::core::InternalConfiguration;
use crate::core::CommonMetricData;
use serde_json::json;</imports>
<Rust>
#[test]
fn test_set_string_records_valid_json() {
    let cfg = InternalConfiguration::default();
    let glean = Glean::new(cfg).unwrap();
    let meta = CommonMetricData::default();
    let metric = ObjectMetric::new(meta);
    let json_string = r#"{"key": "value"}"#.to_string();

    metric.set_string(json_string.clone());

    let expected = json!({"key": "value"});
    let actual = glean.storage().get(&metric.meta).unwrap();

    assert_eq!(expected, actual);
}</Rust>