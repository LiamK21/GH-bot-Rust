<Filename>glean-core/src/metrics/object.rs</Filename>
<imports>
use super::ObjectMetric;
use crate::Glean;
use crate::common_metric_data::CommonMetricData;
use serde_json::json;
use crate::metrics::Metric;
use crate::storage::StorageManager;
use crate::ErrorType;
use crate::metrics::MetricType;
</imports>
<Rust>
#[test]
fn test_set_string_records_valid_json() {
    let glean = Glean::new(Default::default()).unwrap();
    let meta = CommonMetricData::new("category", "name", None, MetricType::Object, false, None);
    let metric = ObjectMetric::new(meta);
    let json_string = r#"{"key": "value"}"#.to_string();

    metric.set_string(json_string.clone());

    let expected = json!({"key": "value"});
    let actual = glean.storage().get_metric(&metric.meta.identifier(&glean)).unwrap();

    assert_eq!(expected, actual);
}
</Rust>