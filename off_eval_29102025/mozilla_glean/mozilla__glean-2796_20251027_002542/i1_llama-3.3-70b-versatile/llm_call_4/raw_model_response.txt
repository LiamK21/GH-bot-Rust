<Filename>glean-core/src/metrics/object.rs</Filename>
<imports>
use super::ObjectMetric;
use serde_json::json;
use crate::core::Glean;
use crate::metrics::Metric;
use crate::metrics::object::JsonValue;
use crate::storage::Database;
use crate::core::InternalConfiguration;
use crate::metrics::CommonMetricData;
</imports>
<Rust>
#[test]
fn test_object_metric_set_string() {
  let glean = Glean::new(InternalConfiguration::default());
  let metric = ObjectMetric::new(CommonMetricData::new("test_object_metric", "test_object_metric"));
  let object = json!({"key": "value"});
  let object_str = serde_json::to_string(&object).unwrap();
  metric.set_string(object_str.clone());
  let stored_value = glean.storage().get(&metric.meta).unwrap();
  let expected_value = Metric::Object(object_str);
  assert_eq!(stored_value, expected_value);
}
</Rust>