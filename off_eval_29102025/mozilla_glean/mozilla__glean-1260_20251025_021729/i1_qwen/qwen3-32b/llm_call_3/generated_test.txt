#[cfg(feature = "rkv-safe-mode")]
#[test]
fn test_safe_mode_database_creates_correct_file() {
    let dir = TempDir::new().unwrap();
    let db_path = dir.path().to_str().unwrap();
    let db = Database::new(db_path, false).unwrap();
    let expected_path = dir.path().join("data.safe.bin");
    assert!(expected_path.exists(), "Safe mode database file not created");

    // In original code without the patch, LMDB file (data.mdb) is created
    // So this assertion will fail on the original code
    let lmdb_file = dir.path().join("data.mdb");
    assert!(!lmdb_file.exists(), "LMDB file should not exist in safe mode");
}