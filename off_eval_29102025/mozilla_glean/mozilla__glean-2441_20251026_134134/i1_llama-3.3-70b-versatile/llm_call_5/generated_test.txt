#[test]
fn test_record_triggers_upload() {
  let glean = Glean::new(InternalConfiguration {
    data_path: "/tmp/data".to_string(),
    server_endpoint: "https://example.com".to_string(),
    max_events: 1,
    max_pings: 1,
  }).unwrap();
  let event_database = EventDatabase::new(Path::new("/tmp/event_database")).unwrap();
  let meta = CommonMetricDataInternal::new("category", "name", "ping_name");
  let timestamp: u64 = 1;
  let extra = Some(HashMap::new());
  let sent = event_database.record(&glean, &meta, timestamp, extra);
  assert!(sent);
}