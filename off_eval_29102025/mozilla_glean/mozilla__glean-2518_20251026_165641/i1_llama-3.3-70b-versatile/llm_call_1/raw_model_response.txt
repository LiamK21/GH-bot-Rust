<Filename> glean-core/src/lib.rs </Filename>
<imports> 
use std::thread;
use std::time::Duration;
use super::shutdown;
use super::initialize_inner;
use super::uploader_shutdown;
use super::was_initialize_called;
use super::core;
use super::dispatcher;
use super::InternalConfiguration;
use super::ClientInfoMetrics;
use super::OnGleanEvents;
</imports>
<Rust>
#[test]
fn test_shutdown_before_init() {
  // Initialize required variables
  let cfg = InternalConfiguration {};
  let client_info = ClientInfoMetrics {};
  let callbacks: Box<dyn OnGleanEvents> = Box::new(());

  // Define expected variable
  let expected_log = "Shutdown called before Glean is initialized";

  // Generate actual variables
  initialize_inner(cfg, client_info, callbacks);
  let handle = thread::spawn(move || {
    thread::sleep(Duration::from_millis(100));
    shutdown();
  });
  handle.join().unwrap();

  // Compare expected with actual
  // This test will fail if the shutdown function does not log the expected message
  // when called before init.
}</Rust>