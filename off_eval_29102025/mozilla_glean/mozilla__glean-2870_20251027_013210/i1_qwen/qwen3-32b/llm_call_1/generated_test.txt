#[test]
fn test_no_migration_occurs() {
    let dir = tempdir().unwrap();
    let db_path = dir.path().join("db");
    fs::create_dir_all(&db_path).unwrap();

    // Create LMDB files with test data
    let rkv_db = Rkv::new::<Lmdb>(&db_path).unwrap();
    let store = rkv_db.open_single("ping", StoreOptions::create()).unwrap();
    let mut writer = rkv_db.write().unwrap();
    store.put(&mut writer, "key", &rkv::Value::Blob(b"value")).unwrap();
    writer.commit().unwrap();

    // Initialize database which would trigger migration in previous versions
    let _ = super::Database::new(dir.path(), false, 0, std::time::Duration::ZERO).unwrap();

    // Verify LMDB files were NOT deleted
    assert!(Path::new(&db_path).join("data.mdb").exists());
    assert!(Path::new(&db_path).join("lock.mdb").exists());

    // Verify safe-mode files were NOT created
    assert!(!Path::new(&db_path).join("data.safe.bin").exists());
}