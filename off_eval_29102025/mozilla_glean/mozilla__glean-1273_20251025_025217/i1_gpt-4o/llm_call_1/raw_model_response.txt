<Filename>glean-core/rlb/src/private/boolean.rs</Filename>
<imports>
use std::sync::Arc;
use super::BooleanMetric;
use crate::dispatcher;
use crate::glean_core::metrics::BooleanMetric as CoreBooleanMetric;
use crate::glean_core::CommonMetricData;
</imports>
<Rust>
#[test]
fn test_boolean_metric_set_dispatches_off_main_thread() {
    let meta = CommonMetricData {
        name: "test_metric".into(),
        category: "test_category".into(),
        send_in_pings: vec!["test_ping".into()],
        lifetime: glean_core::Lifetime::Ping,
        disabled: false,
        ..Default::default()
    };
    let boolean_metric = BooleanMetric::new(meta);
    let core_boolean_metric = Arc::clone(&boolean_metric.0);

    boolean_metric.set(true);

    dispatcher::block_on_queue();

    let actual = core_boolean_metric.test_get_value("test_ping");
    assert_eq!(actual, Some(true));
}
</Rust>