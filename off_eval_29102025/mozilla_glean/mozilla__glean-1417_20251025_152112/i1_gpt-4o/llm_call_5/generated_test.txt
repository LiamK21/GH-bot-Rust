#[test]
fn test_timing_distribution_methods() {
    let config = Configuration {
        application_id: "test_app_id".into(),
        language_binding_name: "test_channel".into(),
        upload_enabled: false,
        max_events: None,
        delay_ping_lifetime_io: false,
    };
    let glean = Glean::new(config).unwrap();
    let metric_data = CommonMetricData {
        name: "name".into(),
        category: "category".into(),
        send_in_pings: vec!["test_send_in_pings".into()],
        lifetime: glean_core::Lifetime::Ping,
        disabled: false,
    };
    let metric = TimingDistributionMetric(Arc::new(RwLock::new(CoreTimingDistributionMetric::new(metric_data, TimeUnit::Nanosecond))));

    let timer_id = metric.start();
    sleep(Duration::from_millis(10));
    metric.stop_and_accumulate(timer_id);

    let expected = 0;
    let actual = glean.test_get_num_recorded_errors("test_send_in_pings", "category.name", ErrorType::InvalidValue).unwrap();

    assert_eq!(expected, actual);
}