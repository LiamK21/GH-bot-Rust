#[test]
fn test_timing_distribution_methods() {
    let config = Configuration {
        application_id: "test_app_id".into(),
        language_binding_name: "test_channel".into(),
        ..Default::default()
    };
    let glean = Glean::new(config).unwrap();
    let metric_data = CommonMetricData {
        name: "name".into(),
        category: "category".into(),
        send_in_pings: vec!["test_send_in_pings".into()],
        ..Default::default()
    };
    let metric = TimingDistributionMetric(Arc::new(RwLock::new(CoreTimingDistributionMetric::new(metric_data, TimeUnit::Nanosecond))));

    let timer_id = metric.start();
    sleep(Duration::from_millis(10));
    metric.stop_and_accumulate(timer_id);

    let expected = 0;
    let actual = test_get_num_recorded_errors(&glean, "test_send_in_pings", "category.name").unwrap();

    assert_eq!(expected, actual);
}