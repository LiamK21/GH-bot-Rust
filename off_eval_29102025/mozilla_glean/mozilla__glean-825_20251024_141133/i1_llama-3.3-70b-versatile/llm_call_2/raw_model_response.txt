<Filename>glean-core/src/upload/mod.rs</Filename>
<imports>
use std::sync::{Arc, RwLock};
use std::collections::VecDeque;
use log::trace;
use super::PingUploadManager;
use super::PingRequest;
</imports>
<Rust>
#[test]
fn test_deletion_request_ping_queue_clearing() {
  let ping_upload_manager = PingUploadManager::new(Arc::new(RwLock::new(VecDeque::new())), None, None);
  let ping_request1 = PingRequest { uuid: "1".to_string(), path: "path1".to_string(), body: serde_json::json!({}), headers: None };
  let ping_request2 = PingRequest { uuid: "2".to_string(), path: "path2".to_string(), body: serde_json::json!({}), headers: None };
  let ping_request3 = PingRequest { uuid: "3".to_string(), path: "path3".to_string(), body: serde_json::json!({}), headers: None };
  ping_upload_manager.enqueue_ping("1", "path1", serde_json::json!({}));
  ping_upload_manager.enqueue_ping("2", "path2", serde_json::json!({}));
  ping_upload_manager.enqueue_ping("3", "path3", serde_json::json!({}));
  let expected_queue_len = 3;
  let actual_queue_len = ping_upload_manager.clear_ping_queue().len();
  assert_eq!(expected_queue_len, actual_queue_len);
}
</Rust>