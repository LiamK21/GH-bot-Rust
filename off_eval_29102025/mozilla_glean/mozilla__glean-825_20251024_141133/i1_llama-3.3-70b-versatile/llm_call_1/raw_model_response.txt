<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use super::PingUploadManager;
use std::sync::RwLockWriteGuard;
use std::collections::VecDeque;
use super::PingRequest;
use log::trace;
</imports>
<Rust>
#[test]
fn test_deletion_request_ping_queue_clearing() {
  let ping_upload_manager = PingUploadManager { queue: RwLockWriteGuard::new(VecDeque::new()) };
  let ping_request1 = PingRequest { uuid: "1".to_string(), path: "path1".to_string(), is_deletion_request: true };
  let ping_request2 = PingRequest { uuid: "2".to_string(), path: "path2".to_string(), is_deletion_request: false };
  let ping_request3 = PingRequest { uuid: "3".to_string(), path: "path3".to_string(), is_deletion_request: true };
  ping_upload_manager.enqueue_ping("1", "path1", serde_json::json!({}));
  ping_upload_manager.enqueue_ping("2", "path2", serde_json::json!({}));
  ping_upload_manager.enqueue_ping("3", "path3", serde_json::json!({}));
  let expected_queue_len = 2;
  let actual_queue_len = ping_upload_manager.clear_ping_queue().len();
  assert_eq!(expected_queue_len, actual_queue_len);
}
</Rust>