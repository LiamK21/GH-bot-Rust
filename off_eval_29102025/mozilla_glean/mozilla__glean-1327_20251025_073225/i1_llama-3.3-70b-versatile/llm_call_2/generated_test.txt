#[test]
fn test_labeled_metric() {
  let _lock = lock_test();
  let _t = new_glean(None, true);
  let metric: LabeledMetric<CounterMetric> = LabeledMetric::new(
    CommonMetricData {
      name: "labeled_counter".into(),
      category: "labeled".into(),
      send_in_pings: vec!["test1".into()],
      ..Default::default()
    },
    None,
  );
  metric.get("label1").add(1);
  metric.get("label2").add(2);
  assert_eq!(1, metric.get("label1").test_get_value("test1").unwrap());
  assert_eq!(2, metric.get("label2").test_get_value("test1").unwrap());
}