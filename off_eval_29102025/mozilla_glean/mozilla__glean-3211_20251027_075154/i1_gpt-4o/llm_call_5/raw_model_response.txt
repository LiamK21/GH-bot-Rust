<Filename>glean-core/src/histogram/mod.rs</Filename>
<imports>
use super::Histogram;
use crate::histogram::LinearOrExponential;
use crate::histogram::PrecomputedLinear;
use std::collections::HashMap;
use once_cell::sync::OnceCell;
</imports>
<Rust>
#[test]
fn test_merge_saturating_add() {
    let mut histogram1 = Histogram {
        bucketing: LinearOrExponential::Linear(PrecomputedLinear { bucket_ranges: OnceCell::new(), min: 0, max: 1, bucket_count: 1 }),
        sum: u64::MAX,
        count: u64::MAX,
        values: HashMap::new(),
    };
    let histogram2 = Histogram {
        bucketing: LinearOrExponential::Linear(PrecomputedLinear { bucket_ranges: OnceCell::new(), min: 0, max: 1, bucket_count: 1 }),
        sum: 1,
        count: 1,
        values: [(0, 1)].iter().cloned().collect(),
    };
    histogram1.merge(&histogram2);
    assert_eq!(histogram1.sum, u64::MAX);
    assert_eq!(histogram1.count, u64::MAX);
    assert_eq!(histogram1.values.get(&0), Some(&1));
}
</Rust>