#[test]
fn test_merge_saturating_add() {
    let mut histogram1 = Histogram {
        bucketing: LinearOrExponential::Linear(1),
        sum: u32::MAX,
        count: u32::MAX,
        values: HashMap::new(),
    };
    let histogram2 = Histogram {
        bucketing: LinearOrExponential::Linear(1),
        sum: 1,
        count: 1,
        values: [(0, 1)].iter().cloned().collect(),
    };
    histogram1.merge(&histogram2);
    assert_eq!(histogram1.sum, u32::MAX);
    assert_eq!(histogram1.count, u32::MAX);
    assert_eq!(histogram1.values.get(&0), Some(&1));
}