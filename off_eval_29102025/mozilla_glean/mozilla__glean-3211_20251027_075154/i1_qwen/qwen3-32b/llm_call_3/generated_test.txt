#[test]
fn test_merge_saturating_addition() {
    let precomputed_bucketing = PrecomputedLinear {
        bucket_ranges: vec![0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
        bucket_count: 11,
    };
    let bucketing = LinearOrExponential::Linear(precomputed_bucketing);
    let mut h1 = Histogram {
        bucketing: bucketing,
        sum: u64::MAX,
        count: u64::MAX,
        values: Default::default(),
    };
    let h2 = Histogram {
        bucketing: bucketing,
        sum: 1,
        count: 1,
        values: [(10, 1)].iter().cloned().collect(),
    };
    h1.merge(&h2);
    assert_eq!(h1.sum, u64::MAX);
    assert_eq!(h1.count, u64::MAX);
    assert_eq!(h1.values.get(&10).copied(), Some(1));
}