#[test]
fn test_merge_saturating_addition() {
    let bucketing = Linear {
        min: 1,
        max: 100,
        num_buckets: 10,
    };
    let mut h1 = Histogram {
        bucketing: LinearOrExponential::Linear(bucketing.clone()),
        sum: u32::MAX,
        count: u32::MAX,
        values: Default::default(),
    };
    let h2 = Histogram {
        bucketing: LinearOrExponential::Linear(bucketing),
        sum: 1,
        count: 1,
        values: [(1, 1)].iter().cloned().collect(),
    };
    h1.merge(&h2);
    assert_eq!(h1.sum, u32::MAX);
    assert_eq!(h1.count, u32::MAX);
    assert_eq!(h1.values.get(&1).copied(), Some(1));
}