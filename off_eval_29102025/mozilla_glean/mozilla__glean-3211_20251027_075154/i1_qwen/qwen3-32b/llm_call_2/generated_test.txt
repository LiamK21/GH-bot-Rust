#[test]
fn test_merge_saturating_addition() {
    let precomputed_bucketing = PrecomputedLinear {
        min: 1,
        max: 100,
        num_buckets: 10,
    };
    let bucketing = LinearOrExponential::Linear(precomputed_bucketing);
    let mut h1 = Histogram {
        bucketing: bucketing.clone(),
        sum: u64::MAX,
        count: u64::MAX,
        values: Default::default(),
    };
    let h2 = Histogram {
        bucketing: bucketing,
        sum: 1,
        count: 1,
        values: [(1, 1)].iter().cloned().collect(),
    };
    h1.merge(&h2);
    assert_eq!(h1.sum, u64::MAX);
    assert_eq!(h1.count, u64::MAX);
    assert_eq!(h1.values.get(&1).copied(), Some(1));
}