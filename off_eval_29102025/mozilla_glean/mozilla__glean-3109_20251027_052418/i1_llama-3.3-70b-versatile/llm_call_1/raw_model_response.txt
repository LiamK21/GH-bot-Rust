<Filename> glean-core/src/lib.rs </Filename>
<imports> 
use super::glean_set_collection_enabled;
use super::glean_set_ping_enabled;
use super::register_ping_type;
use super::glean_apply_server_knobs_config;
use super::glean_set_dirty_flag;
use super::glean_get_debug_view_tag;
use super::glean_submit_ping_by_name_sync;
use super::glean_set_source_tags;
use super::glean_set_log_pings;
use super::glean_update_attribution;
use super::glean_update_distribution;
use super::glean_test_get_attribution;
</imports>
<Rust>
#[test]
fn test_glean_init_race() {
  glean_set_collection_enabled(true);
  let ping = "test_ping";
  register_ping_type(&ping.to_string());
  glean_apply_server_knobs_config("{}".to_string());
  glean_set_dirty_flag(true);
  let tag = glean_get_debug_view_tag();
  glean_submit_ping_by_name_sync("test_ping".to_string(), None);
  glean_set_source_tags(vec!["tag1".to_string(), "tag2".to_string()]);
  glean_set_log_pings(true);
  glean_update_attribution(Default::default());
  glean_update_distribution(Default::default());
  let attribution = glean_test_get_attribution();
  assert!(attribution.is_default());
}</Rust>