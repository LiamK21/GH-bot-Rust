#[test]
fn test_subprocess_upload_handling() {
    let config = FfiConfiguration {
        data_dir: FfiStr::from_str("/tmp/glean-test"),
        package_name: FfiStr::from_str("test-app"),
        language_binding_name: FfiStr::from_str("python"),
        upload_enabled: 1,
        max_events: 100,
        delay_ping_lifetime_io: 0,
    };

    unsafe {
        let init_result = glean_initialize_for_subprocess(&config);
        assert_eq!(init_result, 1);

        let mut task: *mut FfiPingUploadTask = ptr::null_mut();
        glean_get_upload_task(&mut task, 1);

        if !task.is_null() {
            glean_process_ping_upload_response(task, 200);
        }
    }
}