#[test]
fn test_subprocess_upload_handling() {
    let config = FfiConfiguration {
        data_dir: CString::new("/tmp/glean-test").unwrap().into_raw() as *const c_char,
        package_name: CString::new("test-app").unwrap().into_raw() as *const c_char,
        language_binding_name: CString::new("python").unwrap().into_raw() as *const c_char,
        delay_ping_lifetime_io: 0,
    };

    unsafe {
        let init_result = glean_initialize_for_subprocess(&config);
        assert_eq!(init_result, 1);

        let mut task: FfiPingUploadTask = ptr::null_mut();
        glean_get_upload_task(&mut task, 1);

        glean_process_ping_upload_response(&mut task as *mut _, 200);
    }
}