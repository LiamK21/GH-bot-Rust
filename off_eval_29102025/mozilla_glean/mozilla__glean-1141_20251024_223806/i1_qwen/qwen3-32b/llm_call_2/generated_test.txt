#[test]
fn records_database_file_size() {
    let _ = env_logger::builder().is_test(true).try_init();
    let dir = tempfile::tempdir().unwrap();
    let tmpname = dir.path().display().to_string();
    // First initialization to create the database and ensure data file exists
    let glean = Glean::with_options(&tmpname, "glean", true).unwrap();
    drop(glean);
    // Re-initialize to capture the file size metric
    let glean = Glean::with_options(&tmpname, "glean", true).unwrap();
    let database_size = &glean.database_metrics.size;
    let data = database_size.test_get_value(&glean, "metrics");
    assert!(data.is_some());
    let data = data.unwrap();
    assert!(data.sum > 0);
}