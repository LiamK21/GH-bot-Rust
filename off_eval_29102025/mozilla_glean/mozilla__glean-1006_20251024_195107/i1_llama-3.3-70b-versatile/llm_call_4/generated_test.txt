#[test]
fn test_rate_limiter_set_on_standalone_uploader() {
  let data_dir = "test_data_dir";
  let c_str = CString::new(data_dir).unwrap();
  let data_dir_ffi = FfiStr::from_cstr(&c_str);
  let mut upload_manager = PingUploadManager::new(data_dir.to_string(), true);
  let expected_rate_limiter = None;
  let actual_rate_limiter = upload_manager.get_rate_limiter();
  assert_eq!(actual_rate_limiter, expected_rate_limiter);
  glean_initialize_standalone_uploader(data_dir_ffi);
  let expected_rate_limiter = Some((60, 10));
  let mut upload_manager = PingUploadManager::new(data_dir.to_string(), true);
  glean_initialize_standalone_uploader(data_dir_ffi);
  let actual_rate_limiter = upload_manager.get_rate_limiter();
  assert_eq!(actual_rate_limiter, expected_rate_limiter);
}