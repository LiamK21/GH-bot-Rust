#[test]
fn test_standalone_uploader_rate_limiter() {
    let data_dir = CString::new("/tmp").unwrap();
    let ffi_str = FfiStr::from_cstr(data_dir.as_c_str());
    let result = unsafe { glean_initialize_standalone_uploader(ffi_str) };
    assert_eq!(result, 1);

    let upload_manager = PingUploadManager::new("/tmp".to_string(), true);
    let rate_limiter = upload_manager.get_rate_limiter();
    assert!(rate_limiter.is_some());

    let rate_limiter = rate_limiter.unwrap();
    assert_eq!(rate_limiter.seconds_per_interval(), 60);
    assert_eq!(rate_limiter.max_tasks_per_interval(), 10);
}