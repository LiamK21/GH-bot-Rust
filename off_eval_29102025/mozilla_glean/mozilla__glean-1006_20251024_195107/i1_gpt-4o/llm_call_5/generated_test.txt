#[test]
fn test_standalone_uploader_rate_limiter() {
    let data_dir = CString::new("/tmp").unwrap();
    let ffi_str = FfiStr::from_cstr(data_dir.as_c_str());
    let result = unsafe { glean_initialize_standalone_uploader(ffi_str) };
    assert_eq!(result, 1);

    let upload_manager = PingUploadManager::new("/tmp".to_string(), true);
    let rate_limiter = RateLimiter::new(60, 10);
    upload_manager.set_rate_limiter(60, 10);

    let actual_rate_limiter = upload_manager.get_rate_limiter().unwrap();
    assert_eq!(actual_rate_limiter.seconds_per_interval(), rate_limiter.seconds_per_interval());
    assert_eq!(actual_rate_limiter.max_tasks_per_interval(), rate_limiter.max_tasks_per_interval());
}