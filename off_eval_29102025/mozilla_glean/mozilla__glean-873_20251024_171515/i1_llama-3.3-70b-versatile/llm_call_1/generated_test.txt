#[test]
fn test_glean_version_logging() {
  let _ = SimpleLogger::init(Level::Info, Config::default());
  let glean = Glean::new(crate::Configuration {
    application_id: "test".to_string(),
    data_path: "/tmp/glean_test".to_string(),
    ..Default::default()
  }).unwrap();
  let mut captured = Cursor::new(Vec::new());
  let _ = log::set_max_level(LevelFilter::Info);
  let _ = log::set_logger(&mut captured).map_err(|e| e as LogSetLoggerError);
  info!("Creating new Glean");
  let mut actual = String::new();
  captured.seek(std::io::SeekFrom::Start(0)).unwrap();
  captured.read_to_string(&mut actual).unwrap();
  let expected = format!("Creating new Glean v{}", env!("CARGO_PKG_VERSION"));
  assert!(actual.contains(&expected));
}