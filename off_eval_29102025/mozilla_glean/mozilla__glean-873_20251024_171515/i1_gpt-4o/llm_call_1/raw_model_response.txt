<Filename>glean-core/src/lib.rs</Filename>
<imports>
use super::Glean;
use crate::Configuration;
use log::Level;
use log::Log;
use log::Metadata;
use log::Record;
use std::sync::Mutex;
</imports>
<Rust>
#[test]
fn test_log_glean_version_on_initialization() {
    struct TestLogger {
        logs: Mutex<Vec<String>>,
    }

    impl Log for TestLogger {
        fn enabled(&self, metadata: &Metadata) -> bool {
            metadata.level() <= Level::Info
        }

        fn log(&self, record: &Record) {
            if self.enabled(record.metadata()) {
                self.logs.lock().unwrap().push(format!("{}", record.args()));
            }
        }

        fn flush(&self) {}
    }

    let test_logger = TestLogger {
        logs: Mutex::new(Vec::new()),
    };

    log::set_boxed_logger(Box::new(test_logger)).unwrap();
    log::set_max_level(log::LevelFilter::Info);

    let cfg = Configuration {
        application_id: "test_app".into(),
        data_path: "test_path".into(),
        upload_enabled: true,
        max_events: None,
    };

    let _ = Glean::new(cfg);

    let logs = log::logger().downcast_ref::<TestLogger>().unwrap().logs.lock().unwrap();
    let expected_log = format!("Creating new Glean v{}", crate::GLEAN_VERSION);
    assert!(logs.iter().any(|log| log.contains(&expected_log)));
}
</Rust>