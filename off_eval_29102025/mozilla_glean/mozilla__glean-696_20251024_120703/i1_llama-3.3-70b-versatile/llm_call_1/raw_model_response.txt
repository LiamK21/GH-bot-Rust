<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use super::PingUploadManager;
use std::thread;
use std::time::Duration;
use tempfile::tempdir;
</imports>
<Rust>
#[test]
fn test_get_upload_task_returns_wait_when_processing_pending_pings() {
  let dir = tempdir().unwrap();
  let tmpname = dir.path().display().to_string();
  let upload_manager = PingUploadManager::new(&tmpname);
  let upload_task = upload_manager.get_upload_task();
  assert_eq!(upload_task, PingUploadTask::Wait);
  thread::sleep(Duration::from_millis(10));
  let upload_task = upload_manager.get_upload_task();
  assert_ne!(upload_task, PingUploadTask::Wait);
}</Rust>