#[test]
fn test_shutdown_sends_remaining_pings() {
    let cfg = InternalConfiguration::default();
    let client_info = ClientInfoMetrics::default();
    let callbacks = Box::new(MockCallbacks::new());
    let glean = Arc::new(Mutex::new(None));

    glean_initialize(cfg, client_info, callbacks);

    // Simulate some pings being queued
    {
        let mut glean_lock = glean.lock().unwrap();
        *glean_lock = Some("queued_pings");
    }

    glean_shutdown();

    let glean_lock = glean.lock().unwrap();
    let expected = None;
    let actual = *glean_lock;

    assert_eq!(expected, actual);
}