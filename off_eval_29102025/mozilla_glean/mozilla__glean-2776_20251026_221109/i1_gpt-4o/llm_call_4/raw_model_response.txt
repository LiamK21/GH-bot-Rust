<Filename>glean-core/src/metrics/event.rs</Filename>
<imports>
use super::EventMetric;
use crate::core::Glean;
use crate::CommonMetricData;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_remove_glean_timestamp_in_test_mode() {
    let glean = Glean::new(Default::default()).unwrap();
    let common_metric_data = CommonMetricData {
        name: "name".into(),
        category: "category".into(),
        send_in_pings: vec!["test".into()],
        ..Default::default()
    };
    let event_metric = EventMetric::new(common_metric_data, vec!["glean_timestamp".into()]);

    let mut extra = HashMap::new();
    extra.insert("glean_timestamp".to_string(), "123456789".to_string());
    event_metric.record(extra);

    let expected: Option<Vec<RecordedEvent>> = Some(vec![RecordedEvent {
        timestamp: 0,
        category: "category".to_string(),
        name: "name".to_string(),
        extra: None,
    }]);

    let actual = event_metric.test_get_value(Some("test".into()));

    assert_eq!(expected, actual);
}
</Rust>