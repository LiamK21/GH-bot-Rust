<Filename>glean-core/src/upload/request.rs</Filename>
<imports>
use std::collections::HashMap;
use super::create_x_telemetry_agent_header_value;
use super::Builder;
</imports>
<Rust>
#[test]
fn test_x_telemetry_agent_header_inclusion() {
  let language_binding_name = "Rust";
  let body_max_size = 1024;
  let mut builder = Builder::new(language_binding_name, body_max_size);
  builder.path = Some("test_path".to_string());
  builder.document_id = Some("test_document_id".to_string());
  builder.body = Some("test_body".as_bytes().to_vec());
  let request = builder.build().unwrap();
  let expected_header_key = "X-Telemetry-Agent";
  let actual_header = request.headers;
  assert!(actual_header.contains_key(expected_header_key));
  let expected_header_value = create_x_telemetry_agent_header_value("0.0.0", language_binding_name, "Windows");
  assert_eq!(actual_header.get(expected_header_key), Some(&expected_header_value));
}
</Rust>