#[test]
fn test_deletion_request_pings_are_not_processed_before_patch() {
  let dir = PathBuf::from("/tmp/glean_test");
  fs::create_dir_all(&dir).unwrap();
  let directory_manager = PingDirectoryManager::new(&dir);
  let pending_pings_path = dir.join("pending_pings");
  fs::create_dir_all(&pending_pings_path).unwrap();
  let pending_ping_path = pending_pings_path.join(Uuid::new_v4().to_string());
  let mut file = fs::File::create(&pending_ping_path).unwrap();
  file.write_all(b"valid ping contents").unwrap();
  let deletion_request_pings_path = dir.join("deletion_request");
  fs::create_dir_all(&deletion_request_pings_path).unwrap();
  let deletion_request_ping_path = deletion_request_pings_path.join(Uuid::new_v4().to_string());
  let mut file = fs::File::create(&deletion_request_ping_path).unwrap();
  file.write_all(b"valid ping contents").unwrap();
  let requests = directory_manager.process_dir();
  assert_eq!(requests.len(), 1);
}