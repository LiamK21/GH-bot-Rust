<Filename> glean-core/src/upload/directory.rs </Filename>
<imports> 
use super::PingDirectoryManager;
use std::path::PathBuf;
use std::fs;
use std::io;
use uuid::Uuid;
</imports>
<Rust>
#[test]
fn test_deletion_request_pings_are_processed() {
  let dir = PathBuf::from("/tmp/glean_test");
  fs::create_dir_all(&dir).unwrap();
  let directory_manager = PingDirectoryManager::new(&dir);
  let deletion_request_ping_path = dir.join("deletion_request").join(Uuid::new_v4().to_string());
  fs::create_dir_all(deletion_request_ping_path.parent().unwrap()).unwrap();
  let mut file = fs::File::create(&deletion_request_ping_path).unwrap();
  file.write_all(b"valid ping contents").unwrap();
  let requests = directory_manager.process_dir();
  assert_eq!(requests.len(), 1);
}</Rust>