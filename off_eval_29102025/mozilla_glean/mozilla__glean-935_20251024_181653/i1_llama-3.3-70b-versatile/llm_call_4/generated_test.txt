#[test]
fn test_log_if_error() {
  let error = ExternError::new_error(1, "Test error message");
  struct TestLogger;
  impl log::Log for TestLogger {
    fn enabled(&self, _metadata: &log::Metadata) -> bool {
      true
    }
    fn log(&self, record: &log::Record) {
      if record.level() == Level::Error {
        // Test passes if error level is logged
      } else if record.level() == Level::Warn {
        panic!("Test panic, expected error level");
      }
    }
    fn flush(&self) {}
  }
  let _ = panic::catch_unwind(|| {
    log::set_max_level(LevelFilter::Error);
    let _ = Logger::from_env("info");
    log_if_error(error);
  });
}