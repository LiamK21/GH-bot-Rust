#[test]
fn test_tasks_after_shutdown_are_not_processed() {
  let dispatcher = Dispatcher::new();
  let result = Arc::new(Mutex::new(Vec::new()));
  dispatcher.guard().shutdown().unwrap();
  {
      let result_clone = Arc::clone(&result);
      let _ = dispatcher.guard().launch(move || {
          result_clone.lock().unwrap().push(0);
      });
  }
  dispatcher.join().unwrap();
  assert!(result.lock().unwrap().is_empty());
}