#[test]
fn test_snapshot_values_does_not_infill_zeros() {
    let bucket_config = PrecomputedLinear {
        min: 10,
        max: 30,
        bucket_count: 3,
    };
    let mut hist = Histogram::new(bucket_config);
    hist.record(15); // Falls into the first bucket [10,20)
    hist.record(35); // Falls into the third bucket [30, ...)

    let snapshot = hist.snapshot_values();
    assert_eq!(snapshot.len(), 2); // Only 10 and 30 buckets are populated
    assert!(snapshot.contains_key(&10));
    assert!(snapshot.contains_key(&30));
    assert!(!snapshot.contains_key(&20));
}