#[test]
fn test_metrics_enabled_config_inversion() {
    let glean = crate::new_glean(None, None, false, None, None, None, None);

    let metrics_enabled_config = json!(
        {
            "category.string_metric": false,
            "category.labeled_string_metric": false,
        }
    )
    .to_string();
    glean_set_metrics_enabled_config(metrics_enabled_config);

    let experiment_data = glean_test_get_experiment_data("category.string_metric".to_string());
    assert!(experiment_data.is_none());
}