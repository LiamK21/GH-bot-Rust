#[test]
fn test_set_string_api_with_null_values() {
  let metric: ObjectMetric<std::collections::HashMap<String, String>> = ObjectMetric::new(Default::default());
  let arr_str = json!({
    "key1": "value1",
    "key2": null,
  })
  .to_string();
  metric.set_string(arr_str);
  let data = metric.test_get_value(None);
  let expected = json!({
    "key1": "value1"
  });
  assert_eq!(expected, data.unwrap());
  assert_eq!(
    0,
    metric.test_get_num_recorded_errors(ErrorType::InvalidValue)
  );
}