#[test]
fn test_client_info_os_version_used() {
    let glean = Glean::new("test".to_string());
    let client_info = ClientInfoMetrics {
        os_version: "10.15.7".to_string(),
        architecture: "x86_64".to_string(),
        ..Default::default()
    };

    // Initialize core metrics with the client info
    initialize_core_metrics(&glean, &client_info);

    // Check that os_version was set from client_info instead of system detection
    assert_eq!(
        core_metrics::internal_metrics::os_version.get_value(&glean),
        Some("10.15.7".to_string())
    );
}