<Filename> glean-core/src/database/mod.rs </Filename>
<imports> 
use super::rkv_new;
use std::path::Path;
use tempfile::tempdir;
use std::fs;
use std::io::Write;
</imports>
<Rust>
#[test]
fn test_rkv_load_state_on_broken_database() {
  let dir = tempdir().unwrap();
  let safebin = dir.path().join("data.safe.bin");
  fs::write(safebin, "<broken>").expect("write to database file");
  let (rkv, load_state) = rkv_new(dir.path()).unwrap();
  assert!(matches!(load_state, super::RkvLoadState::Err(_)));
}</Rust>