<Filename>glean-core/src/lib_unit_tests.rs</Filename>
<imports>
use super::rkv_new;
use crate::database::RkvLoadState;
use std::fs::File;
use std::path::Path;
use tempfile::tempdir;
</imports>
<Rust>
#[test]
fn test_rkv_load_state_error_handling() {
    let dir = tempdir().unwrap();
    let safebin = dir.path().join("data.safe.bin");
    File::create(&safebin).expect("create database file");

    let result = rkv_new(dir.path());

    let expected = true;
    let actual = matches!(result, Ok((_, RkvLoadState::Err(_))));

    assert_eq!(expected, actual);
}
</Rust>