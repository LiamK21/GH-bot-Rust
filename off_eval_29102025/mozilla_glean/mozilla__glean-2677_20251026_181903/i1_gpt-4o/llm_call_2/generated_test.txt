#[test]
fn test_rkv_load_state_error_handling() {
    let dir = tempdir().unwrap();
    let safebin = dir.path().join("data.safe.bin");
    fs::write(&safebin, "<broken>").expect("write to database file");

    let result = rkv_new(dir.path());

    let expected = true;
    let actual = matches!(result, Ok((_, RkvLoadState::Err(_))));

    assert_eq!(expected, actual);
}