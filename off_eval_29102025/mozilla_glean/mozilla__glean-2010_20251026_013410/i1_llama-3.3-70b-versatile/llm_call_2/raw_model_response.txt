<Filename>glean-core/src/upload/request.rs</Filename>
<imports>
use super::Builder;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_removed_legacy_headers() {
  let mut builder = Builder::new("test", 100);
  let request = builder.build().unwrap();
  let expected_headers: HashMap<String, String> = [
    ("Content-Type".to_string(), "application/json; charset=utf-8".to_string()),
  ].iter().cloned().collect();
  let actual_headers: HashMap<String, String> = request.headers.iter().cloned().collect();
  assert!(!actual_headers.contains_key("X-Client-Type"));
  assert!(!actual_headers.contains_key("X-Client-Version"));
  assert_eq!(expected_headers, actual_headers);
}
</Rust>