#[test]
fn test_process_ping_upload_response_returns_end_on_done() {
    let _lock = lock_test();
    let dir = tempdir().unwrap();
    let dir_path = dir.path().to_path_buf();
    let config = Configuration {
        data_path: dir_path,
        application_id: "test-app".into(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
        server_endpoint: Some("http://example.com/pings".into()),
        ..Default::default()
    };
    glean_init(&config);

    let uuid = "test-uuid".into();
    let result = UploadResult::done();
    let action = ::glean_process_ping_upload_response(uuid, result);
    assert_eq!(action, UploadTaskAction::End);
}