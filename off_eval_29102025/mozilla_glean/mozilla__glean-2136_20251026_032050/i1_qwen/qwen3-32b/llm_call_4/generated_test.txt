#[test]
fn test_process_ping_upload_returns_end_on_done() {
    let dir = tempdir().unwrap();
    let config = Configuration {
        data_path: dir.path().to_path_buf(),
        application_id: "test-app".as_bytes().to_vec(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
        server_endpoint: Some("http://example.com/pings".into()),
        ..Default::default()
    };
    let mut glean = Glean::new(config).unwrap();

    let result = UploadResult::done();
    let action = glean.process_ping_upload_response("test-uuid", result);

    assert_eq!(action, UploadTaskAction::End);
    fs::remove_dir_all(dir.path()).unwrap();
}