#[test]
fn test_accumulate_samples_signed_doesnt_record_when_should_not() {
    let glean = Glean::new("test_app_id", "test_app_version", "test_channel", None, None, None);
    let metric_data = CommonMetricData::new("category", "name", "test-storage");
    let custom_distribution = CustomDistributionMetric::new(metric_data, vec![]);

    glean.set_upload_enabled(false);

    custom_distribution.accumulate_samples_signed(&glean, vec![1, 2, 3]);

    let recorded_data = glean.test_get_metric("category", "name", "test-storage");
    assert!(recorded_data.is_none());
}