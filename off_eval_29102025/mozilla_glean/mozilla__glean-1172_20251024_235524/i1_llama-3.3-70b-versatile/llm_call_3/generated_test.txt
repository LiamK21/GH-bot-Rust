#[test]
fn test_accumulate_samples_signed_doesnt_record_when_upload_is_disabled() {
  let (mut glean, _dir) = new_glean(None);
  let meta = CommonMetricData::new("category", "name", "test_storage");
  let mut metric = CustomDistributionMetric::new(meta, 0, 100, 10, HistogramType::Linear);
  glean.set_upload_enabled(false);
  let samples = vec![1, 2, 3];
  metric.accumulate_samples_signed(&glean, samples);
  let expected = HashMap::new();
  let actual = metric.get_histogram().unwrap();
  assert_eq!(expected, actual);
}