<Filename>glean-core/src/metrics/custom_distribution.rs</Filename>
<imports>
use super::CustomDistributionMetric;
use crate::tests::new_glean;
use crate::Glean;
use crate::CommonMetricData;
use crate::histogram::HistogramType;
</imports>
<Rust>
#[test]
fn test_accumulate_samples_signed_doesnt_record_when_upload_is_disabled() {
  let (mut glean, _dir) = new_glean(None);
  let meta = CommonMetricData::new("category", "name", "test_storage");
  let metric = CustomDistributionMetric::new(meta, 0, 100, 10, HistogramType::Linear);
  glean.set_upload_enabled(false);
  let samples = vec![1, 2, 3];
  metric.accumulate_samples_signed(&glean, samples);
  // Since upload is disabled, no error should be recorded for negative samples
  // We can't directly check if an error was recorded, but we can verify that the metric's state didn't change
  // For this test, we can't assert anything about the metric's state, because the metric's state is private.
  // However, we can verify that the function doesn't panic, which is the expected behavior when upload is disabled.
}
</Rust>