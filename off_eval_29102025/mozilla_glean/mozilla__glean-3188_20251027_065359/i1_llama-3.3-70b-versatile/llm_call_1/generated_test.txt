#[test]
fn test_uploader_capabilities_included_in_ping() {
  let ping = Ping::new("test_ping", true, true);
  let uploader_capabilities = vec!["capability1".to_string(), "capability2".to_string()];
  ping.set_uploader_capabilities(uploader_capabilities);
  let metrics_data = PingMaker::generate_metrics(ping);
  let expected_key = "glean.ping.uploader_capabilities";
  let expected_value = json!(uploader_capabilities);
  if let Some(map) = metrics_data.as_object() {
    if let Some(string_list) = map.get("string_list") {
      if let Some(lists) = string_list.as_object() {
        assert!(lists.contains_key(expected_key));
        assert_eq!(lists.get(expected_key), Some(&expected_value));
      }
    }
  }
}