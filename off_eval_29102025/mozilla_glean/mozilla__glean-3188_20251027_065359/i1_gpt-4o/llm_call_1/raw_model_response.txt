<Filename>glean-core/src/ping/mod.rs</Filename>
<imports>
use super::PingMaker;
use serde_json::json;
use crate::ping::Ping;
</imports>
<Rust>
#[test]
fn test_uploader_capabilities_instrumentation() {
    let mut ping = Ping::new("test_ping", true, true, vec!["ohttp".to_string()]);
    let mut ping_maker = PingMaker::new();
    
    let expected = json!({
        "string_list": {
            "glean.ping.uploader_capabilities": ["ohttp"]
        }
    });

    ping_maker.add_uploader_capabilities(&mut ping);
    let actual = ping_maker.metrics_data.unwrap();

    assert_eq!(expected, actual);
}
</Rust>