#[test]
fn test_record_error_availability() {
    let common_data = CommonMetricData {
        name: "test_metric".into(),
        category: None,
        send_in_pings: Vec::new(),
        disabled: std::sync::atomic::AtomicU8::new(0),
        ..Default::default()
    };
    let meta_data = CommonMetricDataInternal {
        inner: Arc::new(common_data),
    };

    struct TestMetric {
        meta_data: CommonMetricDataInternal,
    }

    impl MetricType for TestMetric {
        type Meta = CommonMetricDataInternal;

        fn meta(&self) -> &Self::Meta {
            &self.meta_data
        }
    }

    let metric = TestMetric { meta_data };
    metric.record_error(ErrorType::InvalidValue, 1);
}