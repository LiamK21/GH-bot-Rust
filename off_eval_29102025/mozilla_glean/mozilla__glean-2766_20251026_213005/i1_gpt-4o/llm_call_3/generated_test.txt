#[test]
fn test_record_error() {
    let glean = Arc::new(Glean::new(crate::InternalConfiguration {
        app_id: "test_app_id".into(),
        app_version: "test_app_version".into(),
        channel: "test_channel".into(),
        build_id: "test_build_id".into(),
        data_path: None,
        upload_enabled: true,
    }).unwrap());

    let metric = CounterMetric::new(CommonMetricData {
        name: "test_name".into(),
        category: "test_category".into(),
        send_in_pings: vec!["test_send_in_pings".into()],
        lifetime: crate::Lifetime::Ping,
        disabled: false,
        ..Default::default()
    });

    let error_type = ErrorType::InvalidValue;
    let count = 1;

    let expected_error_count = 1;

    metric.record_error(error_type, count);

    let actual_error_count = error_recording::get_error_count(glean, &metric, error_type);

    assert_eq!(expected_error_count, actual_error_count);
}