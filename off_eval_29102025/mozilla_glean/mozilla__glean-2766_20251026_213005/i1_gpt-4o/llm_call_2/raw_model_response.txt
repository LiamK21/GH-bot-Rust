<Filename>glean-core/src/metrics/mod.rs</Filename>
<imports>
use super::MetricType;
use crate::error_recording;
use crate::ErrorType;
use crate::metrics::CounterMetric;
use crate::Glean;
use std::sync::Arc;
</imports>
<Rust>
#[test]
fn test_record_error() {
    let glean = Arc::new(Glean::new("test_app_id", "test_app_version", "test_channel", "test_build_id", true));
    let metric = CounterMetric::new("test_category", "test_name", "test_send_in_pings", "test_description", "test_lifetime", "test_disabled");
    let error_type = ErrorType::InvalidValue;
    let count = 1;

    let expected_error_count = 1;

    metric.record_error(error_type, count);

    let actual_error_count = error_recording::get_error_count(glean, &metric, error_type);

    assert_eq!(expected_error_count, actual_error_count);
}
</Rust>