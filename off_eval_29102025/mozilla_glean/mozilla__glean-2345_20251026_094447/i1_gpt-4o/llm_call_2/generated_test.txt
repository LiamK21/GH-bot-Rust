#[test]
fn test_config_option_support() {
    let udl_file = "test.udl";
    let config_file = "config.toml";
    let out_dir = "out";

    fs::write(udl_file, "interface Test {}").unwrap();
    fs::write(config_file, "[config]").unwrap();
    fs::create_dir_all(out_dir).unwrap();

    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg(udl_file)
        .arg("--config")
        .arg(config_file)
        .arg("--out-dir")
        .arg(out_dir)
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());

    let generated_file = Path::new(out_dir).join("Test.rs");
    assert!(generated_file.exists());

    fs::remove_file(udl_file).unwrap();
    fs::remove_file(config_file).unwrap();
    fs::remove_dir_all(out_dir).unwrap();
}