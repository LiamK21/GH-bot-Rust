#[test]
fn test_keyed_categorical_counter() {
    let metric = glean_metrics::test_dual_labeled::static_static.get("key1", "category1");
    metric.add(1);
    assert_eq!(Some(1), metric.test_get_value(None));

    let invalid_metric = glean_metrics::test_dual_labeled::static_static.get("invalid_key", "invalid_category");
    invalid_metric.add(1);
    let other_metric = glean_metrics::test_dual_labeled::static_static.get("__other__", "__other__");
    assert_eq!(Some(1), other_metric.test_get_value(None));

    assert_eq!(
        1,
        glean_metrics::test_dual_labeled::static_static.test_get_num_recorded_errors(ErrorType::InvalidLabel)
    );
}