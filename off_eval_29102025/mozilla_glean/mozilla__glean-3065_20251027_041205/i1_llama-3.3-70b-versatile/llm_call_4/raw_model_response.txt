<Filename>glean-core/build/src/lib.rs</Filename>
<imports>
use std::error::Error;
use super::Builder;
</imports>
<Rust>
#[test]
fn test_ohttp_ping_upload() {
  let glean_parser_version = "16.1.0";
  let expected_error = "OHTTP pings are only supported on Firefox Desktop";
  let uploader = "non-desktop";
  let ping_type = "ohttp";

  let builder = Builder::new();
  let result = builder.validate_ping_upload(ping_type, uploader, glean_parser_version);

  assert!(result.is_err());
  assert_eq!(result.unwrap_err().to_string(), expected_error);
}
</Rust>