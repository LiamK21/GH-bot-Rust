#[test]
fn test_configure_ping_throttling_rate_limit() {
    let mut cfg = Configuration {
        application_id: String::new(),
        data_path: PathBuf::new(),
        delay_ping_lifetime_io: false,
        log_level: None,
        rate_limit: None,
        upload_enabled: true,
        max_events: None,
        server_endpoint: None,
        uploader: None,
        use_core_mps: false,
        trim_data_to_registered_pings: false,
    };
    configure_ping_throttling();
    let expected_rate_limit = Some(PingRateLimit {
        seconds_per_interval: 1,
        pings_per_interval: 10,
    });
    assert_eq!(cfg.rate_limit, expected_rate_limit);
}