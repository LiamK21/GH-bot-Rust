#[test]
fn test_first_run_hour_resolution() {
  let (mut glean, _) = new_glean(None);
  let original_first_run_date = glean.core_metrics.first_run_date.get_value(&glean, "glean_client_info");
  let original_first_run_hour = glean.core_metrics.first_run_hour.get_value(&glean, "metrics");
  glean.set_upload_enabled(false);
  let new_first_run_date = glean.core_metrics.first_run_date.get_value(&glean, "glean_client_info");
  let new_first_run_hour = glean.core_metrics.first_run_hour.get_value(&glean, "metrics");
  assert_ne!(original_first_run_date, new_first_run_date);
  assert_ne!(original_first_run_hour, new_first_run_hour);
  let duration = new_first_run_hour.unwrap().signed_duration_since(new_first_run_date.unwrap());
  let num_seconds = duration.num_seconds();
  assert!(num_seconds.abs() < 3601);
  let hour1 = new_first_run_date.unwrap().hour();
  let hour2 = new_first_run_hour.unwrap().hour();
  assert_eq!(hour1, hour2);
}