#[test]
fn test_activity_api_behavior() {
    let dir = tempdir().unwrap();
    let cfg = Configuration {
        data_path: dir.path().display().to_string(),
        application_id: "test_app".into(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
        channel: Some("testing".into()),
        server_endpoint: Some("http://localhost".into()),
        uploader: None,
    };
    let (mut glean, _) = Glean::new(cfg, ClientInfoMetrics::unknown());

    handle_client_active(&mut glean);
    assert!(glean.is_dirty_flag_set());

    handle_client_inactive(&mut glean);
    assert!(!glean.is_dirty_flag_set());
}