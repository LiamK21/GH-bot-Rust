<Filename>glean-core/src/lib_unit_tests.rs</Filename>
<imports>
use super::Glean;
use super::handle_client_active;
use super::handle_client_inactive;
use tempfile::tempdir;
use crate::Configuration;
</imports>
<Rust>
#[test]
fn test_activity_api_behavior() {
    let dir = tempdir().unwrap();
    let cfg = Configuration {
        data_path: dir.path().display().to_string(),
        application_id: "test_app".into(),
        upload_enabled: true,
        max_events: None,
        delay_ping_lifetime_io: false,
        language_binding_name: "rust".into(),
    };
    let mut glean = Glean::new(cfg).unwrap();

    handle_client_active();
    assert!(glean.is_dirty_flag_set());

    handle_client_inactive();
    assert!(!glean.is_dirty_flag_set());
}
</Rust>