#[test]
fn test_database_initialization_with_empty_path() {
    let dir = tempfile::tempdir().unwrap();
    let database_dir = dir.path().join("db");
    fs::create_dir_all(&database_dir).unwrap();

    // Create an empty safe-mode file to mimic a previous failed state
    let safebin = database_dir.join("data.safe.bin");
    File::create(safebin).unwrap();

    let res = Database::new(dir.path(), false);
    assert!(res.is_ok(), "Database should succeed with safe-mode enabled");
}