#[test]
fn test_ast_parser_language_detection() {
    let mut app = test::init_service(App::new().route("/ast", web::post().to(ast_parser)));
    let payload = json!({
        "id": "1234",
        "file_name": "example.cpp",
        "code": "int x = 1;",
        "comment": true,
        "span": true
    });
    let req = test::TestRequest::post()
        .uri("/ast")
        .set_json(&payload)
        .to_request();
    let resp: HttpResponse = test::call_service(&mut app, req);
    assert!(resp.status().is_success());
}