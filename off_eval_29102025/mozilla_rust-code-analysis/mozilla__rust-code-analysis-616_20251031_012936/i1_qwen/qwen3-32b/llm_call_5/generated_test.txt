#[test]
fn test_macro_annotations_on_class() {
    let source = "class MOZ_STACK_CLASS JS_PUBLIC_API AutoEntryMonitor { };";
    let mut parser = Parser::new();
    let cxx_lang = unsafe { language() };
    parser.set_language(cxx_lang).unwrap();
    let tree = parser.parse(source, None).unwrap();
    let root_node = tree.root_node();

    let mut class_specifier_node = None;

    // Find the class_specifier node
    let mut node = root_node.walk();
    for child in root_node.children(&mut node) {
        if child.is_named() && child.kind() == "class_specifier" {
            class_specifier_node = Some(child);
            break;
        }
    }

    let class_specifier = class_specifier_node.expect("No class_specifier node found");
    let macro_annotations: Vec<_> = class_specifier
        .children(&mut tree_sitter::TreeCursor::new(class_specifier))
        .filter(|child| child.kind() == "macro_annotation")
        .collect();

    assert_eq!(macro_annotations.len(), 2, "Expected 2 macro annotations");

    let type_identifier = class_specifier
        .children(&mut tree_sitter::TreeCursor::new(class_specifier))
        .find(|child| child.kind() == "type_identifier");

    assert!(type_identifier.is_some(), "Expected a type_identifier node");
}