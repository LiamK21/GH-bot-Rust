#[test]
fn test_dump_json_stdout() {
    let mock_space = FuncSpace {
        name: Some("test_func"),
        start_line: 1,
        end_line: 10,
        kind: SpaceKind::Function,
        spaces: vec![],
        metrics: CodeMetrics {
            nargs: fn_args::Stats { n_args: 3 },
            nexits: exit::Stats { exit: 2 },
            cyclomatic: cyclomatic::Stats { edges: 5, nodes: 3 },
            halstead: halstead::Stats {
                u_operators: 0,
                total_operators: 0,
                u_operands: 0,
                total_operands: 0,
            },
            loc: loc::Stats {
                source_lines: 10,
                logical_lines: 7,
                comment_lines: 2,
                blank_lines: 1,
            },
            nom: nom::Stats {
                functions: 1,
                closures: 0,
            },
            mi: mi::Stats {
                mi_original: 0.0,
                mi_sei: 0.0,
                mi_visual_studio: 0.0,
            },
        },
    };
    let path = PathBuf::from("test_path.rs");
    let output_path = None;
    let output_format = Format::Json;
    let pretty = false;

    assert!(dump_formats(&mock_space, &path, &output_path, output_format, pretty).is_ok());
}