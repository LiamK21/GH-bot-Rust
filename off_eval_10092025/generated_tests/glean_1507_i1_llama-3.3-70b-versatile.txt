#[test]
fn test_custom_ping_before_submission() {
  let ping = PingType::new("custom_ping", true, true, vec![]);
  let callback_called = Arc::new(Mutex::new(false));
  let callback_called_clone = Arc::clone(&callback_called);
  ping.test_before_next_submit(move |_| {
    *callback_called_clone.lock().unwrap() = true;
  });
  ping.submit(None);
  assert_eq!(*callback_called.lock().unwrap(), true);
}