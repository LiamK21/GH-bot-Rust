#[test]
fn test_event_emission() {
    let mut conn = Http3Connection::new_client(Connection::default());
    conn.state = Http3State::Connected;

    // Trigger some events
    conn.handle_stream_reset(1, Error::RequestRejected.code());
    conn.handle_stream_creatable(StreamType::BiDi);

    // Collect events
    let events = conn.events();

    // Verify specific events are present
    assert!(events.contains(&Http3Event::Reset { stream_id: 1, error: Error::RequestRejected }));
    assert!(events.contains(&Http3Event::RequestsCreatable));
}