#[test]
fn test_send_datagram() {
  let socket = Socket {};
  let datagram = Datagram {
      src: "127.0.0.1:1234".parse().unwrap(),
      dst: "127.0.0.1:5678".parse().unwrap(),
      tos: 0,
      ttl: None,
      d: vec![1, 2, 3],
      segment_size: None,
  };
  let result_before_patch = socket.send(datagram.clone());
  assert!(result_before_patch.is_err());
  let result_after_patch = socket.send(&datagram);
  assert!(result_after_patch.is_ok());
}