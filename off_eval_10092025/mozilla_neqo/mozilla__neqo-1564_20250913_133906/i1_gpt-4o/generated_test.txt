#[test]
fn test_stream_handler_type_download_closes_stream() {
    let mut client = Http3Client::new();
    let client_stream_id = StreamId::new(1);
    let url = Url::parse("https://example.com").unwrap();
    let args = Args { output_dir: PathBuf::from("/tmp") };
    let mut all_paths = Vec::new();

    let handler_type = StreamHandlerType::Download;
    let handler = handler_type.create_handler(&url, &args, &mut all_paths, &mut client, client_stream_id);

    assert!(client.is_stream_closed(client_stream_id));
}