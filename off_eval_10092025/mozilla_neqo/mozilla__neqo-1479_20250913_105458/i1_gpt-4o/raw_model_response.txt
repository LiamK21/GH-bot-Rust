<Filename>neqo-transport/src/cc/classic_cc.rs</Filename>
<imports>
use super::ClassicCongestionControl;
use crate::cc::{CongestionControl, NewReno, CWND_INITIAL_PKTS, MAX_DATAGRAM_SIZE};
use crate::packet::PacketType;
use crate::tracking::SentPacket;
use std::time::{Duration, Instant};
</imports>
<Rust>
#[test]
fn test_ack_ranges_affect_cwnd() {
    let mut cc = ClassicCongestionControl::new(NewReno::default());
    let mut now = Instant::now();
    let rtt = Duration::from_millis(100);
    let mut next_pn = 0;

    // Send packets to fill the initial congestion window
    for _ in 0..CWND_INITIAL_PKTS {
        let p = SentPacket::new(
            PacketType::Short,
            next_pn,
            now,
            true,
            Vec::new(),
            MAX_DATAGRAM_SIZE,
        );
        next_pn += 1;
        cc.on_packet_sent(&p);
    }

    // Acknowledge packets in multiple ranges
    let mut pkts = Vec::new();
    for _ in 0..5 {
        let p = SentPacket::new(
            PacketType::Short,
            next_pn,
            now,
            true,
            Vec::new(),
            MAX_DATAGRAM_SIZE,
        );
        next_pn += 1;
        cc.on_packet_sent(&p);
        pkts.push(p);
    }

    now += rtt;
    cc.on_packets_acked(&pkts, rtt, now);

    // Check if congestion window increased
    assert!(cc.congestion_window > CWND_INITIAL_PKTS * MAX_DATAGRAM_SIZE);
}
</Rust>