#[test]
fn test_retry_token_set_on_valid_retry() {
    let mut conn = Connection::new_client("example.com", &["alpn"], Rc::new(RefCell::new(FixedConnectionIdManager::new(0))), Rc::new(RefCell::new(FixedConnectionIdManager::new(0))), now());
    let hdr = PacketHdr::new(PacketType::Retry, 0, 0, 0, 0, Some(ConnectionId::from(&[0; 8])), Some(ConnectionId::from(&[1; 8])), 0, 0);
    let token = vec![1, 2, 3, 4];
    let path = Path::new(ConnectionId::from(&[0; 8]), SocketAddr::new(IpAddr::V4(Ipv4Addr::LOCALHOST), 443), SocketAddr::new(IpAddr::V4(Ipv4Addr::LOCALHOST), 443));

    conn.handle_retry(&hdr, &token, &path).unwrap();

    assert_eq!(conn.retry_token, Some(token));
}