#[test]
fn test_session_id_validation() {
    // Test case 1: Session ID is not client-initiated.
    {
        let mut conn = connection_test::server_connection().unwrap();
        let stream_id = StreamId::from(1);
        conn.receive_stream(stream_id, None, NewStreamType::Bidi).unwrap();
        conn.process_received_data().unwrap();
        assert_eq!(conn.get_error(), Some(Error::HttpId));
    }

    // Test case 2: Session ID is client-initiated but not bidirectional.
    {
        let mut conn = connection_test::server_connection().unwrap();
        let stream_id = StreamId::from(2);
        conn.receive_stream(stream_id, None, NewStreamType::Uni).unwrap();
        conn.process_received_data().unwrap();
        assert_eq!(conn.get_error(), Some(Error::HttpId));
    }

    // Test case 3: Session ID exceeds allowed limit.
    {
        let mut conn = connection_test::server_connection().unwrap();
        conn.set_max_stream_id(0).unwrap();
        let stream_id = StreamId::from(1);
        conn.receive_stream(stream_id, None, NewStreamType::Bidi).unwrap();
        conn.process_received_data().unwrap();
        assert_eq!(conn.get_error(), Some(Error::HttpId));
    }
}