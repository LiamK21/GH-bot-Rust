<Filename> neqo-transport/src/connection.rs </Filename>
<imports> 
use super::Connection;
use neqo_common::ConnectionEvent;
use neqo_transport::Connection;
use neqo_transport::test_fixture::fixture_init;
use neqo_transport::test_fixture::loopback;
use neqo_transport::test_fixture::now;
</imports>
<Rust>
#[test]
fn test_zero_rtt_rejected() {
  let mut client = Connection::new_client("::1", &["hq-22"]);
  let mut server = Connection::new_server("::1", &["hq-22"]);
  let server_hs = server.handshake(now()).unwrap();
  client.process(server_hs.dgram(), now()).unwrap();
  let client_fin = client.process(server_hs.dgram(), now()).unwrap();
  server.process(client_fin.dgram(), now()).unwrap();
  let stream_id = client.stream_create(neqo_transport::frame::StreamType::UniDi).unwrap();
  assert_eq!(stream_id, 0);
  let msg = &[1, 2, 3];
  client.stream_send(stream_id, msg).unwrap();
  let client_out = client.process(None, now()).unwrap();
  assert!(client_out.as_dgram_ref().is_some());
  server.process(client_out.dgram(), now()).unwrap();
  assert!(server.events().any(|e| matches!(e, ConnectionEvent::NewStream { .. })));
}
</Rust>