<Filename>neqo-bin/src/server/mod.rs</Filename>
<imports>
use super::ServerRunner;
use std::net::SocketAddr;
use std::time::Instant;
use crate::udp::Socket;
use std::pin::Pin;
use tokio::time::Sleep;
use std::io;
use neqo_common::Datagram;
</imports>
<Rust>
#[test]
fn test_process_inner_no_allocation() {
    let mut server: Box<dyn super::HttpServer> = Box::new(MockHttpServer::new());
    let mut timeout: Option<Pin<Box<Sleep>>> = None;
    let mut sockets: Vec<(SocketAddr, Socket)> = vec![(SocketAddr::from(([127, 0, 0, 1], 8080)), Socket::new())];
    let now = || Instant::now();
    let input_dgram: Option<Datagram<&[u8]>> = None;

    let result = ServerRunner::process_inner(&mut server, &mut timeout, &mut sockets, &now, input_dgram);

    assert!(result.is_ok());
}

struct MockHttpServer;

impl MockHttpServer {
    fn new() -> Self {
        MockHttpServer
    }
}

impl super::HttpServer for MockHttpServer {
    fn process(&mut self, _dgram: Option<Datagram<&[u8]>>, _now: Instant) -> super::Output {
        super::Output::None
    }
    fn process_events(&mut self, _now: Instant) {}
    fn has_events(&self) -> bool {
        false
    }
}
</Rust>