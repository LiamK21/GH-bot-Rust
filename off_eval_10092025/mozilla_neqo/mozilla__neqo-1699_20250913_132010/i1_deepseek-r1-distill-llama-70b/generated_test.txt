#[test]
fn test_init_does_nothing_when_static_max_level_off() {
    // Set STATIC_MAX_LEVEL to Off
    let original = set_max_level(LevelFilter::Off);
    assert_eq!(STATIC_MAX_LEVEL, LevelFilter::Off);

    // Test init does nothing
    init();

    // Verify no logging occurs
    let (sender, receiver) = std::sync::mpsc::channel();
    let _ = env_logger::Builder::from_env("RUST_LOG=trace")
        .format(|buf, record| {
            sender.send(record.level()).unwrap();
            buf
        })
        .init();

    init();

    // Test dump_packet does nothing
    dump_packet(
        &Default::default(),
        &PathBuf::from("test"),
        "test",
        PacketType::Unknown,
        0,
        &[],
    );

    // Verify no logs were captured
    assert!(receiver.recv_timeout(std::time::Duration::from_millis(100)).is_err());
}