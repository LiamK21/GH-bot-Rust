#[test]
fn test_resume_behavior() {
    let mut args = Args {
        resume: true,
        download_in_series: false,
        use_old_http: false,
        ..Default::default()
    };

    let urls = vec!["url1".to_string(), "url2".to_string(), "url3".to_string()];
    args.urls = urls.clone();

    let result = main();

    // Before patch: all URLs are popped front when resume is true
    // After patch: only first URL is popped front on the first iteration
    assert!(result.is_ok());
    assert_eq!(args.urls.len(), urls.len() - 1);
}