#[test]
fn test_http_stream_type_with_invalid_frame() {
    let mut reader = NewStreamHeadReader::new(StreamType::BiDi, Role::Server);
    let mut conn = neqo_transport::Connection::new_client(
        "example.com",
        &[&"alpn"],
        neqo_transport::CongestionControlAlgorithm::NewReno,
    )
    .unwrap();
    conn.stream_create(StreamType::BiDi).unwrap();
    conn.stream_send(0, &[0x4]).unwrap(); // Send an invalid frame type (H3_FRAME_TYPE_SETTINGS)
    let result = reader.receive(&mut conn);
    assert!(matches!(result, Err(crate::Error::HttpFrame)));
}