#[test]
fn test_new_stream_type_reader_with_settings_frame() {
  let mut conn = Connection::new();
  let mut reader = NewStreamHeadReader::new(&mut conn, StreamType::BiDi, Role::Server);
  let expected = Err(crate::Error::HttpFrame);
  let actual = reader.receive(&mut conn);
  let settings_frame = HFrame::Settings { ..Default::default() };
  let mut input = Vec::new();
  input.extend_from_slice(&H3_FRAME_TYPE_SETTINGS.0.to_be_bytes());
  input.extend_from_slice(&settings_frame.encode().unwrap());
  conn.input(input);
  assert_eq!(actual, expected);
}