#[test]
fn test_persistent_congestion_ignores_pre_rtt_packets() {
    let mut cc = CongestionControl::default();
    let rtt = Duration::from_millis(100);
    let sent_packets = vec![
        SentPacket::new(
            0,
            0,
            Instant::now() - Duration::from_secs(1),
            true,
            Rc::default(),
            1000,
        ),
        SentPacket::new(
            1,
            1,
            Instant::now(),
            true,
            Rc::default(),
            1000,
        ),
    ];

    let first_rtt = Instant::now();
    cc.detect_persistent_congestion(
        Some(first_rtt),
        Some(Instant::now()),
        Duration::from_millis(100),
        &sent_packets,
    );

    assert_eq!(cc.cwnd(), CWND_INITIAL);
}