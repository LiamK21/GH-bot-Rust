<Filename>neqo-transport/src/connection.rs</Filename>
<imports>
use super::Connection;
use crate::test_fixture::{self, default_client, default_server, connect};
use crate::Output;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_callback_time_after_pto() {
    let mut client = default_client();
    let mut server = default_server();
    connect(&mut client, &mut server);

    let mut now = test_fixture::now();

    // Simulate the client sending and entering PTO.
    let _ = client.process(None, now);

    // Advance time to trigger PTO.
    now += Duration::from_secs(1);
    let out = client.process(None, now);

    // Ensure the client is in PTO and has packets to send.
    assert!(matches!(out, Output::Callback(_)));

    // Simulate receiving a packet from the server after PTO.
    let dgram = server.process(None, now).dgram();
    let out = client.process(dgram, now);

    // Check that the client does not return a 0ms callback time.
    assert!(!matches!(out, Output::Callback(Duration::from_millis(0))));
}
</Rust>