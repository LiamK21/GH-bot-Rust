#[test]
fn test_server_version_information_failed() {
    let mut qlog = NeqoQlog::new();
    let server_versions = vec![Version::default()];
    let client_version = WireVersion::default();

    server_version_information_failed(&mut qlog, &server_versions, client_version);

    let events = qlog.events();
    assert!(!events.is_empty());
    if let Some(event) = events.last() {
        if let Some(data) = &event.data {
            if let EventData::VersionInformation(info) = data {
                assert_eq!(info.client_versions, Some(vec![format!("{:02x}", client_version)]));
                assert_eq!(info.server_versions, Some(server_versions.iter().map(|v| format!("{:02x}", v.wire_version())).collect()));
                assert!(info.chosen_version.is_none());
            } else {
                panic!("Expected VersionInformation event data");
            }
        } else {
            panic!("Event data is missing");
        }
    } else {
        panic!("No events logged");
    }
}