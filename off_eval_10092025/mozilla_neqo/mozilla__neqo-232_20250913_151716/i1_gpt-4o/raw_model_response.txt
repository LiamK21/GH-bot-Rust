<Filename>neqo-transport/src/events.rs</Filename>
<imports>
use super::ConnectionEvents;
use crate::connection::State;
use crate::stream_id::StreamId;
</imports>
<Rust>
#[test]
fn test_event_ordering() {
    let evts = ConnectionEvents::default();

    evts.new_stream(StreamId::from(4));
    evts.connection_state_change(State::Connected);

    let mut events = evts.events().collect::<Vec<_>>();
    assert_eq!(events.len(), 2);

    if let ConnectionEvent::StateChange(State::Connected) = events.remove(0) {
        if let ConnectionEvent::NewStream { stream_id, .. } = events.remove(0) {
            assert_eq!(stream_id, 4);
        } else {
            panic!("Expected NewStream event");
        }
    } else {
        panic!("Expected StateChange event");
    }
}
</Rust>