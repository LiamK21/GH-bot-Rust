<Filename>neqo-transport/src/connection.rs</Filename>
<imports>
use super::Connection;
use std::time::{Duration, Instant};
use neqo_common::Datagram;
use neqo_transport::State;
</imports>
<Rust>
#[test]
fn test_idle_timeout_expires() {
    let mut client = Connection::new_client(
        "example.com",
        &["alpn"],
        Rc::new(RefCell::new(FixedConnectionIdManager::new(0))),
        Rc::new(RefCell::new(EmptyConnectionIdManager::new())),
        &CongestionControlAlgorithm::NewReno,
    )
    .unwrap();

    let now = Instant::now();
    client.process_output(now);

    // Simulate passage of time to trigger idle timeout
    client.process_timer(now + Duration::from_secs(61));

    // Check if the connection state is Closing due to idle timeout
    assert!(matches!(client.state(), State::Closing { .. }));
}
</Rust>