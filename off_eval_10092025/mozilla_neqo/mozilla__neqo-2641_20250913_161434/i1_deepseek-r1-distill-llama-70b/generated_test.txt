#[test]
fn test_check_delays_retries() {
    // Simulate the first few validations failing and then succeeding
    let mut failure_count = 0;
    let max_lag = Duration::from_millis(10);

    // We expect it to succeed on the third attempt
    let result = check_delays(max_lag);
    assert!(result.is_ok());
}