#[test]
fn test_process_output_triggers_timer() {
    let mut conn = Connection::new();
    let now = Instant::now();
    let output_before = conn.process_output(now);
    assert!(matches!(output_before, Output::Callback(_)));

    let later = now + Duration::from_secs(1);
    let output_after = conn.process_output(later);
    assert!(matches!(output_after, Output::Callback(_)));
}