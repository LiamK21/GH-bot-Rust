<Filename> neqo-http3/src/connection_client.rs </Filename>
<imports>
use super::TransactionClient;
use crate::hframe::HFrame;
use crate::client_events::Http3ClientEvents;
use neqo_transport::Connection;
use neqo_qpack::decoder::QPackDecoder;
use std::vec::Vec;
</imports>
<Rust>
#[test]
fn test_response_stream_state() {
    let mut client = TransactionClient::new(1, Http3ClientEvents::new());
    let mut decoder = QPackDecoder::new();
    let mut conn = Connection::new(1);
    client.send_state = TransactionClient::TransactionSendState::Closed;
    let header_block = vec![0x01, 0x02, 0x03, 0x04];
    let hframe = HFrame::Headers { header_block };
    let mut enc = Vec::new();
    hframe.encode(&mut enc);
    conn.stream_send(1, &enc).unwrap();
    client.response_stream.receive(&mut conn, &mut decoder).unwrap();
    let (headers, fin) = client.read_response_headers().unwrap();
    assert_eq!(fin, false);
    let trailers = vec![0x01, 0x02, 0x03, 0x04];
    let hframe = HFrame::Headers { header_block: trailers };
    let mut enc = Vec::new();
    hframe.encode(&mut enc);
    conn.stream_send(1, &enc).unwrap();
    client.response_stream.receive(&mut conn, &mut decoder).unwrap();
    let (len, fin) = client.read_response_data(&mut conn, &mut [0u8; 100]).unwrap();
    assert_eq!(len, 0);
    assert_eq!(fin, true);
}
</Rust>