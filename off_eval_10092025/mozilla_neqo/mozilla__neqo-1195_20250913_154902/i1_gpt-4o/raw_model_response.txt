<Filename> neqo-client/src/main.rs </Filename>
<imports> 
use super::Handler;
use neqo_transport::Http3Client;
use neqo_transport::Http3ClientEvent;
use std::collections::HashMap;
use std::time::Instant;
</imports>
<Rust>
#[test]
fn test_stream_removal_on_fin() {
    let mut handler = Handler {
        streams: HashMap::new(),
        url_queue: Vec::new(),
    };
    let mut client = Http3Client::new("example.com", &["alpn"], Instant::now()).unwrap();
    let stream_id = 1;
    handler.streams.insert(stream_id, None);

    // Simulate receiving a HeaderReady event with fin=true
    client.events.push(Http3ClientEvent::HeaderReady {
        stream_id,
        headers: vec![],
        fin: true,
    });

    // Handle the event
    handler.handle(&mut client).unwrap();

    // Check that the stream has been removed
    assert!(!handler.streams.contains_key(&stream_id));
}
</Rust>