#[test]
fn test_send_ignore_emsgsize() {
  let sender = Socket::new(UdpSocket::bind("127.0.0.1:0").unwrap());
  let receiver = Socket::new(UdpSocket::bind("127.0.0.1:0").unwrap());
  let oversized_datagram = Datagram::new(sender.inner.local_addr().unwrap(), receiver.inner.local_addr().unwrap());
  let normal_datagram = Datagram::new(sender.inner.local_addr().unwrap(), receiver.inner.local_addr().unwrap());
  sender.send(&oversized_datagram).unwrap();
  sender.send(&normal_datagram).unwrap();
  let mut recv_buf = RecvBuf::new();
  receiver.inner.set_nonblocking(false).unwrap();
  let received_datagram = receiver.recv(receiver.inner.local_addr().unwrap(), &mut recv_buf).unwrap().next().unwrap();
  assert_eq!(received_datagram.as_ref(), normal_datagram.as_ref());
}