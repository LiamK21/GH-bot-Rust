<Filename>neqo-http3/src/hframe.rs</Filename>
<imports>
use super::HFrameReader;
use super::HFrame;
use super::connect;
use super::StreamType;
use super::now;
use super::Error;
</imports>
<Rust>
#[test]
fn test_frame_reading_when_stream_is_closed_before_sending_data() {
  let (mut conn_c, mut conn_s) = connect();
  let stream_id = conn_s.stream_create(StreamType::BiDi).unwrap();
  conn_s.stream_close_send(stream_id).unwrap();
  let out = conn_s.process(None, now());
  conn_c.process(out.dgram(), now());
  let mut fr: HFrameReader = HFrameReader::new();
  assert_eq!(Ok(true), fr.receive(&mut conn_s, stream_id));
}
</Rust>