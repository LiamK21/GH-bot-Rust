#[test]
fn test_send_inner_propagates_io_errors() {
    let socket = std::net::UdpSocket::bind("127.0.0.1:0").unwrap();
    // Force the socket into an error state (e.g., closed)
    let mut datagram = [0; 10];
    let result = send_inner(&socket, &datagram.as_slice());
    assert!(result.is_err());
}