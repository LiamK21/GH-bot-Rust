#[test]
fn test_datagram_batch_size() {
  let mut connection = Connection::new();
  let mut path = Path::new();
  path.plpmtu = 100;
  path.pmtud.needs_probe = true;
  let max_datagrams = 5;
  let send_buffer = Vec::new();
  let now = 0;
  let send_option = connection.output_dgram_batch_on_path(&mut path, &send_buffer, max_datagrams, now);
  match send_option {
    SendOptionBatch::Batch(_, _, num_datagrams, datagram_size) => {
      assert!(num_datagrams > 0);
      assert!(datagram_size > 0);
    },
    _ => {
      assert!(false, "Expected SendOptionBatch::Batch");
    }
  }
}