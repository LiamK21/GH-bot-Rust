#[test]
fn test_bytes_in_flight_handle_path_change() {
    let mut c = ClassicCongestionControl::<NoAdjustment>::default();
    let pkt = Packet {
        pn: 1,
        size: 100,
    };

    // Simulate initial packet send
    c.on_packet_sent(&pkt);
    assert_eq!(c.bytes_in_flight, pkt.size);

    // Simulate path change which resets bytes_in_flight to 0
    c.bytes_in_flight = 0;

    // Verify that on_packets_lost doesn't panic and handles the subtraction correctly
    c.on_packets_lost(&pkt);
    assert!(c.bytes_in_flight >= 0);
}