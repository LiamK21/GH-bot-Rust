<Filename> neqo-bin/src/server/http09.rs </Filename>
<imports>
use super::server;
use std::collections::HashMap;
use neqo_transport::server::{ActiveConnectionRef, Server, ValidateAddress};
use neqo_transport::ConnectionEvent;
use neqo_http3::Error;
use neqo_common::event::Provider;
use neqo_common::time::Instant;
use neqo_crypto::AntiReplay;
use neqo_crypto::RandomConnectionIdGenerator;
use neqo_crypto::init_db;
use neqo_transport::ConnectionIdGenerator;
use neqo_transport::Output;
use neqo_transport::State;
use neqo_transport::StreamId;
</imports>
<Rust>
#[test]
fn test_stream_readable() {
  let mut args = server::Args { shared: server::SharedArgs { qns_test: Some(()), ..Default::default() }, ..Default::default() };
  let now = Instant::now();
  let anti_replay = AntiReplay::new(now, 7, 7, 14).unwrap();
  let cid_mgr = std::rc::Rc::new(std::cell::RefCell::new(RandomConnectionIdGenerator::new(10)));
  let mut http_server = server::HttpServer::new(&args, anti_replay, cid_mgr).unwrap();
  let mut acr = ActiveConnectionRef::new(0, ValidateAddress::Never);
  let stream_id = StreamId::new(0, true, true);
  let event = ConnectionEvent::RecvStreamReadable { stream_id };
  http_server.process_events(now);
  http_server.stream_readable(stream_id, &mut acr);
  assert!(http_server.write_state.len() > 0);
}
</Rust>