<Filename>neqo-transport/src/connection.rs</Filename>
<imports>
use super::Connection;
use std::cell::RefCell;
use std::rc::Rc;
use crate::flow_mgr::FlowMgr;
use crate::loss_recovery::{LossRecovery, LossRecoveryState};
use crate::path::Path;
use crate::state::State;
use crate::tparams::TransportParameters;
use crate::Role;
use std::net::{IpAddr, Ipv4Addr, Ipv6Addr};
</imports>
<Rust>
#[test]
fn test_pmtu_calculation() {
    let flow_mgr = Rc::new(RefCell::new(FlowMgr::default()));
    let loss_recovery = LossRecovery::new();
    let loss_recovery_state = LossRecoveryState::default();
    let tps = Rc::new(RefCell::new(TransportParameters::default()));

    // Test for IPv4
    let path_v4 = Path::new(IpAddr::V4(Ipv4Addr::new(192, 0, 2, 1)), 0);
    let conn_v4 = Connection {
        paths: Some(path_v4),
        flow_mgr: Rc::clone(&flow_mgr),
        loss_recovery: loss_recovery.clone(),
        loss_recovery_state: loss_recovery_state.clone(),
        tps: Rc::clone(&tps),
        state: State::Init,
        role: Role::Client,
        ..Default::default()
    };
    assert_eq!(conn_v4.pmtu(), 1252);

    // Test for IPv6
    let path_v6 = Path::new(IpAddr::V6(Ipv6Addr::new(0x2001, 0xdb8, 0, 0, 0, 0, 0, 1)), 0);
    let conn_v6 = Connection {
        paths: Some(path_v6),
        flow_mgr: Rc::clone(&flow_mgr),
        loss_recovery: loss_recovery.clone(),
        loss_recovery_state: loss_recovery_state.clone(),
        tps: Rc::clone(&tps),
        state: State::Init,
        role: Role::Client,
        ..Default::default()
    };
    assert_eq!(conn_v6.pmtu(), 1232);

    // Test for no path
    let conn_no_path = Connection {
        paths: None,
        flow_mgr,
        loss_recovery,
        loss_recovery_state,
        tps,
        state: State::Init,
        role: Role::Client,
        ..Default::default()
    };
    assert_eq!(conn_no_path.pmtu(), 1280);
}
</Rust>