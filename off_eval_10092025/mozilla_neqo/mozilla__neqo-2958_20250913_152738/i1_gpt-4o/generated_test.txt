#[test]
fn test_disable_random_feature() {
    let mut agent = SecretAgent::new();
    agent.set_option(Opt::Grease, true).unwrap();
    agent.set_option(Opt::EnableChExtensionPermutation, true).unwrap();

    let expected_grease = cfg!(not(feature = "disable-random")) && true;
    let expected_permutation = cfg!(not(feature = "disable-random"));

    let actual_grease = agent.get_option(Opt::Grease).unwrap();
    let actual_permutation = agent.get_option(Opt::EnableChExtensionPermutation).unwrap();

    assert_eq!(expected_grease, actual_grease);
    assert_eq!(expected_permutation, actual_permutation);
}