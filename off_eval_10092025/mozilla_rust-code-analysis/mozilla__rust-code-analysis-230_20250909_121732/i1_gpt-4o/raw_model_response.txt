<Filename>rust-code-analysis-cli/src/main.rs</Filename>
<imports>
use super::act_on_file;
use std::path::PathBuf;
use std::fs;
use std::io::Write;
</imports>
<Rust>
#[test]
fn test_act_on_file_with_output_format() {
    let temp_dir = tempfile::tempdir().unwrap();
    let output_path = temp_dir.path().join("output.json");
    let mut file = fs::File::create(&output_path).unwrap();
    writeln!(file, "fn main() {{}}").unwrap();

    let cfg = Config {
        function: false,
        metrics: true,
        output_format: Some(Format::Json),
        output: Some(temp_dir.path().to_path_buf()),
        pretty: false,
        line_start: None,
        line_end: None,
        in_place: false,
        comments: false,
        web: false,
    };

    let result = act_on_file(Some(LANG::Rust), output_path.clone(), &cfg);
    assert!(result.is_ok());

    let output_file = temp_dir.path().join("output.json");
    assert!(output_file.exists());
}
</Rust>