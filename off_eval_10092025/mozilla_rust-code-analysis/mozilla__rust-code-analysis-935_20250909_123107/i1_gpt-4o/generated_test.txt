#[test]
fn test_metrics_with_nesting_map() {
    struct MockParser;
    impl ParserTrait for MockParser {
        type Cognitive = MockCognitive;
        type Cyclomatic = ();
        type Halstead = ();
        type Loc = ();
    }

    struct MockCognitive;
    impl Cognitive for MockCognitive {
        fn compute(_node: &Node, _stats: &mut Stats, _nesting_map: &mut FxHashMap<usize, (usize, usize, usize)>) {}
    }

    let parser = MockParser;
    let path = Path::new("test_path");
    let result = metrics(&parser, path);
    assert!(result.is_some());
}