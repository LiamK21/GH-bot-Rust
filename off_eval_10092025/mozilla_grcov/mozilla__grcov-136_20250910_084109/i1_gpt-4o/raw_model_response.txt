<Filename>src/parser.rs</Filename>
<imports>
use super::parse_jacoco_xml_report;
use std::fs::File;
use std::io::BufReader;
use std::collections::{BTreeMap, HashMap};
use defs::{CovResult, Function};
</imports>
<Rust>
#[test]
fn test_parse_jacoco_xml_report_basic() {
    let mut lines: BTreeMap<u32, u64> = BTreeMap::new();
    lines.insert(1, 0);
    lines.insert(4, 1);
    lines.insert(6, 1);
    let mut functions: HashMap<String, Function> = HashMap::new();
    functions.insert(String::from("hello#<init>"), Function {
        executed: false,
        start: 1,
    });
    functions.insert(String::from("hello#main"), Function {
        executed: true,
        start: 3,
    });
    let mut branches: BTreeMap<(u32,u32),bool> = BTreeMap::new();
    branches.insert((3, 0), true);
    branches.insert((3, 1), true);
    let expected = vec![(String::from("hello.java"), CovResult {
        lines: lines,
        branches: branches,
        functions: functions,
    })];

    let f = File::open("./test/jacoco/basic-report.xml").expect("Failed to open xml file");
    let file = BufReader::new(&f);
    let results = parse_jacoco_xml_report(file).unwrap();

    assert_eq!(results, expected);
}
</Rust>