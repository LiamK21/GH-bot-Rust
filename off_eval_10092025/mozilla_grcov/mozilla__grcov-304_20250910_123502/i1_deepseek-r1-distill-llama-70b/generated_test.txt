#[test]
fn test_run_gcov_error_handling() {
    let temp_dir = PathBuf::from(env::var("CARGO_MANIFEST_DIR").unwrap()).join("tests");
    let working_dir = temp_dir.join("test_data").join("gcov").join("with_errors");
    let gcno_path = working_dir.join("example.gcno");

    // Setup a fake gcov command that fails
    let mut fake_gcov = Command::new("false");
    fake_gcov.current_dir(working_dir.clone());

    let result = run_gcov(&gcno_path, true, &working_dir);
    assert!(result.is_err());
}