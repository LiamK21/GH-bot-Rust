#[test]
fn test_large_profraw_handling() {
    let temp_dir = tempdir().unwrap();
    let working_dir = temp_dir.path().join("working");
    fs::create_dir_all(&working_dir).unwrap();

    // Create a large number of .profraw files
    let num_files = 1000;
    let mut profraw_paths = Vec::new();
    for i in 0..num_files {
        let file = working_dir.join(format!("file_{}.profraw", i));
        fs::File::create(&file).unwrap();
        profraw_paths.push(file);
    }

    let binary_path = PathBuf::from("/bin/ls"); // Any executable binary

    // Test should pass after the patch
    let result = profraws_to_lcov(&profraw_paths, &binary_path, &working_dir);
    assert!(result.is_ok(), "Should handle large number of profraw files without error");
}