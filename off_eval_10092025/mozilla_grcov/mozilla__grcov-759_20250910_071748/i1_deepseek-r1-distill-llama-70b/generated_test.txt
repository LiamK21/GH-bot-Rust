#[test]
fn test_class_line_coverage_includes_all_lines() {
    let mut result = CovResult {
        lines: {
            let mut map = std::collections::BTreeMap::new();
            // Add some functions with lines
            map.insert(1, (1, 1));
            map.insert(2, (1, 1));
            map.insert(3, (1, 0)); // Orphan line
            map.insert(4, (1, 1));
            map
        },
        ..Default::default()
    };

    let sources = vec!["src".to_string()];
    let demangle = false;
    let demangle_options = Default::default();

    let coverage = get_coverage(result, sources, demangle, demangle_options);

    // Get the first class (should only be one)
    let class = coverage.classes.into_iter().next().unwrap();

    // Check that all lines (including orphan) are present
    assert_eq!(class.lines.len(), 4);
}