<Filename>src/cobertura.rs</Filename>
<imports>
use super::get_coverage;
use std::collections::BTreeMap;
use crate::demangle::DemangleOptions;
use crate::cov::{CovResultIter, CovResult};
</imports>
<Rust>
#[test]
fn test_class_level_line_coverage() {
    let results: CovResultIter = vec![
        (
            "file1.rs".to_string(),
            "file1.rs".into(),
            CovResult {
                lines: BTreeMap::from([(1, 1), (2, 1), (3, 1)]),
                ..Default::default()
            },
        ),
    ]
    .into_iter();

    let sources = vec!["src".to_string()];
    let demangle = false;
    let demangle_options = DemangleOptions::default();

    let coverage = get_coverage(results, sources, demangle, demangle_options);

    let expected_lines = vec![1, 2, 3];
    let actual_lines: Vec<u32> = coverage
        .classes
        .iter()
        .flat_map(|class| class.lines.iter().map(|line| line.number))
        .collect();

    assert_eq!(expected_lines, actual_lines);
}
</Rust>