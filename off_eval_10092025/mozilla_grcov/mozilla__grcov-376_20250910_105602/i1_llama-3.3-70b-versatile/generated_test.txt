#[test]
fn test_coveralls_service_job_id_is_used_instead_of_service_job_number() {
  let results = vec![(
            "foo/bar/a.cpp",
            "foo/bar/a.cpp",
            json!({
                "lines": [[1, 10], [2, 11]],
                "branches": {},
                "functions": {}
            }),
        )];
  let mut actual: Value = json!({
                "source_files": ["foo/bar/a.cpp"],
                "service_name": "unused",
                "service_number": "unused",
                "service_job_id": "unused",
                "service_pull_request": "unused",
                "parallel": false,
            });
  let tmp_dir = tempdir().expect("Failed to create temporary directory");
  let file_name = "test_coveralls_service_job_id.json";
  let file_path = tmp_dir.path().join(&file_name);
  output_coveralls(
            results.into_iter(),
            "unused",
            "unused",
            "unused",
            "100500",
            "unused",
            "unused",
            true,
            Some(file_path.to_str().unwrap()),
            "unused",
            true,
        );
  let expected_service_job_id: &str = "100500";
  actual = serde_json::from_str(&fs::read_to_string(file_path).unwrap()).unwrap();
  assert_eq!(actual["service_job_id"], expected_service_job_id);
}