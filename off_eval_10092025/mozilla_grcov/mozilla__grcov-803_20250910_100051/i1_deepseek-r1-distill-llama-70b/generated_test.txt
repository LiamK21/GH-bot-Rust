#[test]
fn test_deserialize_counter() {
    let test_cases = vec![
        // Valid u64
        (42u64, Ok(42u64)),
        // Float within u64 range
        (42.0f64, Ok(42u64)),
        // Float as Number
        (serde_json::Number::from(42.0), Ok(42u64)),
        // Float at max u64
        ((u64::MAX as f64).into(), Ok(u64::MAX)),
        // Float above max u64
        ((u64::MAX as f64 + 1.0).into(), Err(_)),
        // Non-integer float
        ((42.5).into(), Err(_)),
    ];

    for (input, expected) in test_cases {
        let deserializer = serde_json::Deserializer::from(input);
        let result = deserialize_counter(&deserializer);
        assert_eq!(result, expected);
    }
}