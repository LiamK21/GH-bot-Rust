#[test]
fn test_exclude_directories_with_wildcards() {
    let mut result_map: HashMap<String, ()> = HashMap::new();
    result_map.insert("main.cpp".to_string(), ());
    result_map.insert("vs2017_15.6.6/prova.h".to_string(), ());
    result_map.insert("vs2017_15.7.1/prova.h".to_string(), ());

    let results: Vec<_> = rewrite_paths(result_map, None, "", "", false, false, vec!["vs2017_*".to_string()]).collect();

    let expected_count = 1; // Only "main.cpp" should remain
    assert_eq!(results.len(), expected_count);
    assert_eq!(results[0].0, "main.cpp");
}