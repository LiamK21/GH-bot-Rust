#[test]
fn test_partial_path_mapping_optimization() {
    let mut result_map = HashMap::new();
    let java_path = PathBuf::from("src/test/MyClass.java");
    let non_java_path = PathBuf::from("src/test/MyClass.txt");

    // Mock result_map with Java file
    result_map.insert(java_path.clone(), 0);
    // Test with Java files - should trigger partial path mapping
    let _m = mock("GET", "/partial_path").create();

    rewrite_paths(
        result_map.clone(),
        None,
        None,
        None,
        false,
        &[],
        &[],
        None,
        crate::FileFilter::default(),
    );

    // Mock result_map without Java files
    result_map.clear();
    result_map.insert(non_java_path, 0);
    // Test without Java files - should not trigger partial path mapping
    let _m2 = mock("GET", "/partial_path").create();

    rewrite_paths(
        result_map,
        None,
        None,
        None,
        false,
        &[],
        &[],
        None,
        crate::FileFilter::default(),
    );
}