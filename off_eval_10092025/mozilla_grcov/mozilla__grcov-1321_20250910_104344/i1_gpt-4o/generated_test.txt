#[test]
fn test_generate_partial_path_mapping_only_when_required() {
    let result_map: HashMap<String, String> = [
        ("src/main/java/com/example/Test.java".to_string(), "data".to_string()),
        ("src/main/resources/config.xml".to_string(), "data".to_string())
    ].iter().cloned().collect();
    let path_mapping = None;
    let source_dir = Some(Path::new("src"));
    let prefix_dir = None;
    let ignore_not_existing = false;
    let to_ignore_dirs: Vec<&str> = vec![];
    let to_keep_dirs: Vec<&str> = vec![];
    let filter_option = None;
    let file_filter = crate::FileFilter::default();

    let expected = vec![
        ("src/main/java/com/example/Test.java".to_string(), "data".to_string()),
        ("src/main/resources/config.xml".to_string(), "data".to_string())
    ];

    let actual = rewrite_paths(
        result_map,
        path_mapping,
        source_dir,
        prefix_dir,
        ignore_not_existing,
        &to_ignore_dirs,
        &to_keep_dirs,
        filter_option,
        file_filter
    );

    assert_eq!(actual, expected);
}