#[test]
fn test_identify_llvm_gcno_files() {
    let tmp_dir = Path::new("/tmp");
    let paths = vec!["/path/to/archive".to_string()];
    let queue = WorkQueue::new();
    let ignore_orphan_gcno = false;
    let is_llvm = false;

    let mut archives = vec![
        Archive {
            name: "llvm".to_string(),
            item: RefCell::new(crate::ArchiveType::Dir(Path::new("/path/to/llvm").to_path_buf())),
        },
    ];

    let expected = vec![
        (ItemFormat::GCNO, false, "llvm/file_1", true),
    ];

    producer(tmp_dir, &paths, &queue, ignore_orphan_gcno, is_llvm);

    let produced_items = queue.items();
    for (format, llvm, name, _) in expected {
        assert!(produced_items.iter().any(|item| {
            item.format == format && item.name.ends_with(name) && item.llvm == llvm
        }));
    }
}