#[test]
fn test_print_summary() {
  let results = vec![(
    PathBuf::from("src/main.rs"),
    PathBuf::from("src/main.rs"),
    CovResult {
      lines: [(1, 1), (2, 1), (3, 2), (4, 1), (5, 0), (6, 0), (8, 1), (9, 1)].iter().cloned().collect(),
      branches: {
        let mut map = std::collections::BTreeMap::new();
        map.insert(3, vec![true, false]);
        map.insert(5, vec![false, false]);
        map
      },
      functions: {
        let mut map = rustc_hash::FxHashMap::default();
        map.insert("_ZN8cov_test4main17h7eb435a3fb3e6f20E".to_string(), crate::Function { start: 1, executed: true });
        map
      },
    },
  )];
  let expected_output = "lines: 75.0% (6 out of 8)\nbranches: 25.0% (1 out of 4)\n";
  let actual_output = {
    let mut buf: Vec<u8> = Vec::new();
    let stdout = std::io::stdout();
    let handle = stdout.lock();
    let mut handle = std::io::BufWriter::new(handle);
    print_summary(&results);
    handle.flush().unwrap();
    buf
  };
  let actual_string = String::from_utf8_lossy(&actual_output);
  assert_eq!(expected_output, actual_string);
}