#[test]
fn test_deletion_request_pings_are_processed() {
    let (glean, dir) = new_glean(None);

    // Submit a deletion request ping
    glean
        .internal_pings
        .deletion_request
        .submit(&glean, None)
        .unwrap();

    let directory_manager = PingDirectoryManager::new(dir.path());

    // Process the directories
    let requests = directory_manager.process_dir();

    // Verify that the deletion request ping was processed
    assert_eq!(requests.len(), 1);
    let request_ping_type = requests[0].url.split('/').nth(3).unwrap();
    assert_eq!(request_ping_type, "deletion-request");
}