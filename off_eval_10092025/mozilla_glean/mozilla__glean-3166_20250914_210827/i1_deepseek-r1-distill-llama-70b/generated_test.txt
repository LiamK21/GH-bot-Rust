#[test]
fn test_keyed_categorical_counter() {
    // Test static_static metric
    static_static.get("key1", "category1").add(1);
    assert_eq!(0, static_static.test_get_num_recorded_errors(ErrorType::InvalidLabel));
    assert_eq!(Some(1), static_static.get("key1", "category1").test_get_value(None));

    // Test dynamic_static metric
    dynamic_static.get("party", "category1").add(1);
    assert_eq!(0, dynamic_static.test_get_num_recorded_errors(ErrorType::InvalidLabel));
    assert_eq!(Some(1), dynamic_static.get("party", "category1").test_get_value(None));

    // Test static_dynamic metric
    static_dynamic.get("key1", "balloons").add(1);
    assert_eq!(0, static_dynamic.test_get_num_recorded_errors(ErrorType::InvalidLabel));
    assert_eq!(Some(1), static_dynamic.get("key1", "balloons").test_get_value(None));

    // Test dynamic_dynamic metric
    dynamic_dynamic.get("party", "balloons").add(1);
    assert_eq!(0, dynamic_dynamic.test_get_num_recorded_errors(ErrorType::InvalidLabel));
    assert_eq!(Some(1), dynamic_dynamic.get("party", "balloons").test_get_value(None));

    // Test __other__ label
    static_static.get("party", "balloons").add(1);
    assert_eq!(Some(1), static_static.get("__other__", "__other__").test_get_value(None));
}