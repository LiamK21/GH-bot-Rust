#[test]
fn test_event_code_generation() {
    let yaml = r#"
        autotrack.fafo:

          event:
            type: "event"
            description: "Test event"
            metadata:
              tags:
                - "test"
            expires: "never"
    "#;

    let temp_dir = tempdir().unwrap();
    let yaml_file = temp_dir.path().join("test.yaml");
    std::fs::write(&yaml_file, yaml).unwrap();

    let output = std::process::Command::new("glean_parser")
        .arg("translate")
        .arg(yaml_file)
        .output()
        .unwrap();

    let rust_code = String::from_utf8(output.stdout).unwrap();
    assert!(rust_code.contains("NoExtraKeys"), "Expected NoExtraKeys in generated code");
    assert!(!rust_code.contains("NoExtra"), "Should not contain NoExtra");
}