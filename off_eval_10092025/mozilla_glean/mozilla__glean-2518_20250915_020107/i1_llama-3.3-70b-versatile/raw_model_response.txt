<Filename> glean-core/src/lib.rs </Filename>
<imports> 
use super::shutdown;
use super::initialize_inner;
use std::thread;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_shutdown_before_init() {
  let handle = thread::spawn(move || {
    thread::sleep(Duration::from_millis(100));
    shutdown();
  });
  initialize_inner(InternalConfiguration::default(), ClientInfoMetrics::default(), Box::new(()));
  handle.join().unwrap();
  assert!(super::core::global_glean().is_some());
}</Rust>