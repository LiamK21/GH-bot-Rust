#[test]
fn test_setup_glean_logs_warning() {
    let _capture = capture();
    let glean = Glean::new();
    let result = setup_glean(glean);
    assert!(result.is_ok());

    let logs = _capture.flush();
    assert!(
        logs.iter().any(|log| {
            log.level() == log::Level::Warn && 
            log.message() == "Global Glean object is initialized already. This probably happened concurrently."
        }),
        "Expected a warning log but didn't find one."
    );
}