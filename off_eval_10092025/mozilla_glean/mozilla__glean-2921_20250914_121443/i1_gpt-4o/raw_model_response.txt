<Filename>glean-core/rlb/src/private/object.rs</Filename>
<imports>
use super::ObjectMetric;
use super::CommonMetricData;
use super::ErrorType;
use serde_json::json;
</imports>
<Rust>
#[test]
fn test_set_string_with_null_values() {
    let metric: ObjectMetric<serde_json::Value> = ObjectMetric::new(CommonMetricData {
        name: "object".into(),
        category: "test".into(),
        send_in_pings: vec!["test1".into()],
        ..Default::default()
    });

    let input = json!({
        "key1": "value1",
        "key2": null,
        "key3": "value3"
    })
    .to_string();
    metric.set_string(input);

    let data = metric.test_get_value(None).expect("no object recorded");
    let expected = json!({
        "key1": "value1",
        "key3": "value3"
    });
    assert_eq!(expected, data);
    assert_eq!(
        0,
        metric.test_get_num_recorded_errors(ErrorType::InvalidValue)
    );
}
</Rust>