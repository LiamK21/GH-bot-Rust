<Filename> tools/embedded-uniffi-bindgen/src/main.rs </Filename>
<imports> 
use super::main;
use std::env;
use anyhow::{bail, Context};
use camino::Utf8PathBuf;
use uniffi::{generate_bindings, TargetLanguage};
use uniffi_bindgen::BindingGeneratorDefault;
</imports>
<Rust>
#[test]
fn test_binding_generator() {
  let udl_file = "path_to_udl_file";
  let config = None;
  let target_languages = vec![TargetLanguage::Rust];
  let out_dir = "path_to_out_dir";
  let result_before_patch = std::panic::catch_unwind(|| main());
  assert!(result_before_patch.is_err());
  let generator = BindingGeneratorDefault {
    target_languages,
    try_format_code: false,
  };
  let result_after_patch = std::panic::catch_unwind(|| {
    generate_bindings(
      &udl_file,
      config.as_deref(),
      generator,
      out_dir,
      None,
      Some("glean_core"),
    )
  });
  assert!(result_after_patch.is_ok());
}</Rust>