#[test]
fn test_recoverable_failure_logging_level() {
    let log_messages = Mutex::new(Vec::new());
    let logger = log::set_logger(&log::Logger::new(&log_messages)).unwrap();
    log::set_max_level(Level::Info);

    let document_id = "957090b3-4e26-4cfc-bfd8-00cbbac42524";
    let status = RecoverableFailure;

    PingUploadManager::log_recoverable_failure(document_id, status);

    let log_messages = log_messages.lock().unwrap();
    assert!(log_messages.iter().any(|record| {
        record.level() == Level::Info && record.args().to_string().contains("Recoverable upload failure while attempting to send ping")
    }));

    log::set_logger(logger).unwrap();
}