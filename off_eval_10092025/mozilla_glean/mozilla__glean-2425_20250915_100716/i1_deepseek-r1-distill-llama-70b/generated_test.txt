#[test]
fn test_rkv_new_handles_database_corrupted() -> std::io::Result<()> {
    let temp_dir = tempdir()?;
    let safebin = temp_dir.path().join("data.safe.bin");

    // Create the corrupted file
    File::create(&safebin).unwrap();

    // Attempt to open rkv, which should remove the corrupted file and succeed
    let result = rkv_new(temp_dir.path()).unwrap();

    // Ensure the corrupted file was removed
    assert!(!safebin.exists(), "Corrupted file was not removed");

    Ok(result)
}