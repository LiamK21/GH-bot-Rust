<Filename>glean-core/src/upload/mod.rs</Filename>
<imports>
use super::PingUploadManager;
use serde_json::json;
use std::sync::{Arc, RwLock};
use std::collections::VecDeque;
</imports>
<Rust>
#[test]
fn test_clear_ping_queue_retains_only_deletion_requests() {
    let manager = PingUploadManager {
        queue: Arc::new(RwLock::new(VecDeque::from(vec![
            PingRequest { uuid: "1".into(), path: "/path1".into(), body: json!({"type": "deletion-request"}) },
            PingRequest { uuid: "2".into(), path: "/path2".into(), body: json!({"type": "other"}) },
        ]))),
    };

    let expected_len = 1;
    let queue = manager.clear_ping_queue();
    let actual_len = queue.len();

    assert_eq!(expected_len, actual_len);
    assert_eq!(queue[0].body["type"], "deletion-request");
}
</Rust>