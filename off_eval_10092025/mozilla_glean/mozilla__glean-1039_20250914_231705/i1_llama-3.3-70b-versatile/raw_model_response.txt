<Filename> glean_core/ffi/src/lib.rs </Filename>
<imports> 
use super::glean_initialize_for_subprocess;
use super::glean_get_upload_task;
use super::glean_process_ping_upload_response;
use glean_core::upload::ffi_upload_result::*;
use glean_core::upload::PingUploadTask;
use std::ptr;
</imports>
<Rust>
#[test]
fn test_upload_error_reporting() {
  let cfg = std::ptr::null();
  let result_before = unsafe { glean_initialize_for_subprocess(cfg) };
  assert_eq!(result_before, 0);

  let cfg = std::ptr::null();
  let result_after = unsafe { glean_initialize_for_subprocess(cfg) };
  assert_eq!(result_after, 1);
}</Rust>