#[test]
fn test_uploader_capabilities_added_to_ping() {
  let ping_name = "test_ping";
  let uploader_capabilities = vec!["ohttp".to_string(), "other_capability".to_string()];
  let ping = PingMaker::new(ping_name, uploader_capabilities);
  let metrics_data = ping.create_ping().unwrap().metrics;
  let expected_capabilities = json!(uploader_capabilities);
  let actual_capabilities = metrics_data
    .get("string_list")
    .and_then(|list| list.get("glean.ping.uploader_capabilities"));
  assert_eq!(actual_capabilities, Some(&expected_capabilities));
}