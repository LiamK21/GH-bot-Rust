<think>
Okay, so I'm trying to figure out how to approach this regression test. The user provided a patch that increments the GLEAN_PARSER_VERSION from 11.0.0 to 11.0.1. The issue is about expanding the number of allowed extra keys in an event from 15 to 30. 

First, I need to understand what this patch does. It looks like it's just a version bump. But why does that affect the extra keys limit? Maybe the parser version controls the allowed number of extra keys. So, when the version is 11.0.1, the limit is higher.

The user is asking if a unit test is needed. Since the patch changes the behavior, a test is necessary to ensure that after the patch, the limit is correctly increased.

I should write a test that checks the maximum allowed extra keys. Before the patch, it should fail if we try to use more than 15, and after, it should allow up to 30.

I'll create a test function that defines an event with 16 extra keys. Then, I'll try to generate the Glean code. If the version is 11.0.0, this should cause an error, but with 11.0.1, it should succeed.

Wait, how does the version affect the code generation? Maybe the code generator checks the version and enforces the limit accordingly. So, in the test, I can set the version to 11.0.0 and expect a failure, then set it to 11.0.1 and expect success.

I'll structure the test by setting the GLEAN_PARSER_VERSION environment variable to each version and try to generate the event. If it fails when it should and passes when it should, the test will confirm the patch works.

I need to import the necessary modules, like the Builder and maybe some error types. The test will be self-contained, so I'll include all the setup inside the test function.

So, the test will have two parts: one with the old version expecting an error, and one with the new version expecting no error. This way, it ensures the patch correctly changes the behavior.
</think>

The patch increments the GLEAN_PARSER_VERSION from 11.0.0 to 11.0.1, which likely corresponds to a parser version that allows more extra keys. Since the issue is about increasing the allowed number of extra keys, we need a test that verifies this behavior has changed.

We'll write a test that:
1. Creates an event with 16 extra keys (exceeding the old limit of 15)
2. Verifies this fails when using version 11.0.0
3. Verifies this works when using version 11.0.1

<Filename> glean-core/build/src/lib.rs </Filename>
<imports>
use super::Builder;
use std::env;
</imports>
<Rust>
#[test]
fn test_extra_keys_limit_increased() {
    // Test with old version that should fail
    env::set_var("GLEAN_PARSER_VERSION", "11.0.0");
    let event = r#"
        event my_event {
            my_extra1: string,
            my_extra2: string,
            my_extra3: string,
            my_extra4: string,
            my_extra5: string,
            my_extra6: string,
            my_extra7: string,
            my_extra8: string,
            my_extra9: string,
            my_extra10: string,
            my_extra11: string,
            my_extra12: string,
            my_extra13: string,
            my_extra14: string,
            my_extra15: string,
            my_extra16: string,
        }
    "#;
    
    let mut builder = Builder::new();
    let result = builder.generate_code_from_event(event);
    assert!(result.is_err(), "Expected error with 11.0.0 parser version");

    // Test with new version that should succeed
    env::set_var("GLEAN_PARSER_VERSION", "11.0.1");
    let result = builder.generate_code_from_event(event);
    assert!(result.is_ok(), "Expected success with 11.0.1 parser version");
}</Rust>