#[test]
fn test_extra_keys_limit_increased() {
    // Test with old version that should fail
    env::set_var("GLEAN_PARSER_VERSION", "11.0.0");
    let event = r#"
        event my_event {
            my_extra1: string,
            my_extra2: string,
            my_extra3: string,
            my_extra4: string,
            my_extra5: string,
            my_extra6: string,
            my_extra7: string,
            my_extra8: string,
            my_extra9: string,
            my_extra10: string,
            my_extra11: string,
            my_extra12: string,
            my_extra13: string,
            my_extra14: string,
            my_extra15: string,
            my_extra16: string,
        }
    "#;

    let mut builder = Builder::new();
    let result = builder.generate_code_from_event(event);
    assert!(result.is_err(), "Expected error with 11.0.0 parser version");

    // Test with new version that should succeed
    env::set_var("GLEAN_PARSER_VERSION", "11.0.1");
    let result = builder.generate_code_from_event(event);
    assert!(result.is_ok(), "Expected success with 11.0.1 parser version");
}