<Filename>glean-core/src/event_database/mod.rs</Filename>
<imports>
use super::EventDatabase;
use std::fs::{create_dir_all, File};
use std::path::Path;
</imports>
<Rust>
#[test]
fn test_remove_dir_all_windows() {
    let temp_dir = tempfile::tempdir().unwrap();
    let db_path = temp_dir.path().join("event_db");
    create_dir_all(&db_path).unwrap();
    File::create(db_path.join("test_file")).unwrap();

    let event_db = EventDatabase {
        path: db_path.clone(),
        file_lock: std::sync::RwLock::new(()),
    };

    assert!(event_db.clear().is_ok());
    assert!(!db_path.exists());
}
</Rust>