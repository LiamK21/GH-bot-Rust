<Filename>src/spaces.rs</Filename>
<imports>
use super::metrics;
use std::path::Path;
use std::fs;
</imports>
<Rust>
#[test]
fn test_metrics_with_nesting_map() {
    let parser = /* initialize a parser that implements ParserTrait */;
    let path = Path::new("test_data/sample_code.rs");
    let expected = /* define expected FuncSpace with correct cognitive complexity */;
    
    // Create a sample file for testing
    fs::write(path, "fn sample() { if true { while false {} } }").unwrap();
    
    let actual = metrics(&parser, path).unwrap();
    
    assert_eq!(expected, actual);
    
    // Clean up the sample file
    fs::remove_file(path).unwrap();
}
</Rust>