<Filename> src/main.rs </Filename>
<imports> 
use std::path::PathBuf;
use rust_code_analysis::{action, Callback,LANG, Metrics, MetricsCfg};
use std::io;
</imports>
<Rust>
#[test]
fn test_action_on_file() {
  let source_code = "int a = 42;";
  let language = LANG::Cpp;
  let path = PathBuf::from("foo.c");
  let source_as_vec = source_code.as_bytes().to_vec();
  let cfg = MetricsCfg {
      path: path.clone(),
      output_format: None,
      pretty: false,
      output_path: None,
  };
  let result = action::<Metrics>(&language, source_as_vec, &cfg.path, None, cfg);
  assert!(result.is_ok());
}
</Rust>