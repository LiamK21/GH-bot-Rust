#[test]
fn test_multiple_macro_annotations_on_class() {
    let code = "class MOZ_STACK_CLASS JS_PUBLIC_API AutoEntryMonitor {};";
    let mut parser = Language::CppParser.new();
    let tree = parser.parse(code, None).unwrap();

    let root = tree.root();
    let class_declaration = root
        .children(&mut parser.tree_sitter())
        .nth(1)
        .unwrap();

    assert_eq!(class_declaration.kind(), "class_specifier");
    let type_identifier = class_declaration
        .children(&mut parser.tree_sitter())
        .nth(3)
        .unwrap();
    assert_eq!(type_identifier.kind(), "type_identifier");
    assert_eq!(type_identifier.text(), "AutoEntryMonitor");

    let specifiers = class_declaration
        .children(&mut parser.tree_sitter())
        .nth(1)
        .unwrap()
        .children(&mut parser.tree_sitter());

    let mut seen = 0;
    for (i, child) in specifiers.enumerate() {
        match i {
            0 => assert_eq!(child.kind(), "macro_annotation"),
            1 => assert_eq!(child.kind(), "type_identifier"),
            _ => break,
        }
        seen += 1;
    }
    assert_eq!(seen, 2);
}