#[test]
fn test_ignore_dir_cli_option() {
    let mut result_map = FxHashMap::default();
    result_map.insert("tests/ignored_file.cpp".to_string(), CovResult::default());
    result_map.insert("tests/covered_file.cpp".to_string(), CovResult::default());

    let mut ignore_dirs = vec!["tests/ignored_file.cpp"];
    let results = rewrite_paths(
        result_map,
        None,
        None,
        None,
        false,
        &mut ignore_dirs,
        None,
    );

    let mut count = 0;
    for (abs_path, rel_path, _) in results {
        if rel_path.display().to_string() == "tests/ignored_file.cpp" {
            count += 1;
        }
    }
    assert_eq!(count, 0);
}