<Filename> src/html.rs </Filename>
<imports> 
use super::consumer_html;
use super::HtmlGlobalStats;
use super::HtmlJobReceiver;
use super::Tera;
use std::sync::Arc;
use std::sync::mutex::Mutex;
use std::thread;
use std::sync::mpsc;
</imports>
<Rust>
#[test]
fn test_absolute_link_prefix() {
  let tera = Tera::default();
  let (sender, receiver) = mpsc::unbounded();
  let global = Arc::new(Mutex::new(HtmlGlobalStats {
    dirs: std::collections::BTreeMap::new(),
    stats: HtmlGlobalStats::default().stats,
    abs_prefix: Some("/prefix".into()),
  }));
  let output = "/output";
  let conf = Config::default();
  let abs_link_prefix = Some("/prefix".to_string());
  sender.send(Some(("file".to_string(), "/path".to_string(), HtmlStats::default()))).unwrap();
  let handle = thread::spawn(move || consumer_html(&tera, receiver, global.clone(), output, conf, &abs_link_prefix));
  handle.join().unwrap();
  let global = global.lock().unwrap();
  assert!(global.abs_prefix.is_some());
}</Rust>