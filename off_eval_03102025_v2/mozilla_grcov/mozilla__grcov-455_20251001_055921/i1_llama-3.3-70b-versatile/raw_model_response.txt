<Filename> src/main.rs </Filename>
<imports> 
use super::rewrite_paths;
use std::path::PathBuf;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_rewrite_paths_keep_directory() {
  let mut result_map: HashMap<String, ()> = HashMap::new();
  result_map.insert("main.cpp".to_string(), ());
  result_map.insert("mydir/prova.h".to_string(), ());
  let results = rewrite_paths(
    result_map,
    None,
    None,
    None,
    false,
    &mut Vec::new(),
    &vec!["mydir/*"],
    None,
    ()
  );
  let mut count = 0;
  for (abs_path, rel_path, _) in results {
    count += 1;
    if abs_path == PathBuf::from("mydir/prova.h") {
      assert_eq!(rel_path, PathBuf::from("mydir/prova.h"));
    }
  }
  assert_eq!(count, 1);
}</Rust>