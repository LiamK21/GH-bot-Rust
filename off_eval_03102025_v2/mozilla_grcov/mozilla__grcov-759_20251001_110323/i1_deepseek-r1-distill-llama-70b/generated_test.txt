#[test]
fn test_class_coverage_includes_all_lines() {
    let mut result = CovResult::default();
    let file_path = PathBuf::from("src/main.rs");

    // Add functions with specific line coverage
    let func1 = result
        .entry(file_path.clone(), "function1".to_string())
        .or_insert((0, vec![], vec![]));
    func1.1.extend([1, 2, 3]);
    func1.2.extend([1, 0, 1]); // Coverage for lines 1 and 3

    let func2 = result
        .entry(file_path, "function2".to_string())
        .or_insert((0, vec![], vec![]));
    func2.1.extend([4, 5, 6]);
    func2.2.extend([1, 1, 0]); // Coverage for line 4 and 5

    let sources = vec!["src/main.rs".to_string()];
    let demangle = false;
    let demangle_options = DemangleOptions::default();

    let coverage = get_coverage(result, sources, demangle, demangle_options);

    // The class should include all lines from the file
    let expected_lines = 6; // Lines 1-6
    assert_eq!(coverage.classes[0].lines.len(), expected_lines);
}