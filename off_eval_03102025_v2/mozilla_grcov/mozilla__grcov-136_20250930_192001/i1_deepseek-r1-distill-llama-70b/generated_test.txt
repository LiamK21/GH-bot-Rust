#[test]
fn test_jacoco_report_parsing() {
    let f = File::open("test/jacoco/basic-report.xml").expect("Failed to open test XML file");
    let reader = BufReader::new(f);
    let result = parse_jacoco_xml_report(reader).unwrap();

    assert_eq!(result.len(), 1);
    let (file_name, coverage) = &result[0];
    assert_eq!(file_name, "hello.java");

    // Check lines coverage
    assert_eq!(coverage.lines.contains_key(&1), true);
    assert_eq!(coverage.lines[&1], 0);
    assert_eq!(coverage.lines[&4], 1);

    // Check functions coverage
    assert_eq!(coverage.functions.contains_key("hello#<init>"), true);
    assert!(!coverage.functions["hello#<init>"].executed);

    assert_eq!(coverage.functions.contains_key("hello#main"), true);
    assert!(coverage.functions["hello#main"].executed);
}