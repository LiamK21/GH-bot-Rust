#[test]
fn test_resumption_token_handling() {
    let mut client = Connection::new(Instant::now());
    let mut handler = Handler::new();

    // Simulate connection and event handling
    let handler_done = handler.handle(&mut client).unwrap();
    assert!(handler_done);

    // Verify resumption token is handled correctly
    let token = handler.token.take();
    assert!(token.is_some());

    // Check if connection is closed properly
    let state = client.state();
    assert!(matches!(state, State::Closed(..)));
}