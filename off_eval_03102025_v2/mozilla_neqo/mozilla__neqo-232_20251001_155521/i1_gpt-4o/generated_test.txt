#[test]
fn test_event_ordering() {
    let evts = ConnectionEvents::default();

    evts.new_stream(4.into());
    evts.connection_state_change(State::Connected);

    let first_event = evts.next_event().unwrap();
    let second_event = evts.next_event().unwrap();

    assert!(matches!(first_event, ConnectionEvent::StateChange(State::Connected)));
    assert!(matches!(second_event, ConnectionEvent::NewStream { stream_id, .. } if stream_id == 4));
}