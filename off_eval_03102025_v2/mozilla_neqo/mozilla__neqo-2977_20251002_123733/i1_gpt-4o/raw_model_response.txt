<Filename>neqo-common/src/datagram.rs</Filename>
<imports>
use super::DatagramBatch;
use std::net::{IpAddr, Ipv6Addr, SocketAddr};
use crate::Tos;
</imports>
<Rust>
#[test]
fn test_batch_iter() {
    let src = SocketAddr::new(IpAddr::V6(Ipv6Addr::LOCALHOST), 1234);
    let dst = SocketAddr::new(IpAddr::V6(Ipv6Addr::LOCALHOST), 5678);
    let tos = Tos::default();
    let batch = DatagramBatch::new(src, dst, tos, 4, vec![1, 2, 3, 4, 5, 6, 7, 8, 9]);
    let datagrams: Vec<_> = batch.iter().collect();
    assert_eq!(datagrams.len(), 3);
    assert_eq!(datagrams[0], &[1, 2, 3, 4]);
    assert_eq!(datagrams[1], &[5, 6, 7, 8]);
    assert_eq!(datagrams[2], &[9]);
}
</Rust>