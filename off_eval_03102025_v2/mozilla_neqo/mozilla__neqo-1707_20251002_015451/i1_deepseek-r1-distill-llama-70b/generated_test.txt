#[test]
fn test_recv_buffer() -> Result<(), io::Error> {
    let sender = Socket::bind("127.0.0.1:0")?;
    let receiver_addr: SocketAddr = "127.0.0.1:0".parse().unwrap();
    let mut receiver = Socket::bind(receiver_addr)?;

    let test_data = b"test_data";
    sender.send(&test_data)?;

    let received = receiver.recv(&receiver_addr)?;

    assert!(received.is_some(), "Should receive data");
    let datagram = received.unwrap();
    assert_eq!(datagram.d(), test_data, "Received data should match sent data");
    Ok(())
}