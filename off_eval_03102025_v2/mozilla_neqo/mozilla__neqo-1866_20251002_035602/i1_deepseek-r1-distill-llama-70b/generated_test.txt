#[test]
fn test_connection_close_state() {
    let args = Args::default();
    let client = create_client(
        &args,
        "127.0.0.1:0".parse().unwrap(),
        "127.0.0.1:4433".parse().unwrap(),
        "example.com",
        None,
    )
    .unwrap();

    let result = client.is_closed();
    assert!(matches!(result, Ok(CloseState::NotClosing)));

    client.close(Instant::now(), 0, "test close");
    let result = client.is_closed();
    assert!(matches!(result, Ok(CloseState::Closed)));
}