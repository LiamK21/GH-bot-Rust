<Filename> neqo-transport/src/connection.rs </Filename>
<imports> 
use neqo_transport::Connection;
use neqo_transport::Encoder;
</imports>
<Rust>
#[test]
fn test_assertion_failure_fixed() {
  let mut connection = Connection::new();
  let mut encoder = Encoder::new();
  encoder.extend_from_slice(&[1; 1500]); // assuming pmtu is 1500
  let token = None;
  let mut tokens = Vec::new();
  let mut out_bytes = Vec::new();
  connection.pmtu = 1500;
  if let Some(t) = token {
    tokens.push(t);
  }
  out_bytes.len() + encoder.len();
  assert!(encoder.len() <= connection.pmtu());
}</Rust>