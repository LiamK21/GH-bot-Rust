#[test]
fn test_server_version_information_failed() {
    let mut qlog = NeqoQlog::new();
    let server_versions = [Version::from(0x1), Version::from(0x2)];
    let client_version = WireVersion::from(0x3);

    server_version_information_failed(&mut qlog, &server_versions, client_version);

    let events = qlog.events();
    assert!(events.iter().any(|e| {
        if let EventData::VersionInformation(vi) = e.data {
            vi.client_versions == Some(vec![format!("{client_version:02x}")]) &&
            vi.server_versions == Some(server_versions.iter()
                .map(|v| format!("{:02x}", v.wire_version()))
                .collect())
        } else {
            false
        }
    }));
}