#[test]
fn test_url_handling() {
    let mut args = Args::default();
    let test_url1 = Url::parse("http://example.com/path1").unwrap();
    let test_url2 = Url::parse("http://example.com/path2").unwrap();
    let test_url3 = Url::parse("http://another.com/path").unwrap();

    args.urls = vec![test_url1.clone(), test_url2.clone(), test_url3.clone()];

    let expected_origins = vec![
        ("example.com", 80),
        ("another.com", 80),
    ];

    let actual_origins = main()
        .unwrap()
        .into_iter()
        .map(|((host, port), _)| (host, port))
        .collect::<Vec<_>>();

    assert_eq!(expected_origins, actual_origins);
}