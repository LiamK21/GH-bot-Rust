#[test]
fn test_evict_to_internal_no_infinite_loop() {
    let mut table = HeaderTable::new(true);
    table.set_capacity(10000).unwrap();

    table.insert(b"header1", b"value1").unwrap();
    table.insert(b"header2", b"value2").unwrap();

    table.increment_acked(2).unwrap();

    assert!(table.can_evict_to(0));
}