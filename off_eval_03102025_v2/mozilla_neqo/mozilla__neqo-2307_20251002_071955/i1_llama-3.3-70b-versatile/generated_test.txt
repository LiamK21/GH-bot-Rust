#[test]
fn test_can_evict_to_patch_fix() {
  let mut table = HeaderTable::new(true);
  table.set_capacity(100).unwrap();
  table.insert(b"header1", b"42").unwrap();
  table.insert(b"header2", b"42").unwrap();
  table.increment_acked(1).unwrap();
  let first_entry_size = table.get_dynamic_with_abs_index(0).unwrap().size() as u64;
  assert!(table.can_evict_to(first_entry_size));
  assert!(!table.can_evict_to(0));
}