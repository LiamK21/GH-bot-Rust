<Filename>neqo-crypto/src/agentio.rs</Filename>
<imports>
use super::agent_write;
use std::ptr::null;
use std::os::raw::c_void;
use crate::prio::PR_FAILURE;
</imports>
<Rust>
#[test]
fn test_agent_write_with_negative_amount() {
    let fd: *mut c_void = null::<c_void>() as *mut c_void;
    let buf: *const c_void = null();
    let amount: i32 = -1;
    let result = unsafe { agent_write(fd, buf, amount) };
    assert_eq!(result, PR_FAILURE);
}
</Rust>