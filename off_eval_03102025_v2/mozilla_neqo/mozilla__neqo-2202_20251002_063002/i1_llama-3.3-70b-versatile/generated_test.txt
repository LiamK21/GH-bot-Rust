#[test]
fn test_server_udp_receive_path_doesnt_allocate() {
  let mut server = HttpServer { server: Arc::new(Mutex::new(super::HttpServer)) };
  let mut sockets: Vec<(SocketAddr, Socket)> = vec![(SocketAddr::from([127, 0, 0, 1]), Socket::bind("127.0.0.1:0").unwrap())];
  let now = || Instant::now();
  let mut timeout: Option<Pin<Box<Sleep>>> = None;
  let mut dgram: Option<Datagram<&[u8]>> = None;

  let result = ServerRunner::process_inner(&mut server, &mut timeout, &mut sockets, &now, dgram);
  assert!(result.is_ok());
}