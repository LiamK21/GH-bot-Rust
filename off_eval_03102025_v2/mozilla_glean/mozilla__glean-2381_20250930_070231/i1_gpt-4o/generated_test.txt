#[test]
fn test_in_flight_pings_dropped_metric() {
    let glean = Glean::new();
    let upload_metrics = UploadMetrics::new();
    let mut in_flight_pings = HashSet::new();
    let document_id = "test_doc_id".to_string();
    in_flight_pings.insert(document_id.clone());

    let mut manager = PingUploadManager {
        upload_metrics,
        in_flight_pings,
    };

    manager.handle_ping_upload(&glean, document_id.clone(), "test_path");

    let expected = 1;
    let actual = manager.upload_metrics.in_flight_pings_dropped.test_get_value(&glean, None).unwrap_or(0);
    assert_eq!(expected, actual);
}