#[test]
fn test_lifetime_enum_handling() {
    let glean = new_glean();
    let metric = BooleanMetric::new(
        &glean,
        "test_metric".into(),
        "test".into(),
        "test".into(),
        Lifetime::Ping,
        1,
    ).unwrap();

    metric.set(true);

    // Give the metric time to potentially process
    std::thread::sleep(Duration::from_millis(100));

    let value = metric.get();

    // Cleanup
    metric.destroy();
    glean.destroy();

    assert!(value);
}