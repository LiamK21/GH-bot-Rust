#[test]
fn test_url_metric_truncation() {
  let glean = Glean::new("test");
  let metric = UrlMetric::new("test_url");
  let long_path = "testing".repeat(2000);
  let test_url = format!("glean://{}", long_path);
  let expected = format!("glean://{}", "abcdefgh".repeat(1023));
  metric.set_sync(&glean, test_url);
  assert_eq!(metric.get_value(&glean, "store1").unwrap(), expected);
}