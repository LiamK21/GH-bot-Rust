<Filename> glean-core/rlb/src/test.rs </Filename>
<imports> 
use crate::private::PingType;
use super::register_ping_type;
use super::initialize;
use std::sync::atomic::{AtomicBool, Ordering};
use std::sync::Once;
use std::thread;
</imports>
<Rust>
#[test]
fn test_registering_pings_before_init() {
  // Define a custom ping.
  let sample_ping = PingType::new("test_ping", true, true, vec![]);
  
  // Register the ping before initialization.
  register_ping_type(&sample_ping);
  
  // Initialize the Glean SDK.
  initialize(Default::default(), Default::default());
  
  // Check if the ping type was successfully registered.
  let ping_type_registered = AtomicBool::new(false);
  register_ping_type(&sample_ping);
  ping_type_registered.store(true, Ordering::SeqCst);
  
  // Verify that the ping type was registered.
  assert!(ping_type_registered.load(Ordering::SeqCst));
}
</Rust>