#[test]
fn test_thread_registration_unregistration() {
    let (tx, rx) = mpsc::channel();

    let handle = glean_core::thread::spawn("test_thread", move || {
        // Simulate some work
        let (sender, receiver) = mpsc::channel();
        tx.send(sender).unwrap();

        // Wait for 100ms to simulate thread activity
        std::thread::sleep(Duration::from_millis(100));

        // Send a completion signal
        receiver.recv().unwrap();
    }).expect("Failed to spawn thread");

    // Ensure the thread is running and registered
    let _ = rx.recv().unwrap();

    // Wait for the thread to finish
    handle.join().unwrap();
}