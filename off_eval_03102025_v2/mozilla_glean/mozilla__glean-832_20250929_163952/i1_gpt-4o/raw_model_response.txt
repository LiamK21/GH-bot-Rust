<Filename>glean-core/src/upload/mod.rs</Filename>
<imports>
use super::UploadResult;
use super::PingUploadManager;
use crate::metrics::PingType;
use crate::tests::new_glean;
use crate::PENDING_PINGS_DIRECTORY;
use std::thread;
use std::time::Duration;
</imports>
<Rust>
#[test]
fn test_processes_no_op_upload_response() {
    let (mut glean, dir) = new_glean(None);

    let ping_type = PingType::new("test", true, true, vec![]);
    glean.register_ping_type(&ping_type);

    glean.submit_ping(&ping_type, None).unwrap();

    let upload_manager = PingUploadManager::new(&dir.path());

    let mut upload_task = upload_manager.get_upload_task();
    while upload_task == PingUploadTask::Wait {
        thread::sleep(Duration::from_millis(10));
        upload_task = upload_manager.get_upload_task();
    }

    let pending_pings_dir = dir.path().join(PENDING_PINGS_DIRECTORY);

    match upload_task {
        PingUploadTask::Upload(request) => {
            let uuid = request.uuid;
            upload_manager.process_ping_upload_response(&uuid, UploadResult::RecoverableFailure);
            assert!(pending_pings_dir.join(uuid).exists());
        }
        _ => panic!("Expected upload manager to return the next request!"),
    }
}
</Rust>