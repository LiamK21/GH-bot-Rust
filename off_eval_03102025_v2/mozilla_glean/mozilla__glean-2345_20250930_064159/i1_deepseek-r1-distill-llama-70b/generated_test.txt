#[test]
fn test_config_option() -> Result<()> {
    let temp_dir = env::temp_dir().join("test_config_option");
    fs::create_dir_all(&temp_dir).unwrap();

    let udl_file = temp_dir.join("test.udl");
    fs::File::create(&udl_file).unwrap();

    let config_file = temp_dir.join("config.toml");
    fs::File::create(&config_file).unwrap();

    let args = vec![
        "--config",
        config_file.to_str().unwrap(),
        udl_file.to_str().unwrap(),
        "target",
        "out",
    ];

    let mut test_args = vec!["dummy_program_name"];
    test_args.extend(args);
    env::set_args(test_args);

    main().unwrap();

    Ok(())
}