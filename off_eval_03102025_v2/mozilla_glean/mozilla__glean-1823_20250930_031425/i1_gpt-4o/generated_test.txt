#[test]
fn test_glean_labeled_counter_metric_get_handles_reuse() {
    static TEST_LABEL_MAP: Lazy<Mutex<HashMap<String, u64>>> = Lazy::new(|| Mutex::new(HashMap::new()));

    let handle = 1;
    let label = "test_label";
    let id = format!("{}/{}", handle, label);

    let mut map = TEST_LABEL_MAP.lock().unwrap();
    map.insert(id.clone(), 42);

    let result = glean_labeled_counter_metric_get(handle, label.into());

    assert_eq!(result, 42);
}