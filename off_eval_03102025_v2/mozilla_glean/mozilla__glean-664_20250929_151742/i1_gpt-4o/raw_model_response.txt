<Filename>glean-core/ffi/src/lib.rs</Filename>
<imports>
use super::glean_initialize;
use super::glean_is_upload_enabled;
use std::ptr;
use ffi_support::FfiStr;
</imports>
<Rust>
#[test]
fn test_glean_initialize_and_is_upload_enabled() {
    let config = FfiConfiguration {
        data_path: FfiStr::from_str("test_path"),
        application_id: FfiStr::from_str("test_app"),
        upload_enabled: 1,
        max_events: 0,
    };
    let config_ptr = &config as *const FfiConfiguration;
    let expected = 1;
    let actual = unsafe { glean_initialize(config_ptr) };
    assert_eq!(expected, actual);

    let expected_upload_enabled = 1;
    let actual_upload_enabled = glean_is_upload_enabled();
    assert_eq!(expected_upload_enabled, actual_upload_enabled);
}
</Rust>