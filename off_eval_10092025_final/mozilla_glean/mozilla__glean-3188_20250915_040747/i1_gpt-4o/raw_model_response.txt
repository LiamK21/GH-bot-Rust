<Filename> glean-core/src/ping/mod.rs </Filename>
<imports> 
use super::PingMaker;
use serde_json::json;
</imports>
<Rust>
#[test]
fn test_uploader_capabilities_instrumentation() {
    let mut ping_maker = PingMaker::new();
    ping_maker.set_uploader_capabilities(vec!["capability1".to_string(), "capability2".to_string()]);
    ping_maker.set_send_if_empty(true);

    let mut metrics_data = None;
    let events_data = None;

    ping_maker.add_uploader_capabilities_to_metrics(&mut metrics_data, events_data);

    let expected = json!({
        "string_list": {
            "glean.ping.uploader_capabilities": ["capability1", "capability2"]
        }
    });

    assert_eq!(metrics_data, Some(expected));
}
</Rust>