<Filename> glean-core/ffi/src/upload.rs </Filename>
<imports> 
use super::FfiPingUploadTask;
use super::PingUploadTask;
use std::ffi::CString;
use std::os::raw::c_char;
use ffi_support::ByteBuffer;
use glean_core::upload::PingUploadTask;
</imports>
<Rust>
#[test]
fn test_ffi_ping_upload_task_from_ping_upload_task() {
  let request = PingUploadTask::Upload(glean_core::upload::Request { 
    document_id: "document_id".to_string(), 
    path: "path".to_string(), 
    body: vec![1,2,3], 
    headers: serde_json::json!({"header": "value"}) });
  let expected_body = ByteBuffer::from_vec(vec![1,2,3]);
  let actual: FfiPingUploadTask = FfiPingUploadTask::from(request);
  match actual {
    FfiPingUploadTask::Upload { body, .. } => assert_eq!(body, expected_body),
    _ => assert!(false),
  }
}
</Rust>