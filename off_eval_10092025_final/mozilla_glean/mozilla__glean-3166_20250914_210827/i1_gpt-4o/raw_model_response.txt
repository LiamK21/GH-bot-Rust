<Filename>samples/rust/src/main.rs</Filename>
<imports>
use super::main;
use glean::ErrorType;
use glean_metrics::test_dual_labeled;
</imports>
<Rust>
#[test]
fn test_keyed_categorical_counter_metric() {
    main();

    assert_eq!(
        0,
        test_dual_labeled::static_static
            .test_get_num_recorded_errors(ErrorType::InvalidLabel)
    );
    assert_eq!(
        Some(1),
        test_dual_labeled::static_static
            .get("key1", "category1")
            .test_get_value(None)
    );
    assert_eq!(
        0,
        test_dual_labeled::dynamic_static
            .test_get_num_recorded_errors(ErrorType::InvalidLabel)
    );
    assert_eq!(
        Some(1),
        test_dual_labeled::dynamic_static
            .get("party", "category1")
            .test_get_value(None)
    );
    assert_eq!(
        0,
        test_dual_labeled::static_dynamic
            .test_get_num_recorded_errors(ErrorType::InvalidLabel)
    );
    assert_eq!(
        Some(1),
        test_dual_labeled::static_dynamic
            .get("key1", "balloons")
            .test_get_value(None)
    );
    assert_eq!(
        0,
        test_dual_labeled::dynamic_dynamic
            .test_get_num_recorded_errors(ErrorType::InvalidLabel)
    );
    assert_eq!(
        Some(1),
        test_dual_labeled::dynamic_dynamic
            .get("party", "balloons")
            .test_get_value(None)
    );
    assert_eq!(
        Some(1),
        test_dual_labeled::static_static
            .get("__other__", "__other__")
            .test_get_value(None)
    );
}
</Rust>