#[test]
fn test_rkv_new_deletes_invalid_file() {
    let temp_dir = tempdir().unwrap();
    let db_path = temp_dir.path().join("db");

    // Create an invalid database file (empty file)
    let invalid_file = db_path.join("data.safe.bin");
    File::create(&invalid_file).unwrap();

    // Attempt to create Rkv instance
    let result = rkv_new(&db_path);

    // The invalid file should have been deleted
    assert!(!invalid_file.exists());
    assert!(result.is_ok());
}