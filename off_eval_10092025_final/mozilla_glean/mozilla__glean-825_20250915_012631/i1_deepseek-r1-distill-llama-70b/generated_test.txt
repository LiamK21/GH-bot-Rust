#[test]
fn test_clear_ping_queue_retains_only_deletion_requests() {
    let manager = PingUploadManager::new();

    // Add a mix of deletion and non-deletion pings
    manager.enqueue_ping("1", "path1", serde_json::json!({}), PingType::DeletionRequest);
    manager.enqueue_ping("2", "path2", serde_json::json!({}), PingType::Normal);
    manager.enqueue_ping("3", "path3", serde_json::json!({}), PingType::DeletionRequest);

    let queue = manager.clear_ping_queue();

    // Should only contain the two deletion-request pings
    assert_eq!(2, queue.len());
    assert_eq!(PingType::DeletionRequest, queue[0].ping_type());
    assert_eq!(PingType::DeletionRequest, queue[1].ping_type());
}