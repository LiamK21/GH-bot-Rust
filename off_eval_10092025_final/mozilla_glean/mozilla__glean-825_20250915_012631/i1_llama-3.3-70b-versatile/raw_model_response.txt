<Filename> glean-core/src/upload/mod.rs </Filename>
<imports> 
use super::PingUploadManager;
use std::sync::RwLockWriteGuard;
use std::collections::VecDeque;
use super::PingRequest;
use super::JsonValue;
</imports>
<Rust>
#[test]
fn test_clear_ping_queue() {
  let ping_uuid = "test_ping";
  let ping_path = "test_path";
  let ping_body = JsonValue::Null;
  let ping_upload_manager = PingUploadManager { queue: RwLockWriteGuard::new(VecDeque::new()) };
  let ping_request = PingRequest { uuid: ping_uuid.to_string(), path: ping_path.to_string(), body: ping_body, is_deletion_request: true };
  let mut queue = ping_upload_manager.queue.write().unwrap();
  queue.push_back(ping_request.clone());
  queue.push_back(PingRequest { uuid: "other_ping".to_string(), path: "other_path".to_string(), body: JsonValue::Null, is_deletion_request: false });
  let cleared_queue = ping_upload_manager.clear_ping_queue();
  assert_eq!(cleared_queue.len(), 1);
  assert_eq!(cleared_queue.get(0).unwrap().uuid, ping_uuid);
}</Rust>