#[test]
fn test_set_source_tags_after_initialization() {
  let _lock = std::sync::Mutex::new(());
  let _guard = _lock.lock().unwrap();
  set_source_tags(vec!["valid-tag1".to_string(), "valid-tag2".to_string()]);
  assert!(was_initialize_called());
  std::thread::sleep(Duration::from_millis(100));
  let (s, r) = bounded(1);
  let handle = std::thread::spawn(move || {
    set_source_tags(vec!["valid-tag3".to_string(), "valid-tag4".to_string()]);
    s.send("source_tags_set".to_string()).unwrap();
  });
  let received = r.recv().unwrap();
  assert_eq!(received, "source_tags_set");
  handle.join().unwrap();
}