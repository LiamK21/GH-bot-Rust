<Filename> glean-core/rlb/src/test.rs </Filename>
<imports> 
use super::CounterMetric;
use super::new_glean;
use super::destroy_glean;
use super::CommonMetricData;
use super::Lifetime;
use std::sync::Arc;
</imports>
<Rust>
#[test]
fn test_counter_metric_add() {
  destroy_glean(true);
  let metric = CounterMetric::new(CommonMetricData {
    name: "counter_metric".into(),
    category: "test".into(),
    send_in_pings: vec!["store1".into()],
    lifetime: Lifetime::Application,
    disabled: false,
    dynamic_label: None,
  });
  metric.add(5);
  let _ = new_glean(None, false);
  assert_eq!(5, metric.test_get_value(None).unwrap());
}
</Rust>