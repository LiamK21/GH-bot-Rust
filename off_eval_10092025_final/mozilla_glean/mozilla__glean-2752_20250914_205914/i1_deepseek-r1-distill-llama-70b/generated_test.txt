#[test]
fn test_test_get_value_returns_json() {
    let _lock = lock_test();
    let glean = new_glean();
    let metric = ObjectMetric::<serde_json::Value>::new(glean, "test_metric".into());

    let test_value = json!({
        "key": "value",
        "array": [1, 2, 3],
        "object": { "nested": true }
    });

    metric.set(test_value.clone());

    let result = metric.test_get_value(None).expect("Should have a value");

    assert_eq!(test_value, result);
}