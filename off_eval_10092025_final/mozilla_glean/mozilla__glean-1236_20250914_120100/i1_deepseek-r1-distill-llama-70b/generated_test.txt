#[test]
fn test_pending_pings_directory_size_in_kb() {
    let temp_dir = PathBuf::from(env!("CARGO_MANIFEST_DIR")).join("test_data/temp");
    fs::create_dir_all(&temp_dir).unwrap();

    // Create a test ping file
    let ping_file = temp_dir.join("ping.json");
    fs::write(&ping_file, "test").unwrap();

    let mut manager = PingUploadManager::new();
    manager.process_pending_pings(&temp_dir).unwrap();

    let metric = manager.upload_metrics.pending_pings_directory_size.get();
    assert_eq!(metric, 1);
}