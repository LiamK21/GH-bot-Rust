<Filename> glean-core/src/upload/request.rs </Filename>
<imports> 
use super::Builder;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_removed_legacy_headers() {
  let mut builder = Builder::default();
  let request = builder.build();
  let expected_headers = vec!["Date", "X-Telemetry-Agent", "Content-Type", "Content-Length"];
  let actual_headers: Vec<&str> = request.headers.keys().map(|k| k.as_str()).collect();
  assert!(actual_headers.iter().all(|h| expected_headers.contains(h)));
  assert!(!request.headers.contains_key("X-Client-Type"));
  assert!(!request.headers.contains_key("X-Client-Version"));
}</Rust>