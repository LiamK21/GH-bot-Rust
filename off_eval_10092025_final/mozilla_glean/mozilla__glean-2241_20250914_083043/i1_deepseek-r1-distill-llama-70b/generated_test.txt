#[test]
fn test_trigger_upload_returns_error() {
    struct MockCallbacks;

    impl OnGleanEvents for MockCallbacks {
        fn trigger_upload(&self) -> Result<(), CallbackError> {
            Err(CallbackError::UnexpectedError)
        }

        fn start_metrics_ping_scheduler(&self) -> bool {
            false
        }

        fn cancel_uploads(&self) -> Result<(), CallbackError> {
            Ok(())
        }
    }

    let callbacks = MockCallbacks;
    let result = callbacks.trigger_upload();
    assert!(matches!(result, Err(CallbackError::UnexpectedError)));
}