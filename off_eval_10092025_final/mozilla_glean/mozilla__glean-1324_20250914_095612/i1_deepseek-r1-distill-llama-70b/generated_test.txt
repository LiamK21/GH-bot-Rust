#[test]
fn test_setting_valid_string_records_value_and_no_errors() {
    let (glean, _) = new_glean(None);

    let metric = StringMetric::new(crate::CommonMetricData {
        name: "string_metric".into(),
        category: "test".into(),
        send_in_pings: vec!["store1".into()],
        lifetime: crate::Lifetime::Application,
        disabled: false,
        dynamic_label: None,
    });

    let sample_string = "valid_string";
    metric.set(sample_string);

    let stored_value = metric.test_get_value("store1").unwrap();
    assert_eq!(stored_value, sample_string);

    assert_eq!(
        0,
        metric.test_get_num_recorded_errors(ErrorType::InvalidOverflow, "store1")
    );
}