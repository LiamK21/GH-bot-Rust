#[test]
fn test_memory_distribution() {
  let meta = glean_core::CommonMetricData {
    name: "test_metric".to_string(),
    category: "test_category".to_string(),
    type_: glean_core::metrics::MetricType::MemoryDistribution,
    send_in_pings: vec!["test_ping".to_string()],
    ..Default::default()
  };
  let metric = MemoryDistributionMetric::new(meta, MemoryUnit::Byte);
  metric.accumulate(100);
  let result = metric.test_get_value(Some("test_ping"));
  let expected = Some(DistributionData { values: vec![100], sum: 100 });
  assert_eq!(result, expected);
  let error_count = metric.test_get_num_recorded_errors(ErrorType::InvalidValue, None);
  assert_eq!(error_count, 0);
}