#[test]
fn test_merge_without_panic() {
    let mut a = Histogram::new(1..=2).unwrap();
    let mut b = Histogram::new(1..=2).unwrap();

    // Accumulate a very large count to cause overflow
    let large_count = i32::MAX - 1;
    a.accumulate(large_count);
    b.accumulate(large_count);

    // Before patch, this would panic due to overflow
    a.merge(&b);

    // After patch, sum should be saturated but not panic
    let expected_sum = i32::MAX;
    assert_eq!(a.sum, expected_sum);

    let expected_count = i32::MAX;
    assert_eq!(a.count, expected_count);
}