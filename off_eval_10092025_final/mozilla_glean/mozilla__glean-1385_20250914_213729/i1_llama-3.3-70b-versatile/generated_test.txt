#[test]
fn test_wait_task_contains_expected_wait_time_when_throttled() {
  let (glean, dir) = (Glean::new(), Path::new("test"));
  let mut upload_manager = PingUploadManager::new(dir, "test");
  upload_manager.set_rate_limiter(3, 1);
  upload_manager.enqueue_ping(&glean, "doc_id", "path", "", None);
  let task = upload_manager.get_upload_task(&glean, false);
  match task {
    super::PingUploadTask::Wait(time) => {
      assert!(time > 0);
    }
    _ => panic!("Expected upload manager to return a wait task!"),
  };
}