#[test]
fn test_glean_disabled_message_is_info() {
    // Set up logging to capture messages
    let (handler, mut listener) = logging::handler::with_level(Level::Info)
        .build()
        .rotate()
        .test();

    // Initialize Glean with telemetry disabled
    let glean = Glean::new(
        "test".into(),
        "test".into(),
        None,
        None,
        false, // telemetry disabled
    );

    // Call submit_ping to trigger the log message
    let result = glean.submit_ping(&PingType::default(), None);
    assert!(result.is_ok());

    // Check the logs for the expected info message
    listener.refresh();
    let records = listener.records();
    assert_eq!(records.len(), 1);
    assert_eq!(records[0].level(), Level::Info);
    assert_eq!(
        records[0].args().to_string(),
        "Glean disabled: not submitting any pings."
    );
}