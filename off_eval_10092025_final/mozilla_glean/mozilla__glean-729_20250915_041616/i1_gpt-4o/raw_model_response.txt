<Filename>glean-core/src/lib.rs</Filename>
<imports>
use super::Glean;
use super::PingType;
use super::PingUploadTask;
use crate::tests::new_glean;
</imports>
<Rust>
#[test]
fn test_ping_upload_manager_functionality() {
    let (mut glean, _) = new_glean(None);

    // Register a ping for testing
    let ping_type = PingType::new("test", true, /* send_if_empty */ true, vec![]);
    glean.register_ping_type(&ping_type);

    // Submit the ping
    glean.submit_ping(&ping_type, None).unwrap();

    // Get the upload task
    let upload_task = glean.get_upload_task();

    // Verify that the upload task is not done, meaning there's a ping to upload
    assert!(matches!(upload_task, PingUploadTask::Upload(_)));
}
</Rust>