#[test]
fn test_bundled_resources() {
    let tmp_dir = TempDir::new().unwrap();

    // Test with CDN resources
    let config_cdn = Config {
        html_resources: HtmlResources::Cdn,
        ..Default::default()
    };
    let ctx_cdn = make_context(&config_cdn, ".");
    assert!(ctx_cdn.get::<String>("bulma_url").unwrap().starts_with("https://cdn.jsdelivr.net"));

    // Test with bundled resources
    let config_bundled = Config {
        html_resources: HtmlResources::Bundled,
        ..Default::default()
    };
    gen_bundled_resources(&config_bundled, &tmp_dir.path());

    let bulma_path = tmp_dir.path().join("bulma.min.css");
    assert!(bulma_path.exists());

    let ctx_bundled = make_context(&config_bundled, ".");
    let expected_url = format!("{}/bulma.min.css", tmp_dir.path().to_str().unwrap());
    assert_eq!(ctx_bundled.get::<String>("bulma_url").unwrap(), expected_url);
}