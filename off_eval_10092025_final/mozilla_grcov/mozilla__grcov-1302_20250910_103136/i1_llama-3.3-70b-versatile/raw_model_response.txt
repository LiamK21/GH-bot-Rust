<Filename> src/html.rs </Filename>
<imports> 
use super::gen_html;
use super::HtmlGlobalStats;
use super::HtmlJobReceiver;
use super::Config;
use std::sync::{Arc, Mutex};
use std::path::Path;
use std::path::PathBuf;
</imports>
<Rust>
#[test]
fn test_abs_link_prefix() {
  let output = Path::new("output");
  let rel_path = Path::new("test");
  let global = Arc::new(Mutex::new(HtmlGlobalStats { abs_prefix: None, ..Default::default() }));
  let conf = Config { ..Default::default() };
  let abs_link_prefix = Some("https://example.com".to_string());
  let mut globalStats = HtmlGlobalStats { abs_prefix: abs_link_prefix.clone().map(PathBuf::from), ..Default::default() };
  let global_with_prefix = Arc::new(Mutex::new(globalStats));
  gen_html(&(), output, rel_path, &(), &conf, output, rel_path, global.clone(), &None);
  gen_html(&(), output, rel_path, &(), &conf, output, rel_path, global_with_prefix, &abs_link_prefix);
  let lock = global.lock().unwrap();
  assert!(lock.abs_prefix.is_none());
  let lock_with_prefix = global_with_prefix.lock().unwrap();
  assert_eq!(lock_with_prefix.abs_prefix, abs_link_prefix.clone().map(PathBuf::from));
}</Rust>