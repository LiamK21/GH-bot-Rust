<Filename> src/main.rs </Filename>
<imports> 
use super::rewrite_paths;
use std::path::PathBuf;
use std::collections::HashMap;
</imports>
<Rust>
#[test]
fn test_rewrite_paths_with_keep_option() {
  let mut result_map: HashMap<String, ()> = HashMap::new();
  result_map.insert("main.rs".to_string(), ());
  result_map.insert("foo/keep.rs".to_string(), ());
  result_map.insert("foo/not_keep.cpp".to_string(), ());
  let to_keep_dirs = &vec!["foo/*.rs"];
  let to_ignore_dirs: &mut [&str] = &mut vec![];
  let results = rewrite_paths(
    result_map,
    None,
    None,
    None,
    false,
    to_ignore_dirs,
    to_keep_dirs,
    None,
    ()
  );
  let mut count = 0;
  for (_abs_path, _rel_path, _result) in results {
    count += 1;
  }
  assert_eq!(count, 1);
}
</Rust>