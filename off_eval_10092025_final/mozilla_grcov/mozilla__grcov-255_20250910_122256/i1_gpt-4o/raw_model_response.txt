<Filename> src/output.rs </Filename>
<imports>
use super::output_lcov;
use std::fs::File;
use std::io::{BufReader, Read};
use tempfile::tempdir;
use defs::CovResultIter;
</imports>
<Rust>
#[test]
fn test_output_lcov_to_file() {
    let temp_dir = tempdir().unwrap();
    let file_path = temp_dir.path().join("output.info");
    let output_file = Some(file_path.to_str().unwrap().to_string());

    let results: CovResultIter = vec![
        (String::from("file1.rs"), String::from("file1.rs"), Default::default()),
        (String::from("file2.rs"), String::from("file2.rs"), Default::default()),
    ].into_iter();

    output_lcov(results, output_file.as_ref());

    let mut file = File::open(file_path).unwrap();
    let mut contents = String::new();
    file.read_to_string(&mut contents).unwrap();

    assert!(contents.contains("TN:"));
    assert!(contents.contains("SF:file1.rs"));
    assert!(contents.contains("SF:file2.rs"));
}
</Rust>