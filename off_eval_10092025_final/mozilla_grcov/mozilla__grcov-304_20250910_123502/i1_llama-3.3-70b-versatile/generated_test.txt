#[test]
fn test_run_gcov_error_handling() {
  let mut command = Command::new("fake_gcov");
  command.arg("-b").arg("-c").arg("test.gcno");
  let _ = std::fs::remove_file("test.gcno");
  let working_dir = PathBuf::from(".");
  let branch_enabled = true;
  let result = run_gcov(&PathBuf::from("test.gcno"), branch_enabled, &working_dir);
  let error = result.unwrap_err();
  match error {
    super::GcovError::Failure((path, _, _)) => assert_eq!(path, "test.gcno"),
    _ => assert!(false),
  }
}