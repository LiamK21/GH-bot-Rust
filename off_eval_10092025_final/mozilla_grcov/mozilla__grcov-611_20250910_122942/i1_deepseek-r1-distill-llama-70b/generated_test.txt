#[test]
fn test_execution_count_overflow_logging() {
    // Initialize logger to capture logs
    let _ = Builder::new()
        .is_test(true)
        .filter_level(log::LevelFilter::Info)
        .try_init()
        .unwrap();

    let mut results = Vec::new();
    let mut map = HashMap::new();

    // Add test data that would trigger the overflow warning
    map.insert("test".to_string(), CovResult::new(0, 0, 0));
    add_results(&mut results, map, true);

    // Check logs for warning message
    let (log_message, log_level) = {
        let mut log_message = String::new();
        let mut log_level = Level::Info;

        // Capture logs from the test execution
        let _ = env_logger::Builder::new()
            .is_test(true)
            .filter_level(log::LevelFilter::Info)
            .try_init()
            .unwrap();

        env_logger::Builder::new()
            .is_test(true)
            .filter_level(log::LevelFilter::Info)
            .try_init()
            .unwrap()
            .log(&Record::new(
                log::Level::Warn,
                "Execution count overflow detected.",
                &Metadata::new("grcov", "lib.rs", "add_results")
            ));

        (log_message, log_level)
    };

    assert_eq!(log_level, Level::Warn);
    assert_eq!(log_message, "Execution count overflow detected.");
}