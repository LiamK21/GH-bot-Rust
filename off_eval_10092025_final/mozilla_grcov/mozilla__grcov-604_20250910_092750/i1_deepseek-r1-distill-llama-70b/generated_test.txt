#[test]
fn test_output_file_parent_directory_error() {
    let output_file = "nonexistent_dir/coverage.info";
    let expected_msg = format!(
        "Cannot create {} to dump coverage data, as {} doesn't exist",
        output_file,
        "nonexistent_dir"
    );

    let result = panic::catch_unwind(|| {
        get_target_output_writable(Some(output_file))
    });

    assert!(result.is_err());
    let err = result.unwrap_err().downcast::<&str>().unwrap();
    assert!(err.contains(&expected_msg));
}