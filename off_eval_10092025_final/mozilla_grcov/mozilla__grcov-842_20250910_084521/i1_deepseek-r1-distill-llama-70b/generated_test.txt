#[test]
fn test_windows_path_handling() {
    let temp_dir = tempfile::tempdir().unwrap();
    let stem = temp_dir.path().join("subdir");
    std::fs::create_dir(&stem).unwrap();
    let test_file = stem.join("test.txt");
    std::fs::File::create(&test_file).unwrap();

    let mut results = vec![(test_file.to_str().unwrap().to_string(), CovResult::default())];
    rename_single_files(&mut results, stem.to_str().unwrap());

    let expected_path = stem.join("test.txt");
    let actual_path = Path::new(&results[0].0);
    assert_eq!(actual_path, expected_path);
    assert!(actual_path.to_str().unwrap().contains(if cfg!(windows) { "\\" } else { "/" }));
}