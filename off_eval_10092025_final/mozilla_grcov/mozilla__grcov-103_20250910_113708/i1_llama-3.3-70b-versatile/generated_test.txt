#[test]
fn test_cleanup_relative_paths() {
  let mut results = vec![("third_party/aom/aom_util/./aom_thread.h".to_string(), ())];
  let result_map: Arc<Mutex<HashMap<String, ()>>> = Arc::new(Mutex::new(HashMap::new()));
  let source_dir = Some(PathBuf::from("third_party/aom/aom_util"));
  add_results(results, &result_map, &source_dir);
  let result_map = Arc::try_unwrap(result_map).unwrap().into_inner().unwrap();
  let expected_key = "third_party/aom/aom_util/aom_thread.h";
  assert!(result_map.contains_key(expected_key));
}